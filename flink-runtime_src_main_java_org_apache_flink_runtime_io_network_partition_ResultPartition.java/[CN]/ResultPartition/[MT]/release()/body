{
  if (isReleased.compareAndSet(false,true)) {
    LOG.debug("Releasing {}",this);
    try {
      for (      ResultSubpartition subpartition : subpartitions) {
        try {
synchronized (subpartition) {
            subpartition.release();
          }
        }
 catch (        Throwable t) {
          LOG.error("Error during release of result subpartition: " + t.getMessage(),t);
        }
      }
    }
  finally {
      if (bufferPool != null) {
        bufferPool.lazyDestroy();
      }
    }
  }
}
