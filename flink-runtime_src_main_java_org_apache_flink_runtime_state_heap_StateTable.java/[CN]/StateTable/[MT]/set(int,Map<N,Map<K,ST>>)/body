{
  if (!keyGroupRange.contains(index)) {
    throw new RuntimeException("Unexpected key group index. This indicates a bug.");
  }
  state.set(indexToOffset(index),map);
}
