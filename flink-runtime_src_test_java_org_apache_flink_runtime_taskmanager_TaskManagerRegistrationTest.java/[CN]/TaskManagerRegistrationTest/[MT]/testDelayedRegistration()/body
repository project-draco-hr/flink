{
  new JavaTestKit(actorSystem){
{
      try {
        final ActorRef taskManager=startTaskManager(JobManager.getLocalJobManagerAkkaURL(),new Configuration());
        Thread.sleep(6000);
        final ActorRef jobManager=JobManager.startJobManagerActors(new Configuration(),actorSystem,StreamingMode.BATCH_ONLY)._1();
        Future<Object> responseFuture=Patterns.ask(taskManager,TaskManagerMessages.getNotifyWhenRegisteredAtJobManagerMessage(),30000);
        Object response=Await.result(responseFuture,new FiniteDuration(30,TimeUnit.SECONDS));
        Class<?> confirmClass=TaskManagerMessages.getRegisteredAtJobManagerMessage().getClass();
        assertTrue(response != null && confirmClass.isAssignableFrom(response.getClass()));
        stopActor(taskManager);
        stopActor(jobManager);
      }
 catch (      Exception e) {
        e.printStackTrace();
        fail(e.getMessage());
      }
    }
  }
;
}
