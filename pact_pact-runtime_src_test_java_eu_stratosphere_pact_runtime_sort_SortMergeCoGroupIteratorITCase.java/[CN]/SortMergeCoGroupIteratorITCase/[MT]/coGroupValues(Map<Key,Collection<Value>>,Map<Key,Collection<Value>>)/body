{
  Map<Key,List<Collection<Value>>> map=new HashMap<Key,List<Collection<Value>>>();
  Set<Key> keySet=new HashSet<Key>(leftMap.keySet());
  keySet.addAll(rightMap.keySet());
  for (  Key key : keySet) {
    Collection<Value> leftValues=leftMap.get(key);
    Collection<Value> rightValues=rightMap.get(key);
    map.put(key,new ArrayList<Collection<Value>>(2));
    if (leftValues == null) {
      map.get(key).add(new ArrayList<Value>(0));
    }
 else {
      map.get(key).add(leftValues);
    }
    if (rightValues == null) {
      map.get(key).add(new ArrayList<Value>(0));
    }
 else {
      map.get(key).add(rightValues);
    }
  }
  return map;
}
