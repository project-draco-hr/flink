{
  if (channels == null || channels.length != 1) {
    channels=new int[1];
  }
  int hash=this.comparator.hash(record);
  this.channels[0]=(hash < 0) ? -hash % numberOfChannels : hash % numberOfChannels;
  return this.channels;
}
