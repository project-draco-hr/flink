{
  final InternalBuffer internalBuffer=buffer.getInternalBuffer();
  if (!(internalBuffer instanceof MemoryBuffer)) {
    throw new RuntimeException("Provided buffer is not a memory buffer and cannot be used for compression");
  }
  final MemoryBuffer memoryBuffer=(MemoryBuffer)internalBuffer;
  return memoryBuffer.getByteBuffer();
}
