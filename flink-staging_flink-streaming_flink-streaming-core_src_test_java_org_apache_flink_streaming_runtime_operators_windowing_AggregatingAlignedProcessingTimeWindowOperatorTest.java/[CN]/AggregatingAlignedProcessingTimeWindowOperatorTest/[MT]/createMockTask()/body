{
  StreamTask<?,?> task=mock(StreamTask.class);
  when(task.getAccumulatorMap()).thenReturn(new HashMap<String,Accumulator<?,?>>());
  when(task.getName()).thenReturn("Test task name");
  when(task.getExecutionConfig()).thenReturn(new ExecutionConfig());
  Environment env=mock(Environment.class);
  when(env.getIndexInSubtaskGroup()).thenReturn(0);
  when(env.getNumberOfSubtasks()).thenReturn(1);
  when(env.getUserClassLoader()).thenReturn(AggregatingAlignedProcessingTimeWindowOperatorTest.class.getClassLoader());
  when(task.getEnvironment()).thenReturn(env);
  @SuppressWarnings("unchecked") OngoingStubbing<StateBackend<?>> stubbing=(OngoingStubbing<StateBackend<?>>)(OngoingStubbing<?>)when(task.getStateBackend());
  stubbing.thenReturn(MemoryStateBackend.defaultInstance());
  return task;
}
