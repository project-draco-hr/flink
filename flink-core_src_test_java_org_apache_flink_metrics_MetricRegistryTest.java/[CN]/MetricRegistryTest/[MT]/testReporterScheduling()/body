{
  Configuration config=new Configuration();
  config.setString(MetricRegistry.KEY_METRICS_REPORTER_CLASS,TestReporter3.class.getName());
  config.setString(MetricRegistry.KEY_METRICS_REPORTER_INTERVAL,"50 MILLISECONDS");
  new MetricRegistry(config);
  long start=System.currentTimeMillis();
  for (int x=0; x < 10; x++) {
    Thread.sleep(100);
    int reportCount=TestReporter3.reportCount;
    long curT=System.currentTimeMillis();
    long maxAllowedReports=(curT - start) / 50 + 2;
    Assert.assertTrue("Too many report were triggered.",maxAllowedReports >= reportCount);
  }
  Assert.assertTrue("No report was triggered.",TestReporter3.reportCount > 0);
}
