{
  SlidingWindowState<Integer> state=new SlidingWindowState<Integer>(SLIDING_BATCH_SIZE,SLIDE_SIZE,UNIT);
  state.pushBack(Arrays.asList(new StreamRecord<Integer>().setObject(0)));
  state.pushBack(Arrays.asList(new StreamRecord<Integer>().setObject(1)));
  assertEquals(false,state.isFull());
  state.pushBack(Arrays.asList(new StreamRecord<Integer>().setObject(2)));
  assertTrue(state.isFull());
  SlidingWindowStateIterator<Integer> iterator=state.getIterator();
  SortedSet<Integer> actualSet=new TreeSet<Integer>();
  while (iterator.hasNext()) {
    actualSet.add(iterator.next());
  }
  assertEquals(getExpectedSet(0,2),actualSet);
  actualSet.clear();
  state.pushBack(Arrays.asList(new StreamRecord<Integer>().setObject(3)));
  assertEquals(false,state.isEmittable());
  state.pushBack(Arrays.asList(new StreamRecord<Integer>().setObject(4)));
  assertTrue(state.isEmittable());
  iterator=state.getIterator();
  while (iterator.hasNext()) {
    actualSet.add(iterator.next());
  }
  assertEquals(getExpectedSet(2,4),actualSet);
}
