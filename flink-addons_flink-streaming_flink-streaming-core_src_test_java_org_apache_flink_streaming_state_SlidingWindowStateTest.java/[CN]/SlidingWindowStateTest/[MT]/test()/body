{
  SlidingWindowState<Integer> state=new SlidingWindowState<Integer>(SLIDING_BATCH_SIZE,SLIDE_SIZE,UNIT);
  state.pushBack(Arrays.asList(0));
  state.pushBack(Arrays.asList(1));
  assertEquals(false,state.isFull());
  state.pushBack(Arrays.asList(2));
  assertTrue(state.isFull());
  SlidingWindowStateIterator<Integer> iterator=state.getIterator();
  SortedSet<Integer> actualSet=new TreeSet<Integer>();
  while (iterator.hasNext()) {
    actualSet.add(iterator.next());
  }
  assertEquals(getExpectedSet(0,2),actualSet);
  actualSet.clear();
  state.pushBack(Arrays.asList(3));
  assertEquals(false,state.isEmittable());
  state.pushBack(Arrays.asList(4));
  assertTrue(state.isEmittable());
  iterator=state.getIterator();
  while (iterator.hasNext()) {
    actualSet.add(iterator.next());
  }
  assertEquals(getExpectedSet(2,4),actualSet);
}
