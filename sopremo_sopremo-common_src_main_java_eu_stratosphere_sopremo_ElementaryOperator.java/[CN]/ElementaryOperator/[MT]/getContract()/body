{
  Class<? extends Stub<?,?>> stubClass=getStubClass();
  if (stubClass == null)   throw new IllegalStateException("no implementing stub found");
  Class<?> contractClass=getContractClass(stubClass);
  if (contractClass == null)   throw new IllegalStateException("no associated contract found");
  try {
    return (Contract)contractClass.getDeclaredConstructor(Class.class,String.class).newInstance(stubClass,toString());
  }
 catch (  Exception e) {
    throw new IllegalStateException("Cannot create contract from stub " + stubClass,e);
  }
}
