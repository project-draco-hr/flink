{
  final Class<? extends Stub<?,?>> stubClass=this.getStubClass();
  if (stubClass == null)   throw new IllegalStateException("no implementing stub found");
  final Class<? extends Contract> contractClass=ContractUtil.getContractClass(stubClass);
  if (contractClass == null)   throw new IllegalStateException("no associated contract found");
  try {
    return ReflectUtil.newInstance(contractClass,stubClass,this.toString());
  }
 catch (  final Exception e) {
    throw new IllegalStateException("Cannot create contract from stub " + stubClass,e);
  }
}
