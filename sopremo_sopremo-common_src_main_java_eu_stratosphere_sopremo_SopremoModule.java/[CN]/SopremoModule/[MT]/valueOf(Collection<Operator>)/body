{
  final List<Operator> inputs=new ArrayList<Operator>();
  OneTimeTraverser.INSTANCE.traverse(sinks,OperatorNavigator.INSTANCE,new GraphTraverseListener<Operator>(){
    @Override public void nodeTraversed(    Operator node){
      if (node instanceof Source)       inputs.add(node);
 else       for (      Operator.Output output : node.getInputs())       if (output == null)       inputs.add(node);
    }
  }
);
  SopremoModule module=new SopremoModule(inputs.size(),sinks.size());
  int sinkIndex=0;
  for (  Operator sink : sinks) {
    if (sink instanceof Sink)     module.outputNodes[sinkIndex]=(Sink)sink;
 else     module.getOutput(sinkIndex).setInput(0,sink);
    sinkIndex++;
  }
  for (int operatorIndex=0, moduleIndex=0; operatorIndex < inputs.size(); operatorIndex++) {
    Operator operator=inputs.get(operatorIndex);
    List<Output> operatorInputs=operator.getInputs();
    for (int inputIndex=0; inputIndex < sinks.size(); inputIndex++)     if (operatorInputs.get(inputIndex) == null)     operatorInputs.set(inputIndex,module.getInput(moduleIndex++).getOutput(0));
    operator.setInputs(operatorInputs);
  }
  return module;
}
