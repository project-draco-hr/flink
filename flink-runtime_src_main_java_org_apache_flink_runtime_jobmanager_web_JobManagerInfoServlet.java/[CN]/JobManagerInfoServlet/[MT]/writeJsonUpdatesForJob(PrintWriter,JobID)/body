{
  try {
    Iterable<ExecutionGraph> graphs=AkkaUtils.<RunningJobs>ask(jobmanager,JobManagerMessages.getRequestRunningJobs(),timeout).asJavaIterable();
    wrt.write("{");
    wrt.write("\"jobid\": \"" + jobId + "\",");
    wrt.write("\"timestamp\": \"" + System.currentTimeMillis() + "\",");
    wrt.write("\"recentjobs\": [");
    boolean first=true;
    for (    ExecutionGraph g : graphs) {
      if (first) {
        first=false;
      }
 else {
        wrt.write(",");
      }
      wrt.write("\"" + g.getJobID() + "\"");
    }
    wrt.write("],");
    JobResponse response=AkkaUtils.ask(jobmanager,new RequestJob(jobId),timeout);
    if (response instanceof JobFound) {
      ExecutionGraph graph=((JobFound)response).executionGraph();
      wrt.write("\"vertexevents\": [");
      first=true;
      for (      ExecutionVertex ev : graph.getAllExecutionVertices()) {
        if (first) {
          first=false;
        }
 else {
          wrt.write(",");
        }
        wrt.write("{");
        wrt.write("\"vertexid\": \"" + ev.getCurrentExecutionAttempt().getAttemptId() + "\",");
        wrt.write("\"newstate\": \"" + ev.getExecutionState() + "\",");
        wrt.write("\"timestamp\": \"" + ev.getStateTimestamp(ev.getExecutionState()) + "\"");
        wrt.write("}");
      }
      wrt.write("],");
      wrt.write("\"jobevents\": [");
      wrt.write("{");
      wrt.write("\"newstate\": \"" + graph.getState() + "\",");
      wrt.write("\"timestamp\": \"" + graph.getStatusTimestamp(graph.getState()) + "\"");
      wrt.write("}");
      wrt.write("]");
      wrt.write("}");
    }
 else {
      wrt.write("\"vertexevents\": [],");
      wrt.write("\"jobevents\": [");
      wrt.write("{");
      wrt.write("\"newstate\": \"" + JobStatus.FINISHED + "\",");
      wrt.write("\"timestamp\": \"" + System.currentTimeMillis() + "\"");
      wrt.write("}");
      wrt.write("]");
      wrt.write("}");
      LOG.warn("WriteJsonUpdatesForJob: Could not find job with job ID " + jobId);
    }
  }
 catch (  EofException eof) {
    LOG.info("Info server for jobmanager: Connection closed by client, EofException");
  }
catch (  IOException ioe) {
    LOG.info("Info server for jobmanager: Connection closed by client, IOException");
  }
}
