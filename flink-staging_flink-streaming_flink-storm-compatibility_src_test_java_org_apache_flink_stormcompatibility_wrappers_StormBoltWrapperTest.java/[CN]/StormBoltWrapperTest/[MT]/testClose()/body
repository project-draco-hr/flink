{
  final IRichBolt bolt=mock(IRichBolt.class);
  final StormOutputFieldsDeclarer declarer=new StormOutputFieldsDeclarer();
  declarer.declare(new Fields("dummy"));
  PowerMockito.whenNew(StormOutputFieldsDeclarer.class).withNoArguments().thenReturn(declarer);
  final StormBoltWrapper<Object,Object> wrapper=new StormBoltWrapper<Object,Object>(bolt);
  final StreamTaskContext<Object> taskContext=mock(StreamTaskContext.class);
  when(taskContext.getOutputCollector()).thenReturn(mock(Collector.class));
  wrapper.setup(taskContext);
  wrapper.close();
  verify(bolt).cleanup();
}
