{
  if (channels == null || channels.length != 1) {
    channels=new int[1];
  }
  int hash=this.comparator.hash(record);
  for (int i=0; i < this.salt.length; i++) {
    hash^=((hash << 5) + this.salt[i] + (hash >> 2));
  }
  this.channels[0]=(hash < 0) ? -hash % numberOfChannels : hash % numberOfChannels;
  return this.channels;
}
