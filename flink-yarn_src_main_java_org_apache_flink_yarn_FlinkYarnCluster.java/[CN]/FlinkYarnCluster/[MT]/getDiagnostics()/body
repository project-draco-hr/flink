{
  if (detached) {
    throw new IllegalArgumentException("The cluster has been started in detached mode." + "Can not request cluster status");
  }
  if (!hasFailed()) {
    LOG.warn("getDiagnostics() called for cluster which is not in failed state");
  }
  ApplicationReport lastReport=pollingRunner.getLastReport();
  if (lastReport == null) {
    LOG.warn("Last report is null");
    return null;
  }
 else {
    return lastReport.getDiagnostics();
  }
}
