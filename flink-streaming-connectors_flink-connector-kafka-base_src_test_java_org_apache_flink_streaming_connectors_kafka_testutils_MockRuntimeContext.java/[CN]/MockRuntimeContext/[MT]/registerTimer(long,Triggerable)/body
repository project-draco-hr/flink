{
  if (timer == null) {
    timer=Executors.newSingleThreadScheduledExecutor();
  }
  final long delay=Math.max(time - System.currentTimeMillis(),0);
  timer.schedule(new Runnable(){
    @Override public void run(){
synchronized (checkpointLock) {
        try {
          target.trigger(time);
        }
 catch (        Throwable t) {
          System.err.println("!!! Caught exception while processing timer. !!!");
          t.printStackTrace();
        }
      }
    }
  }
,delay,TimeUnit.MILLISECONDS);
}
