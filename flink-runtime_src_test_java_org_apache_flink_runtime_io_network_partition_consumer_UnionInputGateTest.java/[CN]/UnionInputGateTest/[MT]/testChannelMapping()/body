{
  final SingleInputGate ig1=new SingleInputGate(new IntermediateDataSetID(),0,3);
  final SingleInputGate ig2=new SingleInputGate(new IntermediateDataSetID(),0,5);
  final UnionInputGate union=new UnionInputGate(new SingleInputGate[]{ig1,ig2});
  assertEquals(ig1.getNumberOfInputChannels() + ig2.getNumberOfInputChannels(),union.getNumberOfInputChannels());
  final MockInputChannel[][] inputChannels=new MockInputChannel[][]{MockInputChannel.createInputChannels(ig1,3),MockInputChannel.createInputChannels(ig2,5)};
  inputChannels[0][0].readBuffer();
  inputChannels[1][2].readBuffer();
  inputChannels[1][0].readBuffer();
  inputChannels[1][1].readBuffer();
  inputChannels[0][1].readBuffer();
  inputChannels[1][3].readBuffer();
  inputChannels[0][2].readBuffer();
  inputChannels[1][4].readBuffer();
  assertEquals(0,union.getNextBufferOrEvent().getChannelIndex());
  assertEquals(5,union.getNextBufferOrEvent().getChannelIndex());
  assertEquals(3,union.getNextBufferOrEvent().getChannelIndex());
  assertEquals(4,union.getNextBufferOrEvent().getChannelIndex());
  assertEquals(1,union.getNextBufferOrEvent().getChannelIndex());
  assertEquals(6,union.getNextBufferOrEvent().getChannelIndex());
  assertEquals(2,union.getNextBufferOrEvent().getChannelIndex());
  assertEquals(7,union.getNextBufferOrEvent().getChannelIndex());
}
