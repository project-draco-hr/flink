{
  try {
    int returnCode=process.waitFor();
    pipeForwarder.join();
    if (returnCode != 0) {
      if (getErrorOutput().toString().contains("Error: Could not find or load main class " + entryPointClassName)) {
        throw new ClassNotFoundException("Error: Could not find or load main class " + entryPointClassName);
      }
    }
    return returnCode;
  }
 catch (  InterruptedException e) {
    try {
      Class<?> processClass=process.getClass();
      Method destroyForcibly=processClass.getMethod("destroyForcibly");
      destroyForcibly.setAccessible(true);
      destroyForcibly.invoke(process);
    }
 catch (    NoSuchMethodException ex) {
      process.destroy();
    }
    throw new InterruptedException("Interrupted while waiting for external process.");
  }
}
