{
  ConstantFields constantSet=udf.getUserCodeAnnotation(ConstantFields.class);
  ConstantFieldsExcept notConstantSet=udf.getUserCodeAnnotation(ConstantFieldsExcept.class);
  ReadFields readfieldSet=udf.getUserCodeAnnotation(ReadFields.class);
  Set<Annotation> result=null;
  if (notConstantSet != null && constantSet != null) {
    throw new RuntimeException("Either ConstantFields or ConstantFieldsExcept can be specified, not both.");
  }
  if (notConstantSet != null) {
    result=new HashSet<Annotation>();
    result.add(notConstantSet);
  }
  if (constantSet != null) {
    result=new HashSet<Annotation>();
    result.add(constantSet);
  }
  if (readfieldSet != null) {
    if (result == null) {
      result=new HashSet<Annotation>();
    }
    result.add(readfieldSet);
  }
  return result;
}
