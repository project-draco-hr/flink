{
  do {
    if (finishedReader1 && finishedReader2) {
      return 0;
    }
    if (endOfSuperstepReader1 && endOfSuperstepReader2) {
      endOfSuperstepReader1=false;
      endOfSuperstepReader2=false;
      return 0;
    }
    if (!finishedReader1 && !endOfSuperstepReader1) {
      if (reader1.next(target1)) {
        return 1;
      }
 else       if (reader1.isFinished()) {
        finishedReader1=true;
      }
 else       if (reader1.hasReachedEndOfSuperstep()) {
        endOfSuperstepReader1=true;
      }
 else {
        throw new IOException("Unexpected return value from reader.");
      }
    }
    if (!finishedReader2 && !endOfSuperstepReader2) {
      if (reader2.next(target2)) {
        return 2;
      }
 else       if (reader2.isFinished()) {
        finishedReader2=true;
      }
 else       if (reader2.hasReachedEndOfSuperstep()) {
        endOfSuperstepReader2=true;
      }
 else {
        throw new IOException("Unexpected return value from reader.");
      }
    }
  }
 while (true);
}
