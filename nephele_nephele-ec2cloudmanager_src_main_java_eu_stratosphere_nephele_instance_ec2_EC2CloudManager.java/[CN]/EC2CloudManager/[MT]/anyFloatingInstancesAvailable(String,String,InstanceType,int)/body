{
  LOG.info("Checking for up to " + count + " floating instance of type "+ type.getIdentifier());
  final LinkedList<FloatingInstance> foundfloatinginstances=new LinkedList<FloatingInstance>();
synchronized (this.floatingInstances) {
    final Iterator<Map.Entry<InstanceConnectionInfo,FloatingInstance>> it=this.floatingInstances.entrySet().iterator();
    while (it.hasNext()) {
      final FloatingInstance i=it.next().getValue();
      if (i.isFromThisOwner(awsAccessId,awsSecretKey)) {
        if (i.getType().equals(type)) {
          it.remove();
          foundfloatinginstances.add(i);
        }
      }
    }
  }
  LOG.info("Found " + foundfloatinginstances.size() + " suitable floating instances.");
  return foundfloatinginstances;
}
