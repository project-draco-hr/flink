{
  final AbstractInstance instance=allocatedResource.getInstance();
  JobToInstancesMapping jobToInstanceMapping=null;
synchronized (this.jobToInstancesAssignmentMap) {
    jobToInstanceMapping=this.jobToInstancesAssignmentMap.get(jobID);
    if (jobToInstanceMapping == null) {
      LOG.error("No mapping for job " + jobID);
      return;
    }
  }
  try {
    instance.destroyProxies();
  }
 catch (  IOException ioe) {
    if (LOG.isDebugEnabled()) {
      LOG.debug(StringUtils.stringifyException(ioe));
    }
  }
  if (jobToInstanceMapping.unassignInstanceFromJob(instance)) {
    this.floatingInstances.put(instance.getInstanceConnectionInfo(),((EC2CloudInstance)instance).asFloatingInstance());
    LOG.info("Converting " + ((EC2CloudInstance)instance).getInstanceID() + " from allocated instance to floating instance");
  }
 else {
    LOG.error("Job " + jobID + " contains no such instance");
    return;
  }
}
