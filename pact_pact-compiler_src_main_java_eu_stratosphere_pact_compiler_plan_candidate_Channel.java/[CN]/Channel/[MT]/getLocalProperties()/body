{
  if (this.localProps == null) {
    this.localProps=getLocalPropertiesAfterShippingOnly().clone();
switch (this.localStrategy) {
case NONE:
      break;
case SORT:
    Ordering o=new Ordering();
  for (int i=0; i < this.localKeys.size(); i++) {
    o.appendOrdering(this.localKeys.get(i),null,this.localSortOrder == null || this.localSortOrder[i] ? Order.ASCENDING : Order.DESCENDING);
  }
this.localProps.setOrdering(o);
this.localProps.setGroupedFields(o.getInvolvedIndexes());
break;
default :
throw new CompilerException("Unsupported local strategy for channel.");
}
}
return this.localProps;
}
