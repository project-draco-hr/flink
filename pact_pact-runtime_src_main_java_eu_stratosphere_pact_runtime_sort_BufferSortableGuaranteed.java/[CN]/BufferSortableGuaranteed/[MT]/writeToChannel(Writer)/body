{
  if (!isBound()) {
    new UnboundMemoryBackedException();
  }
  final MemoryIOWrapper memoryWrapper=new MemoryIOWrapper(this.memory);
  for (int i=0; i < size(); i++) {
    int offsetPosition=readOffsetPosition(i);
    int kvstart=readPairOffset(offsetPosition);
    int kvend=0;
    if (offsetPosition - STACK_ENTRY_SIZE > this.outputView.getStackEndRel()) {
      kvend=readPairOffset(offsetPosition - STACK_ENTRY_SIZE);
    }
 else {
      kvend=this.position;
    }
    final int kvlength=kvend - kvstart;
    memoryWrapper.setIOBlock(kvstart,kvlength);
    writer.write(memoryWrapper);
  }
}
