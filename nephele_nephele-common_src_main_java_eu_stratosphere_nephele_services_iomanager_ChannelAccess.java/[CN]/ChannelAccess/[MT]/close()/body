{
  final ArrayList<MemorySegment> segments=new ArrayList<MemorySegment>(this.numBuffers);
  try {
    while (segments.size() < this.numBuffers) {
      final T buffer=this.returnBuffers.take();
      segments.add(buffer.dispose());
      checkErroneous();
    }
  }
 catch (  InterruptedException iex) {
    throw new IOException("The channel closing was interrupted. " + "Its not guaranteed that all buffers have been properly written.");
  }
  return segments;
}
