{
  try {
    if (ex != null && this.exception == null) {
      this.exception=ex;
      this.resultHander.requestFailed(buffer,ex);
    }
 else {
      this.resultHander.requestSuccessful(buffer);
    }
  }
  finally {
    if (this.closed) {
synchronized (this.closeLock) {
        int num=this.requestsNotReturned.decrementAndGet();
        if (num == 0) {
          this.closeLock.notifyAll();
        }
      }
    }
 else {
      this.requestsNotReturned.decrementAndGet();
    }
  }
}
