{
  if (types == null || types.size() < 1) {
    throw new IllegalArgumentException("No instance type found.");
  }
  long minMemory=0;
  int minCPUCores=Integer.MAX_VALUE;
  InstanceTypeDescription retValue=null;
  final Iterator<InstanceTypeDescription> it=types.values().iterator();
  while (it.hasNext()) {
    final InstanceTypeDescription descr=it.next();
    if (retValue == null) {
      retValue=descr;
    }
    if (descr.getInstanceType().getNumberOfCores() < minCPUCores && descr.getHardwareDescription().getSizeOfFreeMemory() > minMemory) {
      minCPUCores=descr.getInstanceType().getNumberOfCores();
      minMemory=descr.getHardwareDescription().getSizeOfFreeMemory();
    }
  }
  return retValue;
}
