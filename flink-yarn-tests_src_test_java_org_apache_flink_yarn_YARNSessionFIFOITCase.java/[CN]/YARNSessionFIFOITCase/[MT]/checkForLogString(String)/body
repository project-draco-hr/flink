{
  if (testAppender == null) {
    throw new NullPointerException("Initialize it first");
  }
  for (  LoggingEvent event : testAppender.events) {
    if (event.getMessage().toString().contains(expected)) {
      LOG.info("Found expected string '" + expected + "' in log message "+ event);
      return;
    }
  }
  Assert.fail("Unable to find expected string '" + expected + "' in log messages");
}
