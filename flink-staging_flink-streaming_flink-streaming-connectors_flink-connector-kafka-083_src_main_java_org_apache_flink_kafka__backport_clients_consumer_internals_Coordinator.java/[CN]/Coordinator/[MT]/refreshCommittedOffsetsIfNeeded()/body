{
  if (subscriptions.refreshCommitsNeeded()) {
    Map<TopicPartition,Long> offsets=fetchCommittedOffsets(subscriptions.assignedPartitions());
    for (    Map.Entry<TopicPartition,Long> entry : offsets.entrySet()) {
      TopicPartition tp=entry.getKey();
      this.subscriptions.committed(tp,entry.getValue());
    }
    this.subscriptions.commitsRefreshed();
  }
}
