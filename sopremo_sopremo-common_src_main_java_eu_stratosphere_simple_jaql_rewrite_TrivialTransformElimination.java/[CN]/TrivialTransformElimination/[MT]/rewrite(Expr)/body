{
  TransformExpr te=(TransformExpr)expr;
  expr=te.projection();
  if (expr instanceof VarExpr) {
    VarExpr ve=(VarExpr)expr;
    BindingExpr b=te.binding();
    if (ve.var() == te.binding().var) {
      Expr e=b.inExpr();
      Schema s=e.getSchema();
      if (s.is(ARRAY).maybeNot()) {
        if (s.is(ARRAY,NULL).maybeNot()) {
          e=new AsArrayFn(e);
        }
 else         if (s.is(NULL).always()) {
          e=new ArrayExpr();
        }
 else {
          e=new EmptyOnNullFn(e);
        }
      }
      te.replaceInParent(e);
      return true;
    }
  }
  return false;
}
