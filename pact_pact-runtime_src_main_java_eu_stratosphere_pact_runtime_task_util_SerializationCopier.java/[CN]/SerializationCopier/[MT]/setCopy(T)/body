{
  try {
    copy.write(dos);
    dos.flush();
    baos.flush();
  }
 catch (  IOException e) {
    LOG.error(e);
  }
  if (baos.size() <= serializedCopy.length) {
    System.arraycopy(baos.toByteArray(),0,serializedCopy,0,baos.size());
  }
 else {
    serializedCopy=new byte[baos.size() * 2];
    System.arraycopy(baos.toByteArray(),0,serializedCopy,0,baos.size());
    bais=new ByteArrayInputStream(serializedCopy);
    dis=new DataInputStream(bais);
  }
  baos.reset();
}
