{
  if (this.channel.isWritable() && !this.queuedEnvelopes.isEmpty()) {
    Envelope nextEnvelope=this.queuedEnvelopes.pollFirst();
    this.numQueuedEnvelopes.decrementAndGet();
    this.channel.writeAndFlush(nextEnvelope).addListener(this);
  }
}
