{
  if (!this.canceled.compareAndSet(false,true)) {
    return;
  }
  if (this.executionState != ExecutionState.RUNNING && this.executionState != ExecutionState.FINISHING) {
    return;
  }
  executionStateChanged(ExecutionState.CANCELING,null);
  try {
    this.environment.cancelExecution();
  }
 catch (  Throwable e) {
    LOG.error("Error while cancelling the task.",e);
  }
}
