{
  int nextCompressionLevel=this.currentSelection;
  final double diff=currentDataRate - this.lastDataRate;
  final boolean diffIsPositive=(diff > 0);
  final boolean diffWithinBounds=Math.abs(diff) < (DELTA * this.lastDataRate);
  System.out.println("++++++ " + (++count) + ". decision ("+ (this.increasedCompressionLevel ? "up" : "down")+ ") current compression level: "+ this.currentSelection+ " ++++");
  System.out.println("Current data rate: " + currentDataRate + "("+ this.sumOfBufferSizes+ " / "+ this.sumOfTransferDurations+ ")");
  if (diffWithinBounds) {
    System.out.println("No change: " + diff);
    if (this.bufferCount >= (int)(Math.pow(2.0f,this.backoff[this.currentSelection]) * GRANULARITY)) {
      System.out.println("Buffer count is " + this.bufferCount + ", current selection "+ this.currentSelection+ ", backoff: "+ this.backoff[this.currentSelection]);
      if (this.currentSelection == 0) {
        this.increasedCompressionLevel=true;
      }
      if (this.currentSelection == this.numberOfAvailableCompressionLibraries - 1) {
        this.increasedCompressionLevel=false;
      }
      if (this.increasedCompressionLevel) {
        ++nextCompressionLevel;
      }
 else {
        --nextCompressionLevel;
      }
      this.bufferCount=0;
    }
 else {
      System.out.println("Backoff: buffer count is " + this.bufferCount);
    }
  }
 else {
    if (diffIsPositive) {
      System.out.println("Improvement: " + diff);
      this.backoff[nextCompressionLevel]++;
    }
 else {
      System.out.println("Degradation: " + diff);
      this.backoff[nextCompressionLevel]=0;
      if (this.increasedCompressionLevel) {
        --nextCompressionLevel;
      }
 else {
        ++nextCompressionLevel;
      }
    }
    this.bufferCount=0;
  }
  if (nextCompressionLevel < 0) {
    nextCompressionLevel=0;
  }
 else   if (nextCompressionLevel == numberOfAvailableCompressionLibraries) {
    nextCompressionLevel=this.numberOfAvailableCompressionLibraries - 1;
  }
  return nextCompressionLevel;
}
