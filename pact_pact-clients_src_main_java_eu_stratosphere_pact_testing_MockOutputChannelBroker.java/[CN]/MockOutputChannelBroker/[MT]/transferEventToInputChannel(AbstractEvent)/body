{
  if (this.outgoingTransferEnvelope != null)   this.outgoingTransferEnvelope.addEvent(event);
 else {
    final TransferEnvelope ephemeralTransferEnvelope=this.newEnvelope();
    ephemeralTransferEnvelope.addEvent(event);
    if (this.queuedOutgoingEnvelopes.isEmpty())     this.routingService.routeEnvelopeFromOutputChannel(ephemeralTransferEnvelope);
 else {
      this.queuedOutgoingEnvelopes.add(ephemeralTransferEnvelope);
      this.flushQueuedOutgoingEnvelopes();
    }
  }
}
