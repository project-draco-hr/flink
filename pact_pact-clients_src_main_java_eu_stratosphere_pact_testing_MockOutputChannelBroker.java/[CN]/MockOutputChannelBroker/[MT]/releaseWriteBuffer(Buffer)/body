{
  buffer.finishWritePhase();
  this.outgoingTransferEnvelope.setBuffer(buffer);
  if (this.queuedOutgoingEnvelopes.isEmpty())   this.routingService.routeEnvelopeFromOutputChannel(this.outgoingTransferEnvelope);
 else {
    this.queuedOutgoingEnvelopes.add(this.outgoingTransferEnvelope);
    this.flushQueuedOutgoingEnvelopes();
  }
  this.outgoingTransferEnvelope=null;
}
