{
  Configuration conf=new Configuration();
  conf.setString("mykey","myvalue");
  conf.setBoolean("shouldbetrue",true);
  conf.setInteger("mynumber",100);
  conf.setClass("myclass",this.getClass());
  ByteArrayOutputStream bo=new ByteArrayOutputStream();
  DataOutputStream dos=new DataOutputStream(bo);
  try {
    conf.write(dos);
    dos.close();
    byte[] bytes=bo.toByteArray();
    bo.close();
    ByteArrayInputStream bi=new ByteArrayInputStream(bytes);
    DataInputStream di=new DataInputStream(bi);
    Configuration conf2=new Configuration();
    conf2.read(di);
    assertEquals(conf2.getString("mykey","null"),"myvalue");
    assertEquals(conf2.getBoolean("shouldbetrue",false),true);
    assertEquals(conf2.getInteger("mynumber",0),100);
    assertEquals(conf2.getClass("myclass",null).toString(),this.getClass().toString());
    assertTrue(conf.equals(conf2));
    assertTrue(conf.keySet().equals(conf2.keySet()));
  }
 catch (  IOException e) {
    fail(e.getMessage());
  }
}
