{
  checkpoints.addLast(checkpoint);
  if (checkpoints.size() > 1) {
    checkpoints.removeFirst().discardState();
  }
}
