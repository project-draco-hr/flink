{
  LOG.debug("Unregistering task {} ({}) from network environment (state: {}).",task.getTaskNameWithSubtasks(),task.getExecutionState());
  final ExecutionAttemptID executionId=task.getExecutionId();
  if (task.isCanceledOrFailed()) {
    partitionManager.failIntermediateResultPartitions(executionId);
  }
  taskEventDispatcher.unregisterWriters(executionId);
  final SingleInputGate[] inputGates=task.getInputGates();
  if (inputGates != null) {
    for (    SingleInputGate gate : inputGates) {
      try {
        if (gate != null) {
          gate.releaseAllResources();
        }
      }
 catch (      IOException e) {
        LOG.error("Error during release of reader resources: " + e.getMessage(),e);
      }
    }
  }
}
