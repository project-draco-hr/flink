{
  final EphemeralCheckpoint fileEC=EphemeralCheckpoint.forFileChannel(this.checkpointManager,VERTEX_ID);
  final Set<ChannelID> testChannelIDs=new HashSet<ChannelID>();
  for (int i=0; i < 10; i++) {
    testChannelIDs.add(new ChannelID());
  }
  final Iterator<ChannelID> it=testChannelIDs.iterator();
  while (it.hasNext()) {
    fileEC.registerOutputChannel(it.next(),null);
  }
  assertFalse(fileEC.isFinished());
  final ChannelID[] registeredOutputChanelIDs=fileEC.getIDsOfCheckpointedOutputChannels();
  for (int i=0; i < 10; i++) {
    fileEC.markChannelAsFinished(registeredOutputChanelIDs[i]);
  }
  assertTrue(fileEC.isFinished());
}
