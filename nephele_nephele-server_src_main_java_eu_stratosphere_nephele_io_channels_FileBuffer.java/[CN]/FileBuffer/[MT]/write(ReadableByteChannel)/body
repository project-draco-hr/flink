{
  if (!this.writeMode.get()) {
    throw new IOException("Cannot write to buffer, buffer already switched to read mode");
  }
  if (this.totalBytesWritten >= this.bufferSize) {
    return 0;
  }
  final long bytesWritten=this.fileChannel.transferFrom(readableByteChannel,(this.offset + this.totalBytesWritten),(this.bufferSize - this.totalBytesWritten));
  this.totalBytesWritten+=bytesWritten;
  return (int)bytesWritten;
}
