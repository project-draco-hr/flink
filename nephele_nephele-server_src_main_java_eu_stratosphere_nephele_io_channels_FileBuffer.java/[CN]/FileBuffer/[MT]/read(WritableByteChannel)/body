{
  if (this.writeMode) {
    throw new IOException("FileBuffer is still in write mode!");
  }
  if (this.fileChannel == null) {
    try {
      this.fileChannel=this.fileBufferManager.getFileChannelForReading(this.gateID,this.fileID);
      if (this.fileChannel == null) {
        return 0;
      }
    }
 catch (    InterruptedException e) {
      return -1;
    }
    if (this.fileChannel.position() != (this.offset + this.totalBytesRead)) {
      this.fileChannel.position(this.offset + this.totalBytesRead);
    }
  }
  if (this.totalBytesRead >= this.bufferSize) {
    return -1;
  }
  final long bytesRead=this.fileChannel.transferTo(this.offset + this.totalBytesRead,this.bufferSize - this.totalBytesRead,writableByteChannel);
  this.totalBytesRead+=bytesRead;
  return (int)bytesRead;
}
