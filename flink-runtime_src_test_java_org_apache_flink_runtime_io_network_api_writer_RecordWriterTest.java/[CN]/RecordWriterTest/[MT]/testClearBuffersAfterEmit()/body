{
  final Buffer buffer=TestBufferFactory.createBuffer(32);
  BufferProvider bufferProvider=createBufferProvider(buffer);
  ResultPartitionWriter partitionWriter=createResultPartitionWriter(bufferProvider);
  RecordWriter<IntValue> recordWriter=new RecordWriter<IntValue>(partitionWriter);
  recordWriter.emit(new IntValue(0));
  verify(bufferProvider,times(1)).requestBufferBlocking();
  verify(partitionWriter,never()).writeBuffer(any(Buffer.class),anyInt());
  recordWriter.clearBuffers();
  assertTrue("Buffer not recycled.",buffer.isRecycled());
}
