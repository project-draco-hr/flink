{
  if (System.getenv("IN_TESTS") != null) {
    try {
      conf.addResource(new File(System.getenv("YARN_CONF_DIR") + "/yarn-site.xml").toURI().toURL());
    }
 catch (    Throwable t) {
      throw new RuntimeException("Error",t);
    }
  }
  this.configurationDirectory=CliFrontend.getConfigurationDirectoryFromEnv();
  GlobalConfiguration.loadConfiguration(configurationDirectory);
  this.flinkConfiguration=GlobalConfiguration.getConfiguration();
  File confFile=new File(configurationDirectory + File.separator + CONFIG_FILE_NAME);
  if (!confFile.exists()) {
    throw new RuntimeException("Unable to locate configuration file in " + confFile);
  }
  flinkConfigurationPath=new Path(confFile.getAbsolutePath());
  if (configurationDirectory.length() > 0) {
    File logback=new File(configurationDirectory + File.pathSeparator + CONFIG_FILE_LOGBACK_NAME);
    if (logback.exists()) {
      shipFiles.add(logback);
      flinkLoggingConfigurationPath=new Path(logback.toURI());
    }
    File log4j=new File(configurationDirectory + File.pathSeparator + CONFIG_FILE_LOG4J_NAME);
    if (log4j.exists()) {
      shipFiles.add(log4j);
      if (flinkLoggingConfigurationPath != null) {
        LOG.warn("The configuration directory ('" + configurationDirectory + "') contains both LOG4J and "+ "Logback configuration files. Please delete or rename one of them.");
      }
      flinkLoggingConfigurationPath=new Path(log4j.toURI());
    }
  }
}
