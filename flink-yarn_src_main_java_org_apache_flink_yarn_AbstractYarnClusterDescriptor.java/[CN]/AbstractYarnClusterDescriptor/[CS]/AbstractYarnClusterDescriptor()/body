{
  if (System.getenv("IN_TESTS") != null) {
    try {
      conf.addResource(new File(System.getenv("YARN_CONF_DIR") + "/yarn-site.xml").toURI().toURL());
    }
 catch (    Throwable t) {
      throw new RuntimeException("Error",t);
    }
  }
  try {
    this.configurationDirectory=CliFrontend.getConfigurationDirectoryFromEnv();
    GlobalConfiguration.loadConfiguration(configurationDirectory);
    this.flinkConfiguration=GlobalConfiguration.getConfiguration();
    File confFile=new File(configurationDirectory + File.separator + CONFIG_FILE_NAME);
    if (!confFile.exists()) {
      throw new RuntimeException("Unable to locate configuration file in " + confFile);
    }
    flinkConfigurationPath=new Path(confFile.getAbsolutePath());
  }
 catch (  Exception e) {
    LOG.debug("Config couldn't be loaded from environment variable.");
  }
}
