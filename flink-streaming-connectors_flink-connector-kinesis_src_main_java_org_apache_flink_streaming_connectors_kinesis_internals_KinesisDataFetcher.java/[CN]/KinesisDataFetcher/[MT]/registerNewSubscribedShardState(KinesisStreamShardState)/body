{
synchronized (checkpointLock) {
    subscribedShardsState.add(newSubscribedShardState);
    return subscribedShardsState.size() - 1;
  }
}
