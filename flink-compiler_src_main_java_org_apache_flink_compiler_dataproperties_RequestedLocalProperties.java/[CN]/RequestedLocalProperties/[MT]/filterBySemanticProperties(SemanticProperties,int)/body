{
  FieldList sourceList;
  RequestedLocalProperties returnProps=this;
  if (props == null) {
    return null;
  }
  if (this.ordering != null) {
    Ordering no=new Ordering();
    returnProps=this.clone();
    for (int index=0; index < this.ordering.getInvolvedIndexes().size(); index++) {
      int value=this.ordering.getInvolvedIndexes().get(index);
      sourceList=props.getSourceField(input,value) == null ? null : props.getSourceField(input,value).toFieldList();
      if (sourceList != null) {
        no.appendOrdering(sourceList.get(0),this.ordering.getType(index),this.ordering.getOrder(index));
      }
 else {
        return null;
      }
    }
    returnProps.setOrdering(no);
  }
 else   if (this.groupedFields != null) {
    returnProps=this.clone();
    returnProps.setGroupedFields(new FieldList());
    for (    Integer index : this.groupedFields) {
      sourceList=props.getSourceField(input,index) == null ? null : props.getSourceField(input,index).toFieldList();
      if (sourceList != null) {
        returnProps.setGroupedFields(returnProps.getGroupedFields().addFields(sourceList));
      }
 else {
        return null;
      }
    }
  }
  return returnProps;
}
