{
  if (toDuplicate.referenceCounter.getAndIncrement() == 0) {
    throw new IllegalStateException("Buffer was released before duplication.");
  }
  this.memorySegment=toDuplicate.memorySegment;
  this.size=toDuplicate.size;
  this.recycler=toDuplicate.recycler;
  this.referenceCounter=toDuplicate.referenceCounter;
}
