{
  if (this.compressionBufferLocked) {
    throw new IllegalStateException("Compression buffer is already locked");
  }
  if (this.compressionBuffer == null) {
    this.compressionBuffer=this.bufferProvider.requestEmptyBufferBlocking(this.bufferProvider.getMaximumBufferSize());
  }
  this.compressionBufferLocked=true;
  return this.compressionBuffer;
}
