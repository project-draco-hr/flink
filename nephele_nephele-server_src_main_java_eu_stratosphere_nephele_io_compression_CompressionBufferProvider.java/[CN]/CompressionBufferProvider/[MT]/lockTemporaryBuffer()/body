{
  if (this.temporaryBuffer == null) {
    throw new IllegalStateException("No temporary buffer allocated, so it cannot be locked");
  }
  if (this.temporaryBufferLocked) {
    throw new IllegalStateException("Temporary buffer is already locked");
  }
  this.temporaryBufferLocked=true;
  return this.temporaryBuffer;
}
