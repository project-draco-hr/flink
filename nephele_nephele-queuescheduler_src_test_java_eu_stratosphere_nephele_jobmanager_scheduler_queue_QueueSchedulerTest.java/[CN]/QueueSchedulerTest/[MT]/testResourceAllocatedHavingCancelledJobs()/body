{
  final DeploymentManager deploymentManager=new TestDeploymentManager();
  final QueueScheduler toTest=spy(new QueueScheduler(deploymentManager,this.instanceManager));
  final JobID jobid=new JobID();
  final AllocatedResource resource=mock(AllocatedResource.class);
  final List<AllocatedResource> resources=new ArrayList<AllocatedResource>();
  resources.add(resource);
  final InstanceType instanceType=new InstanceType();
  InstanceConnectionInfo instanceConnectionInfo=mock(InstanceConnectionInfo.class);
  when(instanceConnectionInfo.toString()).thenReturn("");
  LocalInstance instance=spy(new LocalInstance(instanceType,instanceConnectionInfo,null,null,null));
  final Method methodToMock=MemberMatcher.method(QueueScheduler.class,JobID.class);
  PowerMockito.when(toTest,methodToMock).withArguments(Matchers.any(JobID.class)).thenReturn(null);
  when(resource.getInstance()).thenReturn(instance);
  toTest.resourcesAllocated(jobid,resources);
  try {
    verify(this.instanceManager).releaseAllocatedResource(Matchers.any(JobID.class),Matchers.any(Configuration.class),Matchers.any(AllocatedResource.class));
  }
 catch (  InstanceException e1) {
    e1.printStackTrace();
  }
}
