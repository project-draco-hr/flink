{
  SimpleNode in=new SimpleNode("in");
  SimpleNode a=new SimpleNode("a",in);
  SimpleNode b=new SimpleNode("b",in);
  SimpleNode out=new SimpleNode("out",a,b);
  SimpleNode in2=new SimpleNode("in2");
  in2.outgoings.add(b);
  Graph<SimpleNode> graph=new Graph<SimpleNode>(new SimpleNodeModifier(),in,in2);
  SimpleNode replacement=new SimpleNode("replaced");
  graph.replace(out,replacement,false);
  ArrayList<SimpleNode> retrievedNodes=new ArrayList<SimpleNode>();
  for (  Graph<SimpleNode>.NodePath nodePath : graph)   retrievedNodes.add(nodePath.getNode());
  List<SimpleNode> expected=Arrays.asList(in,a,replacement,b,replacement,in2,b,replacement);
  Assert.assertEquals(expected,retrievedNodes);
}
