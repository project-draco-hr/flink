{
  try {
    LocalInstanceManager li=new LocalInstanceManager(2);
    try {
      TaskManager[] tms=li.getTaskManagers();
      assertEquals(2,tms.length);
      for (      TaskManager tm : tms) {
        assertEquals(ExecutionMode.CLUSTER,tm.getExecutionMode());
        assertTrue(tm.getConnectionInfo().address().isLoopbackAddress());
      }
    }
  finally {
      li.shutdown();
      TaskManager[] tms=li.getTaskManagers();
      assertEquals(0,tms.length);
    }
  }
 catch (  Exception e) {
    e.printStackTrace();
    fail(e.getMessage());
  }
}
