{
  final String myString="my key|my val$$$my key2\n$$ctd.$$|my value2";
  final FileInputSplit split=createTempFile(myString);
  final Configuration parameters=new Configuration();
  parameters.setString(FileInputFormat.FILE_PARAMETER_KEY,"file:///some/file/that/will/not/be/read");
  parameters.setString(DelimitedInputFormat.RECORD_DELIMITER,"$$$");
  format.configure(parameters);
  format.open(split);
  PactRecord theRecord=new PactRecord();
  assertTrue(format.nextRecord(theRecord));
  assertEquals("my key",theRecord.getField(0,PactString.class).getValue());
  assertEquals("my val",theRecord.getField(1,PactString.class).getValue());
  assertTrue(format.nextRecord(theRecord));
  assertEquals("my key2\n$$ctd.$$",theRecord.getField(0,PactString.class).getValue());
  assertEquals("my value2",theRecord.getField(1,PactString.class).getValue());
  assertFalse(format.nextRecord(theRecord));
  assertTrue(format.reachedEnd());
}
