{
  acquire();
  try {
    Map<TopicPartition,Long> allConsumed=new HashMap<TopicPartition,Long>(this.subscriptions.allConsumed());
    commit(allConsumed,commitType,callback);
  }
  finally {
    release();
  }
}
