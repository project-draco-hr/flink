{
  if (node == null) {
    throw new NullPointerException();
  }
  if (node.isMissing()) {
    return this.remove(index);
  }
  if (index < 0 || index >= this.size()) {
    if (index == this.size()) {
      this.add(node);
      return MissingNode.getInstance();
    }
 else {
      throw new IndexOutOfBoundsException();
    }
  }
  int pactRecordPosition=this.schema.getTailSize() - size() + index;
  if (pactRecordPosition < 0) {
    return this.getOtherField().set(index,node);
  }
 else {
    IJsonNode oldNode=SopremoUtil.unwrap(this.record.getField(pactRecordPosition + 1,JsonNodeWrapper.class));
    this.record.setField(pactRecordPosition + 1,node);
    return oldNode;
  }
}
