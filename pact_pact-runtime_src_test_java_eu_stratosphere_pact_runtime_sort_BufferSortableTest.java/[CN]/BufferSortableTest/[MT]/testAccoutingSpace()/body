{
  MemorySegment memory=memoryManager.allocate(new DummyInvokable(),MEMORY_SIZE);
{
    TestData.Generator generator=new TestData.Generator(SEED,KEY_MAX,VALUE_LENGTH,KeyMode.SORTED,ValueMode.FIX_LENGTH);
    BufferSortable<TestData.Key,TestData.Value> buffer=newSortBuffer(memory,0.001f);
    int writtenBytes=0;
    KeyValuePair<TestData.Key,TestData.Value> pair=generator.next();
    while (buffer.write(pair)) {
      writtenBytes+=generator.sizeOf(pair) + Integer.SIZE / 8;
      pair=generator.next();
    }
    LOG.debug("Occupied " + writtenBytes + " of "+ MEMORY_SIZE+ " bytes.");
    memory=buffer.unbind();
  }
  memoryManager.release(memory);
}
