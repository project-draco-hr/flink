{
  final FlinkYarnSessionCli cli=new FlinkYarnSessionCli("","",true);
  String confDirPath=CliFrontend.getConfigurationDirectoryFromEnv();
  GlobalConfiguration.loadConfiguration(confDirPath);
  Configuration flinkConfiguration=GlobalConfiguration.loadConfiguration();
  flinkConfiguration.setString(ConfigConstants.FLINK_BASE_DIR_PATH_KEY,confDirPath);
  try {
    SecurityContext.install(new SecurityContext.SecurityConfiguration().setFlinkConfiguration(flinkConfiguration));
    int retCode=SecurityContext.getInstalled().runSecured(new SecurityContext.FlinkSecuredRunner<Integer>(){
      @Override public Integer run(){
        return cli.run(args);
      }
    }
);
    System.exit(retCode);
  }
 catch (  Exception e) {
    e.printStackTrace();
    LOG.error("Exception Occured. Reason: {}",e);
    return;
  }
}
