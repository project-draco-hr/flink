{
  ServerSocket portOccupier=null;
  final int portNum;
  try {
    portNum=NetUtils.getAvailablePort();
    portOccupier=new ServerSocket(portNum,10,InetAddress.getByName("localhost"));
  }
 catch (  Throwable t) {
    return;
  }
  try {
    Tuple2<String,Object> connection=new Tuple2<String,Object>("localhost",portNum);
    JobManager.runJobManager(new Configuration(),ExecutionMode.CLUSTER(),new Some<Tuple2<String,Object>>(connection));
    fail("this should throw an exception");
  }
 catch (  Exception e) {
    if (!e.getMessage().contains("Address already in use")) {
      e.printStackTrace();
      fail("Received wrong exception");
    }
  }
 finally {
    try {
      portOccupier.close();
    }
 catch (    Throwable t) {
    }
  }
}
