{
  ServerSocket portOccupier=null;
  final int portNum;
  try {
    portNum=NetUtils.getAvailablePort();
    portOccupier=new ServerSocket(portNum);
  }
 catch (  Throwable t) {
    return;
  }
  try {
    Tuple2<String,Object> connection=new Tuple2<String,Object>("localhost",portNum);
    JobManager.runJobManager(new Configuration(),ExecutionMode.CLUSTER(),new Some<Tuple2<String,Object>>(connection));
    fail("this should throw an exception");
  }
 catch (  Exception e) {
    assertTrue(e.getMessage().contains("Address already in use"));
  }
 finally {
    try {
      portOccupier.close();
    }
 catch (    Throwable t) {
    }
  }
}
