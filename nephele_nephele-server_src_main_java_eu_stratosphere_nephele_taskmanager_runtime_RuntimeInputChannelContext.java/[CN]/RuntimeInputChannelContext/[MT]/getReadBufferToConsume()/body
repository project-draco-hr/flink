{
  TransferEnvelope transferEnvelope=null;
synchronized (this.queuedEnvelopes) {
    if (this.queuedEnvelopes.isEmpty()) {
      return null;
    }
    transferEnvelope=this.queuedEnvelopes.peek();
    if (transferEnvelope.getBuffer() == null) {
      this.queuedEnvelopes.poll();
    }
  }
  if (transferEnvelope.getBuffer() == null) {
    final EventList eventList=transferEnvelope.getEventList();
    if (eventList != null) {
      if (!eventList.isEmpty()) {
        final Iterator<AbstractEvent> it=eventList.iterator();
        while (it.hasNext()) {
          this.byteBufferedInputChannel.processEvent(it.next());
        }
      }
    }
    this.byteBufferedInputChannel.notifyDataUnitConsumed();
    return null;
  }
  return transferEnvelope.getBuffer();
}
