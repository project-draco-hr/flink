{
  final MapContract<Key,Value,Key,Value> map=new MapContract<Key,Value,Key,Value>(IdentityMap.class,"Map");
  TestPlan testPlan=new TestPlan(map);
  testPlan.getInput().add(new PactInteger(1),new PactString("test1")).add(new PactInteger(2),new PactString("test2"));
  testPlan.run();
  assertEquals("input and output should be equal in identity map",testPlan.getInput(),testPlan.getActualOutput());
  Iterator<KeyValuePair<Key,Value>> outputIterator=testPlan.getActualOutput().iterator();
  Iterator<KeyValuePair<Key,Value>> inputIterator=testPlan.getInput().iterator();
  for (int index=0; index < 2; index++) {
    assertTrue("too few actual output values",outputIterator.hasNext());
    assertTrue("too few input values",outputIterator.hasNext());
    try {
      assertEquals(inputIterator.next(),outputIterator.next());
    }
 catch (    AssertionFailedError e) {
      throw new ArrayComparisonFailure("Could not verify output values",e,index);
    }
  }
  assertFalse("too few actual output values",outputIterator.hasNext());
  assertFalse("too few input values",outputIterator.hasNext());
}
