{
  if (!this.checkpointFinished) {
    throw new IOException("Checkpoint is not finished!");
  }
  if (this.fileChannel.isOpen()) {
    throw new IOException("File channel is still open!");
  }
  final String filename=getFilename();
  byteBufferedChannelManager.getFileBufferManager().registerExternalDataSourceForChannel(this.sourceChannelID,filename);
  final FileInputStream fis=new FileInputStream(filename);
  this.fileChannel=fis.getChannel();
  final IncomingConnection incomingConnection=byteBufferedChannelManager.registerIncomingConnectionFromCheckpoint();
  try {
    while (true) {
      incomingConnection.read(this.fileChannel);
    }
  }
 catch (  EOFException e) {
  }
  this.fileChannel.close();
}
