{
  if (!this.checkpointFinished) {
    LOG.error("Checkpoint is not finished!");
  }
  if (this.fileChannel.isOpen()) {
    LOG.error("File channel is still open!");
  }
  final String filename=getFilename();
  FileInputStream fis=null;
  try {
    fis=new FileInputStream(filename);
  }
 catch (  IOException ioe) {
    LOG.error(ioe);
    return;
  }
  try {
    fileBufferManager.registerExternalDataSourceForChannel(this.sourceChannelID,filename);
  }
 catch (  IOException ioe) {
    LOG.error(ioe);
  }
  this.fileChannel=fis.getChannel();
}
