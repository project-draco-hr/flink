{
  if (this.spillingQueueAlreadyFlushed) {
    return;
  }
  if (!this.queuedOutgoingEnvelopes.isEmpty()) {
    this.queuedOutgoingEnvelopes.spillSynchronouslyIncludingHead();
    this.queuedOutgoingEnvelopes.printSpillingState();
    if (!this.outputGateContext.registerSpillingQueueWithNetworkConnection(this.byteBufferedOutputChannel.getID(),this.queuedOutgoingEnvelopes)) {
      this.queuedOutgoingEnvelopes.disableAsynchronousUnspilling();
      while (!this.queuedOutgoingEnvelopes.isEmpty()) {
        this.outputGateContext.processEnvelope(this,this.queuedOutgoingEnvelopes.poll());
      }
    }
  }
  this.spillingQueueAlreadyFlushed=true;
}
