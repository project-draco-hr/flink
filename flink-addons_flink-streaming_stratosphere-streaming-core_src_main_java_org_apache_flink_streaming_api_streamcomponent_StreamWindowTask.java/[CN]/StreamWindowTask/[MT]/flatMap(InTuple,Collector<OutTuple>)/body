{
  long progress=(Long)value.getField(windowFieldId);
  if (initTimestamp == -1) {
    initTimestamp=progress;
    nextTimestamp=initTimestamp + computeGranularity;
    tempTupleArray=new ArrayList<InTuple>();
  }
 else {
    if (progress > nextTimestamp) {
      if (window.isFull()) {
        ArrayList<InTuple> expiredTupleArray=window.popFront();
        incrementCompute(tempTupleArray);
        decrementCompute(expiredTupleArray);
        window.pushBack(tempTupleArray);
        if (window.isEmittable()) {
          produceOutput(progress,out);
        }
      }
 else {
        incrementCompute(tempTupleArray);
        window.pushBack(tempTupleArray);
        if (window.isFull()) {
          produceOutput(progress,out);
        }
      }
      initTimestamp=nextTimestamp;
      nextTimestamp=initTimestamp + computeGranularity;
      tempTupleArray=new ArrayList<InTuple>();
    }
    tempTupleArray.add(value);
  }
}
