{
  final SopremoModule module=new SopremoModule(this.getName(),2,4);
  final Source pointSource=module.getInput(0);
  final Source representationSource=module.getInput(1);
  final RepresentationSwitch representationSwitch=new RepresentationSwitch().withInputs(representationSource);
  final JsonStream stableRepresentations=representationSwitch.getOutput(0);
  final JsonStream unstableRepresentations=representationSwitch.getOutput(1);
  final JsonStream splitRepresentations=representationSwitch.getOutput(2);
  module.getOutput(0).setInput(0,stableRepresentations);
  final PointSelection stablePointSelection=new PointSelection().withInputs(pointSource,stableRepresentations);
  module.getOutput(1).setInput(0,stablePointSelection);
  final Split split=new Split().withInputs(splitRepresentations,pointSource);
  split.setRepresentationDetail(this.representationDetail);
  final UnionAll priorReclusterRepresentations=new UnionAll().withInputs(unstableRepresentations,split);
  module.getOutput(2).setInputs(priorReclusterRepresentations);
  final CanonicalizeRepresentations canonicalizeRepresentations=new CanonicalizeRepresentations().withInputs(splitRepresentations);
  final UnionAll reclusterRepresentations=new UnionAll().withInputs(unstableRepresentations,canonicalizeRepresentations);
  final PointSelection unstablePointSelection=new PointSelection().withInputs(pointSource,reclusterRepresentations);
  module.getOutput(3).setInput(0,unstablePointSelection);
  return module.asElementary();
}
