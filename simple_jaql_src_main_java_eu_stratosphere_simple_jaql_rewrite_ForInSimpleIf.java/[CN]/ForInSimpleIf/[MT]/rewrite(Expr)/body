{
  ForExpr fe=(ForExpr)expr;
  BindingExpr bind=fe.binding();
  if (!(bind.inExpr() instanceof IfExpr)) {
    return false;
  }
  IfExpr ifExpr=(IfExpr)bind.inExpr();
  Expr falseExpr=ifExpr.falseExpr();
  if (falseExpr.getSchema().isEmpty(ARRAY,NULL).maybeNot()) {
    return false;
  }
  if (falseExpr.getSchema().is(NULL).maybe()) {
    falseExpr.replaceInParent(new ArrayExpr());
  }
  Expr trueExpr=ifExpr.trueExpr();
  fe.replaceInParent(ifExpr);
  bind.setChild(0,trueExpr);
  ifExpr.setChild(1,fe);
  return true;
}
