{
  if (!this.isOpen) {
    throw new ClosedChannelException();
  }
  if (this.isInWritePhase) {
    throw new IllegalStateException("Channel is still in write phase");
  }
  if (!this.buffer.hasRemaining()) {
    return -1;
  }
  int numberOfBytesToRetrieve=Math.min(this.buffer.remaining(),dst.remaining());
  if (!this.readInterruptPositions.isEmpty() && (this.buffer.position() + numberOfBytesToRetrieve > this.readInterruptPositions.peek().intValue())) {
    numberOfBytesToRetrieve=this.readInterruptPositions.poll().intValue() - this.buffer.position();
  }
  final int oldLimit=this.buffer.limit();
  this.buffer.limit(this.buffer.position() + numberOfBytesToRetrieve);
  dst.put(this.buffer);
  this.buffer.limit(oldLimit);
  return numberOfBytesToRetrieve;
}
