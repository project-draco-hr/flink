{
  if (states != null) {
    Throwable firstException=null;
    for (    StreamTaskState state : states) {
      if (state != null) {
        try {
          state.close();
        }
 catch (        Throwable t) {
          if (firstException == null) {
            firstException=t;
          }
        }
      }
    }
    if (firstException != null) {
      ExceptionUtils.rethrowIOException(firstException);
    }
  }
}
