{
  try {
    PowerMockito.whenNew(KinesisProxy.class).withArguments(testConsumerConfig).thenReturn(kinesisProxyMock);
  }
 catch (  Exception e) {
    throw new RuntimeException("Error when power mocking KinesisProxy in test",e);
  }
  return new ShardConsumerThread<>(owningFetcherRefMock,testConsumerConfig,assignedShard,lastSequenceNum,dummySourceContext,new KinesisDeserializationSchemaWrapper<>(new SimpleStringSchema()),seqNumState);
}
