{
  LocalProperties lp=source.getLocalProperties().createCopy();
  if (shipMode == null || shipMode == ShipStrategy.NONE) {
    throw new CompilerException("Cannot determine properties if shipping strategy is not defined.");
  }
 else   if (shipMode != ShipStrategy.FORWARD) {
    lp.reset();
  }
  return lp;
}
