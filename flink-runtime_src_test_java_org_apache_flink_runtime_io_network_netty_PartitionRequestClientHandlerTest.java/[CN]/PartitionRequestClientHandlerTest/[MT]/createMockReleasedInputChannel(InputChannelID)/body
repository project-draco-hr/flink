{
  final BufferProvider bufferProvider=mock(BufferProvider.class);
  when(bufferProvider.requestBuffer()).thenReturn(null);
  when(bufferProvider.isDestroyed()).thenReturn(true);
  when(bufferProvider.addListener(any(EventListener.class))).thenReturn(false);
  final RemoteInputChannel inputChannel=mock(RemoteInputChannel.class);
  when(inputChannel.getInputChannelId()).thenReturn(channelId);
  when(inputChannel.getBufferProvider()).thenReturn(bufferProvider);
  return inputChannel;
}
