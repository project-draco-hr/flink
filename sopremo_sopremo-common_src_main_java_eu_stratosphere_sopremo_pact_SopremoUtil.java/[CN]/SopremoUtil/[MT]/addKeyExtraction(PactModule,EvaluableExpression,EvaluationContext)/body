{
  MapContract<PactNull,PactJsonObject,Key,PactJsonObject> extractionMap=new MapContract<PactNull,PactJsonObject,Key,PactJsonObject>(KeyExtractionStub.class);
  int inputIndex=0;
  if (expr instanceof Path) {
    inputIndex=getInputIndex((Path)expr);
    expr=new Path(expr);
    ((Path)expr).replace(new Path(new Input(inputIndex)),new Path());
  }
 else   if (expr instanceof Input) {
    inputIndex=((Input)expr).getIndex();
    expr=EvaluableExpression.IDENTITY;
  }
  extractionMap.setInput(module.getInput(inputIndex));
  SopremoUtil.setTransformationAndContext(extractionMap.getStubParameters(),expr,context);
  return extractionMap;
}
