{
  byte[] buffer=new byte[in.readInt()];
  in.readFully(buffer);
  final ObjectInputStream ois=new ObjectInputStream(new ByteArrayInputStream(buffer));
  try {
    return (T)ois.readObject();
  }
 catch (  ClassNotFoundException e) {
    throw new IllegalStateException("Cannot deserialize the object",e);
  }
}
