{
  if (ois.readBoolean())   return (T)ois.readObject();
  T object;
  try {
    object=(T)Class.forName(ois.readUTF()).newInstance();
  }
 catch (  final InstantiationException e) {
    throw new IOException(e);
  }
catch (  final IllegalAccessException e) {
    throw new IOException(e);
  }
  final Map<String,Object> values=(Map<String,Object>)ois.readObject();
  BeanInfo beanInfo;
  try {
    beanInfo=Introspector.getBeanInfo(object.getClass());
  }
 catch (  final IntrospectionException e) {
    LOG.info(String.format("Cannot retrieve bean info for type %s: %s",object.getClass(),e.getMessage()));
    ois.readObject();
    return object;
  }
  for (  final PropertyDescriptor propertyDescriptor : beanInfo.getPropertyDescriptors()) {
    final String name=propertyDescriptor.getName();
    if (values.containsKey(name))     try {
      propertyDescriptor.getWriteMethod().invoke(object,values.get(name));
    }
 catch (    final Exception e) {
      LOG.debug(String.format("Cannot deserialize field %s of type %s: %s",propertyDescriptor.getName(),object.getClass(),e.getMessage()));
    }
  }
  return object;
}
