{
  if (stubClass == null)   return null;
  final Class<?> contract=STUB_CONTRACTS.get(stubClass);
  if (contract != null)   return (Class<? extends Contract>)contract;
  Iterator<Entry<Class<?>,Class<? extends Contract>>> stubContracts=STUB_CONTRACTS.entrySet().iterator();
  while (stubContracts.hasNext()) {
    Map.Entry<Class<?>,Class<? extends Contract>> entry=stubContracts.next();
    if (entry.getKey().isAssignableFrom(stubClass))     return entry.getValue();
  }
  return null;
}
