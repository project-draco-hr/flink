{
  if (!this.writeMode.get()) {
    throw new IOException("Cannot write to buffer, buffer already switched to read mode");
  }
  final int bytesToCopy=Math.min(src.remaining(),this.byteBuffer.remaining());
  if (bytesToCopy == 0) {
    return 0;
  }
  this.byteBuffer.put(src.array(),src.position(),bytesToCopy);
  src.position(src.position() + bytesToCopy);
  return bytesToCopy;
}
