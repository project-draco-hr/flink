{
  if (this.writeMode.get()) {
    throw new IOException("Buffer is still in write mode!");
  }
  if (!this.byteBuffer.hasRemaining()) {
    return -1;
  }
  if (!dst.hasRemaining()) {
    return 0;
  }
  final int oldPosition=this.byteBuffer.position();
  if (dst.remaining() < this.byteBuffer.remaining()) {
    final int excess=this.byteBuffer.remaining() - dst.remaining();
    this.byteBuffer.limit(this.byteBuffer.limit() - excess);
    dst.put(this.byteBuffer);
    this.byteBuffer.limit(this.byteBuffer.limit() + excess);
  }
 else {
    dst.put(this.byteBuffer);
  }
  return (this.byteBuffer.position() - oldPosition);
}
