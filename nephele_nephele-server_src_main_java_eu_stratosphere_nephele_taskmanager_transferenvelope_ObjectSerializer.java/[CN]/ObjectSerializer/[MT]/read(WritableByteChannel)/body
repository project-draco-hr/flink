{
  int bytesReadFromLengthBuf=0;
  if (this.lengthBuf.hasRemaining()) {
    bytesReadFromLengthBuf=writableByteChannel.write(this.lengthBuf);
  }
  final ByteBuffer bb=ByteBuffer.wrap(this.output.getBuffer(),this.bytesReadFromBuffer,leftInSerializationBuffer());
  final int bytesReadFromSerializationBuf=writableByteChannel.write(bb);
  this.bytesReadFromBuffer+=bytesReadFromSerializationBuf;
  if (leftInSerializationBuffer() == 0) {
    this.output.clear();
    this.bytesReadFromBuffer=0;
  }
  return (bytesReadFromSerializationBuf + bytesReadFromLengthBuf);
}
