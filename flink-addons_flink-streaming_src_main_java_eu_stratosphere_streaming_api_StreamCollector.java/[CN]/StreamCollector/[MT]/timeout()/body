{
  if (timeOfLastRecordEmitted + batchTimeout < System.currentTimeMillis()) {
    StreamRecord truncatedRecord=new ArrayStreamRecord(streamRecord,counter);
    emit(truncatedRecord);
    timeOfLastRecordEmitted=System.currentTimeMillis();
  }
}
