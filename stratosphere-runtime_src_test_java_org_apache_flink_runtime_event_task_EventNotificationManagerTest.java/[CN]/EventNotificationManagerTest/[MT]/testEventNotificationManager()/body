{
  final EventNotificationManager evm=new EventNotificationManager();
  final TestEventListener listener=new TestEventListener();
  evm.subscribeToEvent(listener,StringTaskEvent.class);
  final StringTaskEvent stringTaskEvent1=new StringTaskEvent("Test 1");
  final StringTaskEvent stringTaskEvent2=new StringTaskEvent("Test 2");
  evm.deliverEvent(stringTaskEvent1);
  evm.deliverEvent(new IntegerTaskEvent(5));
  assertNotNull(listener.getLastReceivedEvent());
  StringTaskEvent receivedStringEvent=(StringTaskEvent)listener.getLastReceivedEvent();
  assertEquals(stringTaskEvent1,receivedStringEvent);
  evm.unsubscribeFromEvent(listener,StringTaskEvent.class);
  evm.deliverEvent(stringTaskEvent2);
  assertNotNull(listener.getLastReceivedEvent());
  receivedStringEvent=(StringTaskEvent)listener.getLastReceivedEvent();
  assertEquals(stringTaskEvent1,receivedStringEvent);
}
