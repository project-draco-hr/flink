{
  int s=this.availableMemory.size();
  if (s > 0) {
    return this.availableMemory.remove(s - 1);
  }
  if (this.writeBehindBuffersAvailable > 0) {
    MemorySegment toReturn;
    try {
      toReturn=this.writeBehindBuffers.take().dispose();
    }
 catch (    InterruptedException iex) {
      throw new IOException("Hybrid Hash Join was interrupted while taking a buffer.");
    }
    this.writeBehindBuffersAvailable--;
    Buffer.Output currBuff=null;
    while (this.writeBehindBuffersAvailable > 0 && (currBuff=this.writeBehindBuffers.poll()) != null) {
      this.availableMemory.add(currBuff.dispose());
      this.writeBehindBuffersAvailable--;
    }
    return toReturn;
  }
 else {
    return null;
  }
}
