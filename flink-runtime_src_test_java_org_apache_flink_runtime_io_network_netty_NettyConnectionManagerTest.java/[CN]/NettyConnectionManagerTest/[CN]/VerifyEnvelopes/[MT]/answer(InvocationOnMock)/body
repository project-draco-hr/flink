{
  Envelope env=(Envelope)invocation.getArguments()[0];
  ChannelID channelId=env.getSource();
  int seqNum=env.getSequenceNumber();
  if (seqNum == 0) {
    Integer previousSeqNum=this.received.putIfAbsent(channelId,seqNum);
    String msg=String.format("Received envelope from %s before, but current seq num is 0",channelId);
    Assert.assertNull(msg,previousSeqNum);
  }
 else {
    boolean isExpectedPreviousSeqNum=this.received.replace(channelId,seqNum - 1,seqNum);
    String msg=String.format("Received seq num %d from %s, but previous was not %d.",seqNum,channelId,seqNum - 1);
    Assert.assertTrue(msg,isExpectedPreviousSeqNum);
  }
  if (seqNum == numExpectedEnvelopesPerSubtask - 1) {
    this.latch.countDown();
  }
  return null;
}
