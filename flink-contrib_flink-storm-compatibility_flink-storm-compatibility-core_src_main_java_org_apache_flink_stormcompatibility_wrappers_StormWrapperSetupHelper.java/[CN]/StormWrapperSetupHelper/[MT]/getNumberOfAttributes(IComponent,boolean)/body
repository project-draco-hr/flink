{
  final StormOutputFieldsDeclarer declarer=new StormOutputFieldsDeclarer();
  spoutOrBolt.declareOutputFields(declarer);
  final int declaredNumberOfAttributes=declarer.getNumberOfAttributes();
  if (declaredNumberOfAttributes == -1) {
    return -1;
  }
  if ((declaredNumberOfAttributes < 1) || (declaredNumberOfAttributes > 25)) {
    throw new IllegalArgumentException("Provided bolt declares non supported number of output attributes. Must be in range [1;25] but " + "was " + declaredNumberOfAttributes);
  }
  if (rawOutput) {
    if (declaredNumberOfAttributes > 1) {
      throw new IllegalArgumentException("Ouput type is requested to be raw type, but provided bolt declares more then one output " + "attribute.");
    }
    return 0;
  }
  return declaredNumberOfAttributes;
}
