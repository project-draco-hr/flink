{
  if (this.next == null) {
    if (this.iterator.hasNext()) {
      this.next=this.iterator.next();
      this.currentKey=this.next.getKey();
      this.nextIsFresh=false;
      this.valuesIterator=new ValuesIterator();
      this.valuesIterator.nextIsUnconsumed=true;
      return true;
    }
 else {
      this.currentKey=null;
      this.valuesIterator=null;
      return false;
    }
  }
  if (this.nextIsFresh) {
    this.nextIsFresh=false;
    this.currentKey=this.next.getKey();
    this.valuesIterator.nextIsUnconsumed=true;
    return true;
  }
  while (true) {
    KeyValuePair<K,V> prev=this.next;
    if (this.iterator.hasNext()) {
      this.next=this.iterator.next();
      if (next.getKey().compareTo(prev.getKey()) != 0) {
        this.nextIsFresh=false;
        this.currentKey=this.next.getKey();
        this.valuesIterator.nextIsUnconsumed=true;
        return true;
      }
    }
 else {
      this.currentKey=null;
      this.valuesIterator=null;
      return false;
    }
  }
}
