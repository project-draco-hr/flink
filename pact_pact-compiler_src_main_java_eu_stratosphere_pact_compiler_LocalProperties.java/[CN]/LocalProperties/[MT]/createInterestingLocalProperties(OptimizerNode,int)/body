{
  boolean newGrouped=false;
  Ordering newOrdering=null;
  FieldSet newGroupedFields=null;
  if (this.groupedFields != null) {
    boolean groupingPreserved=true;
    for (    Integer index : this.groupedFields) {
      if (!node.isFieldKept(input,index)) {
        groupingPreserved=false;
        break;
      }
    }
    if (groupingPreserved) {
      newGroupedFields=(FieldSet)this.groupedFields.clone();
      newGrouped=true;
    }
  }
  if (ordering != null) {
    boolean orderingPreserved=true;
    ArrayList<Integer> involvedIndexes=ordering.getInvolvedIndexes();
    for (int i=0; i < involvedIndexes.size(); i++) {
      if (!node.isFieldKept(input,i)) {
        orderingPreserved=false;
        break;
      }
    }
    if (orderingPreserved) {
      newOrdering=ordering.clone();
    }
  }
  if (!newGrouped && newOrdering == null) {
    return null;
  }
 else {
    return new LocalProperties(newGrouped,newGroupedFields,newOrdering);
  }
}
