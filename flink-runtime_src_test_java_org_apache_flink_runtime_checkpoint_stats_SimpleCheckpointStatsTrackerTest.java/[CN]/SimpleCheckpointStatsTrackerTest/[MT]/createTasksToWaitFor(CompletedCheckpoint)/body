{
  Map<JobVertexID,Integer> operators=new HashMap<>();
  for (  StateForTask state : checkpoint.getStates()) {
    Integer parallelism=operators.get(state.getOperatorId());
    if (parallelism == null) {
      operators.put(state.getOperatorId(),state.getSubtask() + 1);
    }
 else     if (parallelism < state.getSubtask() + 1) {
      operators.put(state.getOperatorId(),state.getSubtask() + 1);
    }
  }
  List<ExecutionJobVertex> jobVertices=new ArrayList<>(checkpoint.getStates().size());
  for (  JobVertexID vertexId : operators.keySet()) {
    ExecutionJobVertex v=mock(ExecutionJobVertex.class);
    when(v.getJobVertexId()).thenReturn(vertexId);
    when(v.getParallelism()).thenReturn(operators.get(vertexId));
    jobVertices.add(v);
  }
  return jobVertices;
}
