{
  checkArgument(numberOfInputChannels >= 1);
  this.inputGate=spy(new SingleInputGate("Test Task Name",new JobID(),new ExecutionAttemptID(),new IntermediateDataSetID(),0,numberOfInputChannels,mock(PartitionStateChecker.class)));
  this.inputChannels=new TestInputChannel[numberOfInputChannels];
  if (initialize) {
    for (int i=0; i < numberOfInputChannels; i++) {
      inputChannels[i]=new TestInputChannel(inputGate,i);
      inputGate.setInputChannel(new IntermediateResultPartitionID(),inputChannels[i].getInputChannel());
    }
  }
}
