{
  if (this == obj)   return true;
  if (obj == null)   return false;
  if (getClass() != obj.getClass())   return false;
  Struct other=(Struct)obj;
  if (schema != other.schema)   return false;
  for (int i=0; i < this.values.length; i++) {
    Field f=this.schema.get(i);
    Boolean result;
    if (f.type() instanceof ArrayOf) {
      result=Arrays.equals((Object[])this.get(f),(Object[])other.get(f));
    }
 else {
      result=this.get(f).equals(other.get(f));
    }
    if (!result)     return false;
  }
  return true;
}
