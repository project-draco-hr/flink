{
  final long startTime=System.currentTimeMillis();
  while (true) {
    if (this.assertionError != null) {
      throw this.assertionError;
    }
    if (this.executionStateIndex == this.expectedStateChanges.length) {
      return;
    }
    if ((startTime + MAX_WAIT_TIME) < System.currentTimeMillis()) {
      fail("Scenario took to long to complete");
    }
    try {
      Thread.sleep(10);
    }
 catch (    InterruptedException e) {
      break;
    }
  }
}
