{
  response.reset();
  DataOutputStream out=new DataOutputStream(response);
  out.writeInt(call.id);
  out.writeInt(status.state);
  if (status == Status.SUCCESS) {
    if (rv == null) {
      out.writeBoolean(false);
    }
 else {
      out.writeBoolean(true);
      StringRecord.writeString(out,rv.getClass().getName());
      rv.write(out);
    }
  }
 else {
    StringRecord.writeString(out,errorClass);
    StringRecord.writeString(out,error);
  }
  call.setResponse(ByteBuffer.wrap(response.toByteArray()));
}
