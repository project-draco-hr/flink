{
  final StreamOperator<?>[] allOperators=operatorChain.getAllOperators();
  try {
    if (lazyRestoreChainedOperatorState != null) {
synchronized (cancelables) {
        cancelables.add(lazyRestoreChainedOperatorState);
      }
      for (int i=0; i < lazyRestoreChainedOperatorState.getLength(); i++) {
        StreamStateHandle state=lazyRestoreChainedOperatorState.get(i);
        if (state == null) {
          continue;
        }
        StreamOperator<?> operator=allOperators[i];
        if (operator != null) {
          LOG.debug("Restore state of task {} in chain ({}).",i,getName());
          try (FSDataInputStream inputStream=state.openInputStream()){
            operator.restoreState(inputStream);
          }
         }
      }
    }
  }
  finally {
synchronized (cancelables) {
      cancelables.remove(lazyRestoreChainedOperatorState);
    }
  }
}
