{
  timestampedCollector.setTimestamp(context.window.maxTimestamp());
  EvictingWindowBuffer<IN> windowBuffer=(EvictingWindowBuffer<IN>)context.windowBuffer;
  int toEvict=0;
  if (windowBuffer.size() > 0) {
    toEvict=evictor.evict((Iterable)windowBuffer.getElements(),windowBuffer.size(),context.window);
  }
  windowBuffer.removeElements(toEvict);
  userFunction.apply(context.window,context.windowBuffer.getUnpackedElements(),timestampedCollector);
}
