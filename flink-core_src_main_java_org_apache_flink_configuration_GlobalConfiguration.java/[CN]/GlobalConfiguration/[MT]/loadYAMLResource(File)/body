{
synchronized (getClass()) {
    BufferedReader reader=null;
    try {
      reader=new BufferedReader(new InputStreamReader(new FileInputStream(file)));
      String line=null;
      while ((line=reader.readLine()) != null) {
        String[] comments=line.split("#",2);
        String conf=comments[0];
        if (conf.length() > 0) {
          String[] kv=conf.split(": ",2);
          if (kv.length == 1) {
            LOG.warn("Error while trying to split key and value in configuration file " + file + ": "+ line);
            continue;
          }
          String key=kv[0].trim();
          String value=kv[1].trim();
          if (key.length() == 0 || value.length() == 0) {
            LOG.warn("Error after splitting key and value in configuration file " + file + ": "+ line);
            continue;
          }
          LOG.debug("Loading configuration property: {}, {}",key,value);
          this.config.setString(key,value);
        }
      }
    }
 catch (    IOException e) {
      LOG.error("Error parsing YAML configuration.",e);
    }
 finally {
      try {
        if (reader != null) {
          reader.close();
        }
      }
 catch (      IOException e) {
        LOG.warn("Cannot to close reader with IOException.",e);
      }
    }
  }
}
