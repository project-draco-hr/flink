{
  try {
    ByteArrayOutputStream baos=new ByteArrayOutputStream();
    DataOutputStream out=new DataOutputStream(baos);
    event.write(out);
    out.flush();
    byte[] data=baos.toByteArray();
    out.close();
    baos.close();
    DataInputStream in=new DataInputStream(new ByteArrayInputStream(data));
    IterationEventWithAggregators newEvent=event.getClass().newInstance();
    newEvent.read(in);
    in.close();
    return newEvent;
  }
 catch (  Exception e) {
    System.err.println(e.getMessage());
    e.printStackTrace();
    Assert.fail("Test threw an exception: " + e.getMessage());
    return null;
  }
}
