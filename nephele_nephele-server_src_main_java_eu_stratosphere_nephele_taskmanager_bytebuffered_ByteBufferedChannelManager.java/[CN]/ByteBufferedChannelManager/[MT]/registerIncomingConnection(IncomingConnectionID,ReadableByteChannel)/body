{
  final IncomingConnection incomingConnection=new IncomingConnection(incomingConnectionID,this,readableByteChannel);
synchronized (this.incomingConnections) {
    final IncomingConnection previousConnection=this.incomingConnections.get(incomingConnectionID);
    if (previousConnection != null) {
      LOG.warn("Found previous connection for " + incomingConnectionID);
      previousConnection.markConnectionAsInactive();
    }
    this.incomingConnections.put(incomingConnectionID,incomingConnection);
  }
  if (readableByteChannel instanceof SocketChannel) {
    getIncomingConnectionThread().addToPendingIncomingConnections(incomingConnection);
  }
  return incomingConnection;
}
