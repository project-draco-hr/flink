{
  if (minimumSizeOfBuffer > this.bufferSizeInBytes) {
    throw new IOException("Requested buffer size is " + minimumSizeOfBuffer + ", system can offer at most "+ this.bufferSizeInBytes);
  }
synchronized (this.emptyReadBuffers) {
    if ((this.emptyReadBuffers.size() - 2) > 0) {
      return BufferFactory.createFromMemory(minimumSizeOfBuffer,this.emptyReadBuffers.poll(),this.emptyReadBuffers);
    }
    if (this.isSpillingAllowed && this.fileBufferManager.hasResourcesAvailable(sourceChannelID)) {
      return BufferFactory.createFromFile(minimumSizeOfBuffer,sourceChannelID,this.fileBufferManager);
    }
  }
  return null;
}
