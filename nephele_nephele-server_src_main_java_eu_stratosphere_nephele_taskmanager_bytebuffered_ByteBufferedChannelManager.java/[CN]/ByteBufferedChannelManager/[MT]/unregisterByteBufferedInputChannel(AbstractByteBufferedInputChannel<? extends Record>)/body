{
  LOG.debug("Unregistering byte buffered input channel " + byteBufferedInputChannel.getID());
synchronized (this.registeredChannels) {
    if (this.registeredChannels.remove(byteBufferedInputChannel.getID()) == null) {
      LOG.error("Cannot find byte buffered input channel " + byteBufferedInputChannel.getID() + " to unregister");
      return;
    }
  }
  Queue<TransferEnvelope> incomingTransferEnvelopes=null;
synchronized (this.queuedIncomingTransferEnvelopes) {
    incomingTransferEnvelopes=this.queuedIncomingTransferEnvelopes.remove(byteBufferedInputChannel.getID());
  }
  if (incomingTransferEnvelopes == null) {
    return;
  }
synchronized (incomingTransferEnvelopes) {
    final Iterator<TransferEnvelope> it=incomingTransferEnvelopes.iterator();
    while (it.hasNext()) {
      final TransferEnvelope envelope=it.next();
      if (envelope.getBuffer() != null) {
        envelope.getBuffer().recycleBuffer();
      }
    }
  }
}
