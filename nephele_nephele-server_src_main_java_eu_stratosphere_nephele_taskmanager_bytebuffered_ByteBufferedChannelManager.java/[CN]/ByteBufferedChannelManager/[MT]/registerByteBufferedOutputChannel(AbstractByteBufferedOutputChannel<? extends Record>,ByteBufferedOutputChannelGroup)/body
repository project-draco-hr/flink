{
  LOG.info("Registering byte buffered output channel " + byteBufferedOutputChannel.getID());
synchronized (this.registeredChannels) {
    if (this.registeredChannels.containsKey(byteBufferedOutputChannel.getID())) {
      LOG.error("Byte buffered output channel " + byteBufferedOutputChannel.getID() + " is already registered");
      return;
    }
    ByteBufferedOutputChannelWrapper channelWrapper=null;
switch (byteBufferedOutputChannel.getType()) {
case FILE:
case NETWORK:
      channelWrapper=new ByteBufferedOutputChannelWrapper(byteBufferedOutputChannel,channelGroup);
    break;
default :
  LOG.error("Cannot find channel wrapper for byte buffered channel " + byteBufferedOutputChannel.getID());
return;
}
channelGroup.registerOutputChannel(byteBufferedOutputChannel.getID());
this.bufferProvider.registerOutOfWriteBuffersListener(channelWrapper);
this.registeredChannels.put(byteBufferedOutputChannel.getID(),channelWrapper);
}
}
