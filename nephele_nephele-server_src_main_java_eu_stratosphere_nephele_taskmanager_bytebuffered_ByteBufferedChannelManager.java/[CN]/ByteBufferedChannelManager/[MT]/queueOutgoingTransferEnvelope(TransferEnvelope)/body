{
  InetSocketAddress connectionAddress=getPeerConnectionAddress(transferEnvelope.getSource());
  if (connectionAddress == null) {
    LOG.fatal("Cannot resolve channel ID to a connection address: " + transferEnvelope.getTarget());
    return;
  }
  OutgoingConnection outgoingConnection=null;
synchronized (this.outgoingConnections) {
    outgoingConnection=this.outgoingConnections.get(connectionAddress);
    if (outgoingConnection == null) {
      outgoingConnection=createOutgoingConnection(connectionAddress);
    }
    this.outgoingConnections.put(connectionAddress,outgoingConnection);
  }
  outgoingConnection.queueEnvelope(transferEnvelope);
}
