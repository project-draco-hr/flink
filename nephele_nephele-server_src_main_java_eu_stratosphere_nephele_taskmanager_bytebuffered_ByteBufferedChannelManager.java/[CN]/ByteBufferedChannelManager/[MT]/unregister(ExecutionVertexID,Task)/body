{
  final Environment environment=task.getEnvironment();
  Iterator<ChannelID> channelIterator=environment.getOutputChannelIDs().iterator();
  while (channelIterator.hasNext()) {
    final ChannelID outputChannelID=channelIterator.next();
    final ChannelContext context=this.registeredChannels.remove(outputChannelID);
    if (context != null) {
      context.destroy();
    }
    this.receiverCache.remove(outputChannelID);
  }
  channelIterator=environment.getInputChannelIDs().iterator();
  while (channelIterator.hasNext()) {
    final ChannelID outputChannelID=channelIterator.next();
    final ChannelContext context=this.registeredChannels.remove(outputChannelID);
    if (context != null) {
      context.destroy();
    }
    this.receiverCache.remove(outputChannelID);
  }
  final Iterator<GateID> inputGateIterator=environment.getInputGateIDs().iterator();
  while (inputGateIterator.hasNext()) {
    final GateID inputGateID=inputGateIterator.next();
    final LocalBufferPoolOwner owner=this.localBufferPoolOwner.remove(inputGateID);
    if (owner != null) {
      owner.clearLocalBufferPool();
    }
  }
  final LocalBufferPoolOwner owner=this.localBufferPoolOwner.remove(vertexID);
  if (owner != null) {
    owner.clearLocalBufferPool();
  }
  redistributeGlobalBuffers();
}
