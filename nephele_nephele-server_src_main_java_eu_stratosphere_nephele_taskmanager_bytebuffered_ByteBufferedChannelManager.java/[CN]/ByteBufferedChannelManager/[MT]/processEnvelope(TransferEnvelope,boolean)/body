{
  final TransferEnvelopeReceiverList receiverList=getReceiverList(transferEnvelope.getJobID(),transferEnvelope.getSource());
  if (receiverList == null) {
    throw new IOException("Transfer envelope " + transferEnvelope.getSequenceNumber() + " from source channel "+ transferEnvelope.getSource()+ " has not have a receiver list");
  }
  if (receiverList.getTotalNumberOfReceivers() == 0) {
    throw new IOException("Total number of receivers for envelope " + transferEnvelope.getSequenceNumber() + " from source channel "+ transferEnvelope.getSource()+ " is 0");
  }
  if (transferEnvelope.getBuffer() == null) {
    processEnvelopeEnvelopeWithoutBuffer(transferEnvelope,receiverList);
  }
 else {
    processEnvelopeWithBuffer(transferEnvelope,receiverList,freeSourceBuffer);
  }
}
