{
  MemoryBuffer buf=new MemoryBuffer(INT_COUNT * INT_SIZE,new MemorySegment(new byte[INT_COUNT * INT_SIZE]),bufferPoolConnector);
  fillBuffer(buf);
  MemoryBuffer destination=new MemoryBuffer(INT_COUNT * INT_SIZE * 2,new MemorySegment(new byte[INT_COUNT * INT_SIZE * 2]),bufferPoolConnector);
  assertEquals(INT_COUNT * INT_SIZE * 2,destination.limit());
  buf.copyToBuffer(destination);
  assertEquals(INT_COUNT * INT_SIZE,destination.limit());
  ByteBuffer test=ByteBuffer.allocate(INT_COUNT * INT_SIZE);
  int written=destination.read(test);
  assertEquals(INT_COUNT * INT_SIZE,written);
  validateByteBuffer(test);
  destination.position(written);
  destination.limit(destination.getTotalSize());
  ByteBuffer testRemainder=ByteBuffer.allocate(INT_COUNT * INT_SIZE);
  written=destination.read(testRemainder);
  assertEquals(INT_COUNT * INT_SIZE,written);
  expectAllNullByteBuffer(testRemainder);
  buf.close();
}
