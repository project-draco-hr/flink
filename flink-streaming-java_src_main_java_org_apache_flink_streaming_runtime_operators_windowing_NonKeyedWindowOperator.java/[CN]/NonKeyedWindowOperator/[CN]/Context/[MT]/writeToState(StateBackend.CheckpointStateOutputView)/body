{
  windowSerializer.serialize(window,out);
  out.writeLong(watermarkTimer);
  out.writeLong(processingTimeTimer);
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  SerializationUtils.serialize(state,baos);
  out.writeInt(baos.size());
  out.write(baos.toByteArray(),0,baos.size());
  MultiplexingStreamRecordSerializer<IN> recordSerializer=new MultiplexingStreamRecordSerializer<>(inputSerializer);
  out.writeInt(windowBuffer.size());
  for (  StreamRecord<IN> element : windowBuffer.getElements()) {
    recordSerializer.serialize(element,out);
  }
}
