{
  windowSerializer.serialize(window,out);
  out.writeLong(watermarkTimer);
  out.writeLong(processingTimeTimer);
  byte[] serializedState=InstantiationUtil.serializeObject(state);
  out.writeInt(serializedState.length);
  out.write(serializedState,0,serializedState.length);
  windowBuffer.snapshot(out);
}
