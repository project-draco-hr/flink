{
  return new ValueState<S>(){
    @Override public S value() throws IOException {
      Serializable value=state.get(name);
      if (value == null) {
        state.put(name,defaultState);
        value=defaultState;
      }
      return (S)value;
    }
    @Override public void update(    S value) throws IOException {
      state.put(name,value);
    }
    @Override public void clear(){
      state.remove(name);
    }
  }
;
}
