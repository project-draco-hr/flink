{
  if (!triggerResult.isFire() && !triggerResult.isPurge()) {
    return;
  }
  Context context;
  if (triggerResult.isPurge()) {
    context=windows.remove(window);
  }
 else {
    context=windows.get(window);
  }
  if (context == null) {
    LOG.debug("Window {} already gone.",window);
    return;
  }
  if (triggerResult.isFire()) {
    emitWindow(context);
  }
  if (triggerResult.isPurge()) {
    context.clear();
  }
}
