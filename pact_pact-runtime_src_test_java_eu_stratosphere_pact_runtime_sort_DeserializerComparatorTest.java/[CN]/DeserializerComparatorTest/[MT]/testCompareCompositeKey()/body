{
  Comparator<Key> keyComparator=new KeyComparator();
  @SuppressWarnings("unchecked") RawComparator rawComparator=new DeserializerComparator(new int[]{2,0},new Class[]{TestData.Key.class,PactInteger.class},new Comparator[]{keyComparator,keyComparator});
  PactInteger int1=new PactInteger(18);
  TestData.Key key1=new TestData.Key(10);
  TestData.Value val1=new TestData.Value("Some-test-value-here.");
  PactRecord rec1=new PactRecord(int1,val1);
  rec1.setField(2,key1);
  PactInteger int2=new PactInteger(20);
  TestData.Key key2=new TestData.Key(11);
  TestData.Value val2=new TestData.Value("Another-magic-test-value.");
  PactRecord rec2=new PactRecord(int2,val2);
  rec2.setField(2,key2);
  ByteArrayOutputStream buffer1=new ByteArrayOutputStream();
  DataOutputStream dataOutput1=new DataOutputStream(buffer1);
  rec1.write(dataOutput1);
  byte[] key1bytes=buffer1.toByteArray();
  ByteArrayOutputStream buffer2=new ByteArrayOutputStream();
  DataOutputStream dataOutput2=new DataOutputStream(buffer2);
  rec2.write(dataOutput2);
  byte[] key2bytes=buffer2.toByteArray();
  Assert.assertTrue(rawComparator.compare(key1bytes,key2bytes,0,0) < 0);
  Assert.assertTrue(rawComparator.compare(key2bytes,key1bytes,0,0) > 0);
  Assert.assertTrue(rawComparator.compare(key1bytes,key1bytes,0,0) == 0);
}
