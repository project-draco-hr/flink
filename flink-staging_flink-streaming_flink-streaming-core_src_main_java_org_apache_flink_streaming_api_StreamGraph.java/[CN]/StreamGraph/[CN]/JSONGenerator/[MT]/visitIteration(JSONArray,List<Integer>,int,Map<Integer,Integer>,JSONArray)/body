{
  Integer vertexID=toVisit.get(0);
  toVisit.remove(vertexID);
  if (!iterationIds.containsKey(vertexID)) {
    JSONObject obj=new JSONObject();
    jsonArray.put(obj);
    decorateNode(vertexID,obj);
    JSONArray inEdges=new JSONArray();
    obj.put(PREDECESSORS,inEdges);
    for (    int inputID : getInEdges(vertexID)) {
      if (edgeRemapings.keySet().contains(inputID)) {
        decorateEdge(inEdges,vertexID,inputID,inputID);
      }
 else       if (!iterationIds.containsKey(inputID)) {
        decorateEdge(iterationInEdges,vertexID,inputID,inputID);
      }
    }
    edgeRemapings.put(vertexID,headId);
    visitIteration(jsonArray,toVisit,headId,edgeRemapings,iterationInEdges);
  }
}
