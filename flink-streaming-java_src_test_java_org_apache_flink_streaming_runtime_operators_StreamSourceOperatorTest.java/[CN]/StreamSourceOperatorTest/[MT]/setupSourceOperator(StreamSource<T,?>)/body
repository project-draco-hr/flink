{
  ExecutionConfig executionConfig=new ExecutionConfig();
  StreamConfig cfg=new StreamConfig(new Configuration());
  cfg.setTimeCharacteristic(TimeCharacteristic.EventTime);
  Environment env=new DummyEnvironment("MockTwoInputTask",1,0);
  StreamTask<?,?> mockTask=mock(StreamTask.class);
  when(mockTask.getName()).thenReturn("Mock Task");
  when(mockTask.getCheckpointLock()).thenReturn(new Object());
  when(mockTask.getConfiguration()).thenReturn(cfg);
  when(mockTask.getEnvironment()).thenReturn(env);
  when(mockTask.getExecutionConfig()).thenReturn(executionConfig);
  when(mockTask.getAccumulatorMap()).thenReturn(Collections.<String,Accumulator<?,?>>emptyMap());
  operator.setup(mockTask,cfg,(Output<StreamRecord<T>>)mock(Output.class));
}
