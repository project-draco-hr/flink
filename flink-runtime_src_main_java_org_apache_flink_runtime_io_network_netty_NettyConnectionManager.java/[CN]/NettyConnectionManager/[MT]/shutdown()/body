{
  if (debugThread != null) {
    debugThread.interrupt();
  }
  if (!in.group().isShuttingDown()) {
    LOG.info("Shutting down incoming connections.");
    try {
      in.group().shutdownGracefully().sync();
    }
 catch (    InterruptedException e) {
      throw new IOException(e);
    }
  }
  if (!out.group().isShuttingDown()) {
    LOG.info("Shutting down outgoing connections.");
    try {
      out.group().shutdownGracefully().sync();
    }
 catch (    InterruptedException e) {
      throw new IOException(e);
    }
  }
}
