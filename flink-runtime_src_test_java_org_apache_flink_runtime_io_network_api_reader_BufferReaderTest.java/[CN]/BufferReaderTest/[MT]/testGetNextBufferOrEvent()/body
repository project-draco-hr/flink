{
  final MockBufferReader mockReader=new MockBufferReader().readBuffer().readBuffer().readEvent().readBuffer().readBuffer().readEvent().readBuffer().finish();
  final EventListener<TaskEvent> listener=mock(EventListener.class);
  final BufferReader reader=mockReader.getMock();
  reader.subscribeToTaskEvent(listener,TestTaskEvent.class);
  consumeAndVerify(reader,5);
  verifyListenerCalled(listener,2);
}
