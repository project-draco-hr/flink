{
  final MockBufferReader mockReader=new MockBufferReader().readBuffer().readBuffer().readEvent().readBuffer().readBuffer().readEvent().readBuffer().finishSuperstep().readBuffer().readBuffer().readEvent().readBuffer().readBuffer().readEvent().readBuffer().finish();
  final EventListener<TaskEvent> listener=mock(EventListener.class);
  final BufferReader reader=mockReader.getMock();
  reader.setIterativeReader();
  reader.subscribeToTaskEvent(listener,TestTaskEvent.class);
  consumeAndVerify(reader,10,1);
  verifyListenerCalled(listener,4);
}
