{
  if (!(other instanceof AvgKafkaMetricAccumulator)) {
    throw new RuntimeException("Trying to merge incompatible accumulators: " + this + " with "+ other);
  }
  AvgKafkaMetricAccumulator otherMetric=(AvgKafkaMetricAccumulator)other;
  AvgSumCount thisAvg;
  if (this.lastSumCount == null) {
    Measurable thisMeasurable=DefaultKafkaMetricAccumulator.getMeasurableFromKafkaMetric(this.kafkaMetric);
    if (!(thisMeasurable instanceof Avg)) {
      throw new RuntimeException("Must be of type Avg");
    }
    thisAvg=getAvgSumCount((Avg)thisMeasurable);
  }
 else {
    thisAvg=this.lastSumCount;
  }
  AvgSumCount otherAvg;
  if (otherMetric.lastSumCount == null) {
    Measurable otherMeasurable=DefaultKafkaMetricAccumulator.getMeasurableFromKafkaMetric(otherMetric.kafkaMetric);
    if (!(otherMeasurable instanceof Avg)) {
      throw new RuntimeException("Must be of type Avg");
    }
    otherAvg=getAvgSumCount((Avg)otherMeasurable);
  }
 else {
    otherAvg=otherMetric.lastSumCount;
  }
  thisAvg.count+=otherAvg.count;
  thisAvg.sum+=otherAvg.sum;
  this.mergedValue=thisAvg.sum / thisAvg.count;
}
