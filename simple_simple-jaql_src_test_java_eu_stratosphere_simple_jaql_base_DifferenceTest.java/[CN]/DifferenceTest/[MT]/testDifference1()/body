{
  SopremoPlan actualPlan=parseScript("$oldUsers = read 'oldUsers.json';\n" + "$currentUsers = read 'currentUsers.json';\n" + "$newUsers = difference $currentUsers, $oldUsers;\n"+ "write $newUsers to 'newUsers.json';");
  SopremoPlan expectedPlan=new SopremoPlan();
  Source old=new Source("oldUsers.json");
  Source current=new Source("currentUsers.json");
  Difference difference=new Difference().withInputs(current,old);
  Sink output=new Sink("newUsers.json").withInputs(difference);
  expectedPlan.setSinks(output);
  assertEquals(expectedPlan,actualPlan);
}
