{
  final List<InstanceType> instanceTypes=Lists.newArrayList();
  int count=1;
  while (true) {
    final String key=INSTANCE_TYPE_PREFIX_KEY + Integer.toString(count);
    String descr=GlobalConfiguration.getString(key,null);
    if (descr == null) {
      if (count == 1) {
        LOG.error("Configuration does not contain at least one definition for an instance type, using default " + DEFAULT_INSTANCE_TYPE);
        descr=DEFAULT_INSTANCE_TYPE;
      }
 else {
        break;
      }
    }
    try {
      instanceTypes.add(InstanceType.getTypeFromString(descr));
    }
 catch (    Throwable t) {
      LOG.error("Error parsing " + key + ":"+ descr,t);
    }
    ++count;
  }
  Collections.sort(instanceTypes,new Comparator<InstanceType>(){
    @Override public int compare(    InstanceType o1,    InstanceType o2){
      return o1.getPricePerHour() - o2.getPricePerHour();
    }
  }
);
  return instanceTypes.toArray(new InstanceType[0]);
}
