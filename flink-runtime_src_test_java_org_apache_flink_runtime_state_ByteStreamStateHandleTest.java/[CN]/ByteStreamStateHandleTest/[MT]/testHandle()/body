{
  final ClassLoader cl=this.getClass().getClassLoader();
  MockHandle handle;
  try {
    handle=new MockHandle(null);
    fail();
  }
 catch (  RuntimeException e) {
  }
  handle=new MockHandle(1);
  assertEquals(1,handle.getState(cl));
  assertTrue(handle.stateFetched());
  assertFalse(handle.isWritten());
  assertFalse(handle.discarded);
  MockHandle handleDs=serializeDeserialize(handle);
  assertEquals(1,handle.getState(cl));
  assertTrue(handle.stateFetched());
  assertTrue(handle.isWritten());
  assertTrue(handle.generatedOutput);
  assertFalse(handle.discarded);
  assertFalse(handleDs.stateFetched());
  assertTrue(handleDs.isWritten());
  assertFalse(handleDs.generatedOutput);
  assertFalse(handle.discarded);
  try {
    handleDs.getState(cl);
    fail();
  }
 catch (  UnsupportedOperationException e) {
  }
  MockHandle handleDs2=serializeDeserialize(handleDs);
  assertFalse(handleDs2.stateFetched());
  assertTrue(handleDs2.isWritten());
  assertFalse(handleDs.generatedOutput);
  assertFalse(handleDs2.generatedOutput);
  assertFalse(handleDs2.discarded);
  handleDs2.discardState();
  assertTrue(handleDs2.discarded);
}
