{
  super(input,TypeExtractor.getFlatMapReturnTypes(function,input.getType()));
  if (function == null)   throw new NullPointerException("FlatMap function must not be null.");
  this.function=function;
}
