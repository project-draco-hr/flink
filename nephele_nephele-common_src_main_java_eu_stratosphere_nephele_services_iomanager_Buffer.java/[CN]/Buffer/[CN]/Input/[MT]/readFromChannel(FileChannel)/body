{
  if (!isBound()) {
    throw new UnboundMemoryBackedException();
  }
  int limit=(int)Math.min(memory.size(),channel.size() - channel.position());
  if (limit < 1) {
    reset(0);
    return;
  }
  channel.read(memory.wrap(0,limit));
  int readableBytes=0, currentObjectLength=0;
  while (readableBytes + currentObjectLength <= limit) {
    readableBytes+=currentObjectLength;
    if (readableBytes + 4 >= limit) {
      break;
    }
    currentObjectLength=4 + memory.randomAccessView.getInt(readableBytes);
  }
  reset(readableBytes);
  channel.position(channel.position() - (limit - readableBytes));
}
