{
  final LocalBufferPool bufferPool=new LocalBufferPool(GLOBAL_BUFFER_POOL,NUM_BUFFERS);
  Assert.assertEquals(0,bufferPool.numRequestedBuffers());
  Buffer[] requestedBuffers=new Buffer[NUM_BUFFERS];
  for (int i=0; i < NUM_BUFFERS; i++) {
    requestedBuffers[i]=bufferPool.requestBuffer(BUFFER_SIZE);
  }
  Assert.assertEquals("Expected no available buffer in buffer pool.",0,bufferPool.numAvailableBuffers());
  Assert.assertNull("Expected null return value for buffer request with no available buffer.",bufferPool.requestBuffer(BUFFER_SIZE));
  for (  Buffer buffer : requestedBuffers) {
    buffer.recycleBuffer();
  }
  bufferPool.destroy();
}
