{
  List<ChannelAccess<?,?>> channelAccesses=new ArrayList<ChannelAccess<?,?>>(channelIDs.size());
  MergeIterator mergeIterator=getMergingIterator(channelIDs,readBuffers,channelAccesses);
  final LinkedBlockingQueue<MemorySegment> returnQueue=new LinkedBlockingQueue<MemorySegment>();
  final Channel.ID mergedChannelID=this.ioManager.createChannel();
  final BlockChannelWriter writer=this.ioManager.createBlockChannelWriter(mergedChannelID,returnQueue);
  registerOpenChannelToBeRemovedAtShudown(writer);
  final ChannelWriterOutputView output=new ChannelWriterOutputView(writer,writeBuffers,writeBufferSize);
  PactRecord rec=new PactRecord();
  while (mergeIterator.next(rec)) {
    rec.write(output);
  }
  output.close();
  unregisterOpenChannelToBeRemovedAtShudown(writer);
  registerChannelToBeRemovedAtShudown(mergedChannelID);
  for (int i=0; i < channelAccesses.size(); i++) {
    unregisterOpenChannelToBeRemovedAtShudown(channelAccesses.get(i));
  }
  return mergedChannelID;
}
