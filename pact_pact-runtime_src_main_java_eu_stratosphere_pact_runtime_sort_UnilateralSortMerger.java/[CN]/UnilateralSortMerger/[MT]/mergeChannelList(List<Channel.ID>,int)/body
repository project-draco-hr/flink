{
  int channelsToMergePerStep=((channelIDs.size() / (((int)Math.floor(((double)channelIDs.size()) / ((double)maxNumFileHandles))) + 1)) + 1);
  ArrayList<Channel.ID> mergedChannelIDs=new ArrayList<Channel.ID>();
  ArrayList<Channel.ID> channelsToMerge;
  while (!channelIDs.isEmpty()) {
    channelsToMerge=new ArrayList<Channel.ID>();
    for (int i=0; (i < channelsToMergePerStep && i < channelIDs.size()); i++) {
      channelsToMerge.add(channelIDs.get(i));
    }
    mergedChannelIDs.add(mergeChannels(channelsToMerge,ioMemorySize));
    channelIDs.removeAll(channelsToMerge);
  }
  return mergedChannelIDs;
}
