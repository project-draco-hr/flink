{
  File f;
  do {
    f=new File(dir + "/" + randomFileName());
  }
 while (f.exists());
  f.getParentFile().mkdirs();
  f.createNewFile();
  f.deleteOnExit();
  BufferedWriter out=new BufferedWriter(new FileWriter(f));
  try {
    out.write(contents);
  }
  finally {
    out.close();
  }
  return f.toURI().toString();
}
