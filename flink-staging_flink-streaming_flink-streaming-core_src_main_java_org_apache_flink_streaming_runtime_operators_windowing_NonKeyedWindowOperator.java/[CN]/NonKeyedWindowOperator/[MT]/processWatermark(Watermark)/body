{
  Set<Long> toRemove=new HashSet<>();
  for (  Map.Entry<Long,Set<Context>> triggers : watermarkTimers.entrySet()) {
    if (triggers.getKey() <= mark.getTimestamp()) {
      for (      Context context : triggers.getValue()) {
        Trigger.TriggerResult triggerResult=context.onEventTime(triggers.getKey());
        processTriggerResult(triggerResult,context.window);
      }
      toRemove.add(triggers.getKey());
    }
  }
  for (  Long l : toRemove) {
    watermarkTimers.remove(l);
  }
  output.emitWatermark(mark);
}
