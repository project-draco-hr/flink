{
  if (notAcked(id,channel)) {
    int[] acks=ackCounter.get(id);
    acks[channel + 1]=0;
    acks[0]++;
    StreamRecord newRecord=addToChannel(id,channel);
    if (acks[0] == numberOfEffectiveChannels.length) {
      remove(id);
    }
    return newRecord;
  }
 else {
    return null;
  }
}
