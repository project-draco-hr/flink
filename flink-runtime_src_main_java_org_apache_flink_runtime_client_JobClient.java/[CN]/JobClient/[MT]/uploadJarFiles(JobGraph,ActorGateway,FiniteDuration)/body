{
  if (jobGraph.hasUsercodeJarFiles()) {
    Future<Object> futureBlobPort=jobManagerGateway.ask(JobManagerMessages.getRequestBlobManagerPort(),timeout);
    int port;
    try {
      Object result=Await.result(futureBlobPort,timeout);
      if (result instanceof Integer) {
        port=(Integer)result;
      }
 else {
        throw new Exception("Expected port number (int) as answer, received " + result);
      }
    }
 catch (    Exception e) {
      throw new IOException("Could not retrieve the JobManager's blob port.",e);
    }
    Option<String> jmHost=jobManagerGateway.actor().path().address().host();
    String jmHostname=jmHost.isDefined() ? jmHost.get() : "localhost";
    InetSocketAddress serverAddress=new InetSocketAddress(jmHostname,port);
    jobGraph.uploadRequiredJarFiles(serverAddress);
  }
}
