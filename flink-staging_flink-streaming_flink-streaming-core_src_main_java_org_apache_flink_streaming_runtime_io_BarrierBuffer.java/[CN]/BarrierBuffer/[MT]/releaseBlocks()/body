{
  if (LOG.isDebugEnabled()) {
    LOG.debug("Releasing blocks");
  }
  for (int i=0; i < blockedChannels.length; i++) {
    blockedChannels[i]=false;
  }
  numBarriersReceived=0;
  if (currentBuffered == null) {
    currentBuffered=bufferSpiller.rollOver();
    if (currentBuffered != null) {
      currentBuffered.open();
    }
  }
 else {
    BufferSpiller.SpilledBufferOrEventSequence bufferedNow=bufferSpiller.rollOverWithNewBuffer();
    if (bufferedNow != null) {
      bufferedNow.open();
      queuedBuffered.addFirst(currentBuffered);
      currentBuffered=bufferedNow;
    }
  }
}
