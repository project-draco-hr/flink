{
  if (userFunction instanceof Checkpointed) {
    ((Checkpointed)userFunction).restoreState(snapshots.f0.getState());
  }
  if (snapshots.f1 != null) {
    for (    Entry<String,OperatorStateHandle> snapshot : snapshots.f1.entrySet()) {
      StreamOperatorState restoredOpState=runtimeContext.getState(snapshot.getKey(),snapshot.getValue().isPartitioned());
      StateHandle<Serializable> checkpointHandle=snapshot.getValue();
      restoredOpState.restoreState(checkpointHandle);
    }
  }
}
