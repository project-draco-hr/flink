{
  if (userFunction instanceof Checkpointed && snapshots.f0 != null) {
    ((Checkpointed)userFunction).restoreState(snapshots.f0.getState(runtimeContext.getUserCodeClassLoader()));
  }
  if (snapshots.f1 != null) {
    for (    Entry<String,OperatorStateHandle> snapshot : snapshots.f1.entrySet()) {
      StreamOperatorState restoredOpState=runtimeContext.getState(snapshot.getKey(),snapshot.getValue().isPartitioned());
      StateHandle<Serializable> checkpointHandle=snapshot.getValue();
      restoredOpState.restoreState(checkpointHandle,runtimeContext.getUserCodeClassLoader());
    }
  }
}
