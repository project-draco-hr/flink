{
  if (userFunction instanceof Checkpointed) {
    ((Checkpointed)userFunction).restoreState(snapshots.f0.getState());
  }
  if (snapshots.f1 != null) {
    for (    Entry<String,PartitionedStateHandle> snapshot : snapshots.f1.entrySet()) {
      Map<Serializable,StateHandle<Serializable>> handles=snapshot.getValue().getState();
      StreamOperatorState restoredState=runtimeContext.getState(snapshot.getKey(),!(handles instanceof ImmutableMap));
      restoredState.restoreState(snapshot.getValue().getState());
    }
  }
}
