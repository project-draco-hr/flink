{
  if (vertex.hasNext()) {
    Tuple2<VertexKey,VertexValue> vertexState=vertex.next();
    @SuppressWarnings("unchecked") Iterator<Tuple2<?,Message>> downcastIter=(Iterator<Tuple2<?,Message>>)(Iterator<?>)messages;
    messageIter.setSource(downcastIter);
    vertexUpdateFunction.setOutput(vertexState,out);
    vertexUpdateFunction.updateVertex(vertexState.f0,vertexState.f1,messageIter);
  }
 else {
    if (messages.hasNext()) {
      String message="Target vertex does not exist!.";
      try {
        Tuple2<VertexKey,Message> next=messages.next();
        message="Target vertex '" + next.f0 + "' does not exist!.";
      }
 catch (      Throwable t) {
      }
      throw new Exception(message);
    }
 else {
      throw new Exception();
    }
  }
}
