{
  final ManagementGraph testGraph=constructTestManagementGraph();
  Iterator<ManagementVertex> it=new ManagementGraphIterator(testGraph,true);
  ManagementVertex[] expectedOrder=new ManagementVertex[5];
  expectedOrder[0]=testGraph.getStage(0).getGroupVertex(0).getGroupMember(0);
  expectedOrder[1]=testGraph.getStage(0).getGroupVertex(1).getGroupMember(0);
  expectedOrder[2]=testGraph.getStage(1).getGroupVertex(0).getGroupMember(0);
  expectedOrder[3]=testGraph.getStage(1).getGroupVertex(1).getGroupMember(0);
  expectedOrder[4]=testGraph.getStage(0).getGroupVertex(1).getGroupMember(1);
  checkManagementVertexOrder(it,expectedOrder);
  it=new ManagementGraphIterator(testGraph,0,false,true);
  checkManagementVertexOrder(it,expectedOrder);
  it=new ManagementGraphIterator(testGraph,expectedOrder[0],true);
  checkManagementVertexOrder(it,expectedOrder);
  expectedOrder=new ManagementVertex[3];
  expectedOrder[0]=testGraph.getStage(0).getGroupVertex(0).getGroupMember(0);
  expectedOrder[1]=testGraph.getStage(0).getGroupVertex(1).getGroupMember(0);
  expectedOrder[2]=testGraph.getStage(0).getGroupVertex(1).getGroupMember(1);
  it=new ManagementGraphIterator(testGraph,0,true,true);
  checkManagementVertexOrder(it,expectedOrder);
  it=new ManagementGraphIterator(testGraph,false);
  expectedOrder=new ManagementVertex[5];
  expectedOrder[0]=testGraph.getStage(1).getGroupVertex(1).getGroupMember(0);
  expectedOrder[1]=testGraph.getStage(1).getGroupVertex(0).getGroupMember(0);
  expectedOrder[2]=testGraph.getStage(0).getGroupVertex(1).getGroupMember(0);
  expectedOrder[3]=testGraph.getStage(0).getGroupVertex(0).getGroupMember(0);
  expectedOrder[4]=testGraph.getStage(0).getGroupVertex(1).getGroupMember(1);
  checkManagementVertexOrder(it,expectedOrder);
  it=new ManagementGraphIterator(testGraph,1,true,false);
  expectedOrder=new ManagementVertex[2];
  expectedOrder[0]=testGraph.getStage(1).getGroupVertex(1).getGroupMember(0);
  expectedOrder[1]=testGraph.getStage(1).getGroupVertex(0).getGroupMember(0);
  checkManagementVertexOrder(it,expectedOrder);
}
