{
  component.setNumberOfSubtasks(parallelism);
  component.setNumberOfSubtasksPerInstance(subtasksPerInstance);
  if (parallelism > maxParallelism) {
    maxParallelism=parallelism;
    maxParallelismVertexName=componentName;
  }
  Configuration config=new TaskConfig(component.getConfiguration()).getConfiguration();
  config.setClass("userfunction",InvokableClass);
  config.setString("componentName",componentName);
  config.setInteger("batchSize",batchSize);
  config.setLong("batchTimeout",batchTimeout);
  config.setInteger("faultToleranceType",faultToleranceType.id);
  components.put(componentName,component);
  numberOfInstances.put(componentName,parallelism);
  return config;
}
