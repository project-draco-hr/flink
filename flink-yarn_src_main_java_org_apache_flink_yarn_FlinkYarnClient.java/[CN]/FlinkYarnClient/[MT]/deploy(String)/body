{
  UserGroupInformation.setConfiguration(conf);
  UserGroupInformation ugi=UserGroupInformation.getCurrentUser();
  if (UserGroupInformation.isSecurityEnabled()) {
    return ugi.doAs(new PrivilegedExceptionAction<AbstractFlinkYarnCluster>(){
      @Override public AbstractFlinkYarnCluster run() throws Exception {
        return deployInternal(clusterName);
      }
    }
);
  }
 else {
    return deployInternal(clusterName);
  }
}
