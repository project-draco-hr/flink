{
  if (!isWritten) {
    ObjectOutputStream stream=new ObjectOutputStream(getOutputStream());
    try {
      stream.writeObject(state);
      isWritten=true;
    }
  finally {
      stream.close();
    }
  }
  oos.defaultWriteObject();
}
