{
  if (!hasRequestedPartitions) {
    if (totalNumberOfInputChannels != inputChannels.size()) {
      throw new IllegalStateException("Mismatch between number of total input channels and the currently number of set input channels.");
    }
synchronized (requestLock) {
      for (      InputChannel inputChannel : inputChannels.values()) {
        inputChannel.requestIntermediateResultPartition(queueToRequest);
      }
    }
    hasRequestedPartitions=true;
  }
}
