{
  checkNotNull(readers);
  checkArgument(readers.length >= 2,"Union buffer reader must be initialized with at least two individual buffer readers");
  this.readers=readers;
  this.remainingReaders=new HashSet<BufferReaderBase>(readers.length + 1,1.0F);
  this.dataAvailabilityListener=new DataAvailabilityListener(this);
  int currentChannelIndexOffset=0;
  for (int i=0; i < readers.length; i++) {
    BufferReaderBase reader=readers[i];
    reader.subscribeToReader(dataAvailabilityListener);
    remainingReaders.add(reader);
    readerToIndexOffsetMap.put(reader,currentChannelIndexOffset);
    totalNumInputChannels+=reader.getNumberOfInputChannels();
    currentChannelIndexOffset+=reader.getNumberOfInputChannels();
  }
}
