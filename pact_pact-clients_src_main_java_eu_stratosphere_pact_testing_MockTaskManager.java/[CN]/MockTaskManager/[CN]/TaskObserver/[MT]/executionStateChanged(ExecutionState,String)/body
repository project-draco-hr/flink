{
  if (executionState == ExecutionState.CANCELING) {
    return;
  }
  final ExecutionGraph eg=MockTaskManager.INSTANCE.jobGraphs.get(this.environment.getJobID());
  if (eg == null) {
    LOG.error("Cannot find execution graph for ID " + this.environment.getJobID() + " to change state to "+ executionState);
    return;
  }
  final ExecutionVertex vertex=eg.getVertexByID(this.id);
  if (vertex == null) {
    LOG.error("Cannot find vertex with ID " + this.id + " of job "+ eg.getJobID()+ " to change state to "+ executionState);
    return;
  }
synchronized (eg) {
    vertex.updateExecutionState(executionState,optionalMessage);
  }
  if (executionState == ExecutionState.CANCELED || executionState == ExecutionState.FINISHED || executionState == ExecutionState.FAILED)   MockTaskManager.this.finishedTasks.put(this.id,this.environment);
}
