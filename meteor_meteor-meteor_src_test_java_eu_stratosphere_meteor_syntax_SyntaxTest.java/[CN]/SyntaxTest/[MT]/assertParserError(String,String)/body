{
  try {
    SopremoPlan plan=new QueryParser().tryParse(query);
    Assert.fail("Parsing did not fail but produced " + plan);
  }
 catch (  QueryParserException e) {
    if (e.getRawMessage().equals(AbstractQueryParser.DEFAULT_ERROR_MESSAGE)) {
      e.printStackTrace();
      Assert.fail("Generic fail message " + e);
    }
 else     Assert.assertTrue(String.format("Expected parse error message to contain %s, but was %s",partialMessage,e.getRawMessage()),e.getRawMessage().contains(partialMessage));
  }
}
