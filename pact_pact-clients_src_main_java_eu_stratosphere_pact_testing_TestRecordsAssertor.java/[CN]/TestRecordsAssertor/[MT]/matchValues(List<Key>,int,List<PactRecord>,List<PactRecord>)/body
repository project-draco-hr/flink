{
  List<Key> actualKeys=new ArrayList<Key>(currentKeys);
  PactRecord actualRecord=null;
  while (this.actualIterator.hasNext()) {
    actualRecord=this.actualIterator.next();
    this.setKeys(actualKeys,actualRecord);
    if (!currentKeys.equals(actualKeys))     break;
    actualValuesWithCurrentKey.add(actualRecord);
    actualRecord=null;
  }
  if (actualValuesWithCurrentKey.isEmpty())   throw new ArrayComparisonFailure("Unexpected value for key " + currentKeys,new AssertionFailedError(Assert.format(" ",stringify(expectedValuesWithCurrentKey.iterator(),this.schema),stringify(actualRecord,this.schema))),itemIndex + expectedValuesWithCurrentKey.size() - 1);
  this.fuzzyMatcher.removeMatchingValues(this.similarityMap,this.schema,expectedValuesWithCurrentKey,actualValuesWithCurrentKey);
  if (!expectedValuesWithCurrentKey.isEmpty() || !actualValuesWithCurrentKey.isEmpty())   throw new ArrayComparisonFailure("Unexpected values for key " + currentKeys + ": ",new AssertionFailedError(Assert.format(" ",stringify(expectedValuesWithCurrentKey.iterator(),this.schema),stringify(actualValuesWithCurrentKey.iterator(),this.schema))),itemIndex - expectedValuesWithCurrentKey.size());
  if (actualRecord != null)   actualValuesWithCurrentKey.add(actualRecord);
}
