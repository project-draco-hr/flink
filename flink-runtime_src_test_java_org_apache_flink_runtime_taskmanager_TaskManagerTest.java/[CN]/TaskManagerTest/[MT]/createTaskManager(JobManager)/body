{
  InetAddress localhost=InetAddress.getLocalHost();
  InetSocketAddress jmMockAddress=new InetSocketAddress(localhost,55443);
  Configuration cfg=new Configuration();
  cfg.setInteger(ConfigConstants.TASK_MANAGER_MEMORY_SIZE_KEY,10);
  GlobalConfiguration.includeConfiguration(cfg);
  TaskManager tm=new TaskManager(ExecutionMode.LOCAL,jm,jm,jm,jm,jmMockAddress,localhost);
  while (tm.getRegisteredId() == null) {
    Thread.sleep(10);
  }
  return tm;
}
