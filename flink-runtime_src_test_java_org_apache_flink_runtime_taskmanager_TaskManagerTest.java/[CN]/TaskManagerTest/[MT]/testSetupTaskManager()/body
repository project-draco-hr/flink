{
  JobManager jobManager=null;
  TaskManager tm=null;
  try {
    jobManager=getJobManagerMockBase();
    tm=createTaskManager(jobManager);
    JobID jid=new JobID();
    JobVertexID vid=new JobVertexID();
    ExecutionAttemptID eid=new ExecutionAttemptID();
    TaskDeploymentDescriptor tdd=new TaskDeploymentDescriptor(jid,vid,eid,"TestTask",2,7,new Configuration(),new Configuration(),TestInvokableCorrect.class.getName(),Collections.<GateDeploymentDescriptor>emptyList(),Collections.<GateDeploymentDescriptor>emptyList(),new ArrayList<BlobKey>(),0);
    TaskOperationResult result=tm.submitTask(tdd);
    assertTrue(result.getDescription(),result.isSuccess());
    assertEquals(eid,result.getExecutionId());
    jobManager.shutdown();
    tm.shutdown();
  }
 catch (  Exception e) {
    e.printStackTrace();
    fail(e.getMessage());
  }
 finally {
    if (jobManager != null) {
      jobManager.shutdown();
    }
    if (tm != null) {
      tm.shutdown();
    }
  }
}
