{
  final int numberOfCalls=5 + this.r.nextInt(5);
  final LinkedList<Tuple1<Integer>> expectedResult=new LinkedList<Tuple1<Integer>>();
  expectedResult.add(new Tuple1<Integer>(numberOfCalls - 1));
  final IRichSpout spout=new FiniteTestSpout(numberOfCalls);
  final StormFiniteSpoutWrapper<Tuple1<Integer>> spoutWrapper=new StormFiniteSpoutWrapper<Tuple1<Integer>>(spout);
  spoutWrapper.setRuntimeContext(mock(StreamingRuntimeContext.class));
  spoutWrapper.cancel();
  final TestCollector collector=new TestCollector();
  spoutWrapper.run(collector);
  Assert.assertEquals(expectedResult,collector.result);
}
