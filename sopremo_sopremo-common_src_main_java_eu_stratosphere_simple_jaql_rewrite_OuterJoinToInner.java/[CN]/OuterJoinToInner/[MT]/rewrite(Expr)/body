{
  JoinExpr join_expr=(JoinExpr)expr;
  if (join_expr.numBindings() > 2)   return false;
  Expr parent=join_expr.parent();
  boolean left_preserve=join_expr.binding(0).preserve;
  boolean right_preserve=join_expr.binding(1).preserve;
  if (!left_preserve && !right_preserve)   return false;
  if (!(parent instanceof BindingExpr) || !(parent.parent() instanceof FilterExpr))   return false;
  FilterExpr fe=(FilterExpr)parent.parent();
  if (fe.externalEffectPredicates())   return false;
  return OuterToInnerConversion(join_expr,fe);
}
