{
  last=element;
  Object key=keySelector.getKey(element);
synchronized (groupedDiscretizers) {
    StreamDiscretizer<IN> groupDiscretizer=groupedDiscretizers.get(key);
    if (groupDiscretizer == null) {
      groupDiscretizer=makeNewGroup(key);
      groupedDiscretizers.put(key,groupDiscretizer);
    }
    groupDiscretizer.processRealElement(element);
  }
}
