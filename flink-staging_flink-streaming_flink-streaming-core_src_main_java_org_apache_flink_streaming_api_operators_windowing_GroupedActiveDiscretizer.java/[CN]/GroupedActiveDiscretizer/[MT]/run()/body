{
  while (isRunning && readNext() != null) {
    last=copy(nextObject);
    Object key=keySelector.getKey(nextObject);
synchronized (groupedDiscretizers) {
      StreamDiscretizer<IN> groupDiscretizer=groupedDiscretizers.get(key);
      if (groupDiscretizer == null) {
        groupDiscretizer=makeNewGroup(key);
        groupedDiscretizers.put(key,groupDiscretizer);
      }
      groupDiscretizer.processRealElement(nextObject);
    }
  }
  for (  StreamDiscretizer<IN> group : groupedDiscretizers.values()) {
    group.emitWindow();
  }
}
