{
  if (source == this) {
    return FOUND_SOURCE;
  }
  int res=this.input.getSource().hasDamOnPathDownTo(source);
  if (res == FOUND_SOURCE_AND_DAM) {
    return FOUND_SOURCE_AND_DAM;
  }
 else   if (res == FOUND_SOURCE && (this.input.getLocalStrategy().dams() || this.input.getTempMode() == TempMode.MATERIALIZE || getDriverStrategy().firstDam() == DamBehavior.FULL_DAM)) {
    return FOUND_SOURCE_AND_DAM;
  }
 else {
    return res;
  }
}
