{
  int count=parameters.getInteger("#outputFormats",0);
  for (int index=1; index <= count; index++) {
    final Class<? extends OutputFormat> outputFormatClass=(Class<? extends OutputFormat>)parameters.getClass("outputFormat" + index,null);
    String path=parameters.getString("outputPath" + index,null);
    final String subconfigurationString=parameters.getString("outputConfiguration" + index,null);
    Configuration subconfiguration=subconfigurationString == null ? null : FormatUtil.fromString(Configuration.class,subconfigurationString);
    try {
      this.formats.add(FormatUtil.createOutputFormat(outputFormatClass,path,subconfiguration));
    }
 catch (    final IOException e) {
      throw new IllegalStateException("Cannot open configured output path " + path);
    }
  }
}
