{
  final Long now=Long.valueOf(System.currentTimeMillis());
synchronized (this.recentlyRemovedChannels) {
    final int numberOfOutputGates=environment.getNumberOfOutputGates();
    for (int i=0; i < numberOfOutputGates; ++i) {
      final OutputGate<? extends Record> outputGate=environment.getOutputGate(i);
      final int numberOfOutputChannels=outputGate.getNumberOfOutputChannels();
      for (int j=0; j < numberOfOutputChannels; ++j) {
        this.recentlyRemovedChannels.put(outputGate.getOutputChannel(j).getID(),now);
      }
    }
    final int numberOfInputGates=environment.getNumberOfInputGates();
    for (int i=0; i < numberOfInputGates; ++i) {
      final InputGate<? extends Record> inputGate=environment.getInputGate(i);
      final int numberOfInputChannels=inputGate.getNumberOfInputChannels();
      for (int j=0; j < numberOfInputChannels; ++j) {
        this.recentlyRemovedChannels.put(inputGate.getInputChannel(j).getID(),now);
      }
    }
  }
}
