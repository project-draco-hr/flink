{
synchronized (this.emptyReadBuffers) {
    while (this.emptyReadBuffers.size() < bufferPairRequest.getNumberOfRequestedByteBuffers()) {
      this.emptyReadBuffers.wait();
    }
    Buffer compressedDataBuffer=null;
    Buffer uncompressedDataBuffer=null;
    if (bufferPairRequest.getCompressedDataBufferSize() >= 0) {
      compressedDataBuffer=BufferFactory.createFromMemory(bufferPairRequest.getCompressedDataBufferSize(),this.emptyReadBuffers.poll(),this.emptyReadBuffers,true);
    }
    if (bufferPairRequest.getUncompressedDataBufferSize() >= 0) {
      uncompressedDataBuffer=BufferFactory.createFromMemory(bufferPairRequest.getUncompressedDataBufferSize(),this.emptyReadBuffers.poll(),this.emptyReadBuffers,true);
    }
    return new BufferPairResponse(compressedDataBuffer,uncompressedDataBuffer);
  }
}
