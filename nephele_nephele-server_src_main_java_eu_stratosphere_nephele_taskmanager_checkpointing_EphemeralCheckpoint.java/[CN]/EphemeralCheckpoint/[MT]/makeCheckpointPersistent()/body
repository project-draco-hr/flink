{
  LOG.info("Creating permanent checkpoint for vertex " + this.executionVertexID);
  try {
    final Iterator<ChannelCheckpoint> it=this.channelCheckpoints.values().iterator();
    while (it.hasNext()) {
      ChannelCheckpoint next=it.next();
      LOG.info("Creating permanent channel " + next.getSourceChannelID());
      this.checkpointManager.reportPersistenCheckpoint(this.executionVertexID,next.getSourceChannelID());
      next.makePersistent();
    }
    LOG.info("All Checkpoints persistent");
  }
 catch (  IOException ioe) {
    ioe.printStackTrace();
    LOG.error(ioe);
    discardCheckpoint();
    return;
  }
  this.checkpointingDecision=CheckpointingDecisionState.CHECKPOINTING;
}
