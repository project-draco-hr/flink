{
  expression=process(expression);
  if (expression instanceof ContainerExpression) {
    List<EvaluationExpression> children=new ArrayList<EvaluationExpression>(((ContainerExpression)expression).getChildren());
    for (int index=0; index < children.size(); index++)     children.set(index,this.rewrite(children.get(index)));
    ((ContainerExpression)expression).setChildren(children);
  }
  for (  DynamicProperty<EvaluationExpression> property : ReflectUtil.getDynamicClass(expression.getClass()).getProperties(EvaluationExpression.class)) {
    EvaluationExpression propertyValue=property.get(expression);
    EvaluationExpression newValue=rewrite(propertyValue);
    if (propertyValue != newValue)     property.set(expression,newValue);
  }
  return expression;
}
