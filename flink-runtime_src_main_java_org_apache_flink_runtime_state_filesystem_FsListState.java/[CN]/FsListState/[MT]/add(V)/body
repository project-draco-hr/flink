{
  Preconditions.checkState(currentKey != null,"No key set");
  if (currentNSState == null) {
    Preconditions.checkState(currentNamespace != null,"No namespace set");
    currentNSState=createNewNamespaceMap();
    state.put(currentNamespace,currentNSState);
  }
  ArrayList<V> list=currentNSState.get(currentKey);
  if (list == null) {
    list=new ArrayList<>();
    currentNSState.put(currentKey,list);
  }
  list.add(value);
}
