{
  if (this.executingThread == null) {
    this.executingThread=Thread.currentThread();
  }
  if (this.executingThread.isInterrupted()) {
    throw new InterruptedException();
  }
  if (this.outputGateListeners != null) {
    for (    final OutputGateListener outputGateListener : this.outputGateListeners) {
      outputGateListener.recordEmitted(record);
    }
  }
  if (this.isBroadcast) {
    if (getChannelType() == ChannelType.INMEMORY) {
      final int numberOfOutputChannels=this.outputChannels.size();
      for (int i=0; i < numberOfOutputChannels; ++i) {
        this.outputChannels.get(i).writeRecord(record);
      }
    }
 else {
      this.outputChannels.get(0).writeRecord(record);
    }
  }
 else {
    final int numberOfOutputChannels=this.outputChannels.size();
    final int[] selectedOutputChannels=this.channelSelector.selectChannels(record,numberOfOutputChannels);
    if (selectedOutputChannels == null) {
      return;
    }
    for (int i=0; i < selectedOutputChannels.length; ++i) {
      if (selectedOutputChannels[i] < numberOfOutputChannels) {
        final AbstractOutputChannel<T> outputChannel=this.outputChannels.get(selectedOutputChannels[i]);
        outputChannel.writeRecord(record);
      }
    }
  }
}
