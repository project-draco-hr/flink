{
  MockHandle<Serializable> h1=new MockHandle<Serializable>(1);
  OperatorStateHandle opHandle=new OperatorStateHandle(h1,true);
  assertEquals(1,opHandle.getState(this.getClass().getClassLoader()));
  OperatorStateHandle dsHandle=serializeDeserialize(opHandle);
  MockHandle<Serializable> h2=(MockHandle<Serializable>)dsHandle.getHandle();
  assertFalse(h2.discarded);
  assertNotNull(h1.state);
  assertNull(h2.state);
  dsHandle.discardState();
  assertTrue(h2.discarded);
}
