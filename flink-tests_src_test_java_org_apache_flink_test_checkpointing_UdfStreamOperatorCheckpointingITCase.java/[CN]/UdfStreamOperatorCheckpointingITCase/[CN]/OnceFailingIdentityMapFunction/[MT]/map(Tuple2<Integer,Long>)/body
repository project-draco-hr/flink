{
  if (!hasFailed && count.value() >= failurePos) {
    hasFailed=true;
    throw new Exception("Test Failure");
  }
  count.update(count.value() + 1);
  return value;
}
