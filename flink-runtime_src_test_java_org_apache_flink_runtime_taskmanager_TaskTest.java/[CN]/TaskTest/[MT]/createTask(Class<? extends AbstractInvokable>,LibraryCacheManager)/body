{
  ResultPartitionManager partitionManager=mock(ResultPartitionManager.class);
  ResultPartitionConsumableNotifier consumableNotifier=mock(ResultPartitionConsumableNotifier.class);
  NetworkEnvironment network=mock(NetworkEnvironment.class);
  when(network.getPartitionManager()).thenReturn(partitionManager);
  when(network.getPartitionConsumableNotifier()).thenReturn(consumableNotifier);
  when(network.getDefaultIOMode()).thenReturn(IOManager.IOMode.SYNC);
  when(network.createKvStateTaskRegistry(any(JobID.class),any(JobVertexID.class))).thenReturn(mock(TaskKvStateRegistry.class));
  return createTask(invokable,libCache,network);
}
