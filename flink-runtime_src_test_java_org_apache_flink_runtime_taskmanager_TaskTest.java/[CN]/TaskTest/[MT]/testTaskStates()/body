{
  try {
    final JobID jid=new JobID();
    final JobVertexID vid=new JobVertexID();
    final ExecutionAttemptID eid=new ExecutionAttemptID();
    final TaskManager taskManager=mock(TaskManager.class);
    final RuntimeEnvironment env=mock(RuntimeEnvironment.class);
    Task task=new Task(jid,vid,2,7,eid,"TestTask",taskManager);
    task.setEnvironment(env);
    assertEquals(ExecutionState.DEPLOYING,task.getExecutionState());
    task.cancelExecution();
    assertEquals(ExecutionState.CANCELED,task.getExecutionState());
    assertFalse(task.startExecution());
    assertEquals(ExecutionState.CANCELED,task.getExecutionState());
    assertFalse(task.markAsFinished());
    assertEquals(ExecutionState.CANCELED,task.getExecutionState());
    task.markFailed(new Exception("test"));
    assertTrue(ExecutionState.CANCELED == task.getExecutionState());
    verify(taskManager,times(1)).notifyExecutionStateChange(jid,eid,ExecutionState.CANCELED,null);
  }
 catch (  Exception e) {
    e.printStackTrace();
    fail(e.getMessage());
  }
}
