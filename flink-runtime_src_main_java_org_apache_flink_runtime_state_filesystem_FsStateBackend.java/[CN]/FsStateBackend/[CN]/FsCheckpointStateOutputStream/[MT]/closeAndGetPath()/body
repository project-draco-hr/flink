{
synchronized (this) {
    if (!closed) {
      closed=true;
      flush();
      outStream.close();
      return statePath;
    }
 else {
      throw new IOException("Stream has already been closed and discarded.");
    }
  }
}
