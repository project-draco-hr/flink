{
  if (t instanceof ParameterizedType && (Collector.class.isAssignableFrom((Class<?>)((ParameterizedType)t).getRawType()) || Iterable.class.isAssignableFrom((Class<?>)((ParameterizedType)t).getRawType()))) {
    return ((ParameterizedType)t).getActualTypeArguments()[0];
  }
  return t;
}
