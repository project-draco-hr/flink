{
  while (this.lockMap.putIfAbsent(id,LOCK_OBJECT) != null)   ;
  try {
    if (decrementReferenceCounter(id) == 0) {
      this.libraryManagerEntries.remove(id);
    }
  }
  finally {
    this.lockMap.remove(id);
  }
}
