{
  Random rand=new Random(RANDOM_SEED);
  Random rand2=new Random(RANDOM_SEED);
  MemorySegment segment=memoryManager.allocate(mockInvoke,MEMORY_SIZE);
  for (int i=0; i < MEMORY_SIZE; i++) {
    segment.outputView.writeByte(rand.nextInt());
  }
  rand.setSeed(RANDOM_SEED);
  for (int i=0; i < MEMORY_SIZE; i++) {
    if (segment.inputView.readByte() != (byte)(rand.nextInt() & 0xff)) {
      Assert.fail();
    }
    int skipCnt=rand2.nextInt(16);
    segment.inputView.skipBytes(skipCnt);
    for (int j=0; j < skipCnt; j++) {
      rand.nextInt();
    }
    i+=skipCnt;
  }
  memoryManager.release(segment);
}
