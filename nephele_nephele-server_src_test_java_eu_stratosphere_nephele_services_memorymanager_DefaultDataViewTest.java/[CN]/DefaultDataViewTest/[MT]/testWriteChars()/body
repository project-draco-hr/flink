{
  Random rand=new Random(RANDOM_SEED);
  MemorySegment segment=memoryManager.allocate(mockInvoke,MEMORY_SIZE);
  String str=generateRandomString(rand,32);
  int lengthSum=str.length() * 2;
  while (lengthSum < MEMORY_SIZE) {
    segment.outputView.writeChars(str);
    str=generateRandomString(rand,32);
    lengthSum+=str.length() * 2;
  }
  rand.setSeed(RANDOM_SEED);
  for (int i=0; i < lengthSum / 2; i++) {
    str=generateRandomString(rand,32);
    for (int j=0; j < str.length(); j++) {
      char c=str.charAt(j);
      if (segment.inputView.readChar() != c) {
        Assert.fail();
      }
    }
    i+=str.length();
  }
  memoryManager.release(segment);
}
