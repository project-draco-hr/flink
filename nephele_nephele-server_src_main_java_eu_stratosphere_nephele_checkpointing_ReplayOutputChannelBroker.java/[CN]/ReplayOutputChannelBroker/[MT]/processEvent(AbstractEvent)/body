{
  if (event instanceof ByteBufferedChannelCloseEvent) {
    LOG.info("Replay output broker received event to close channel");
  }
 else   if (event instanceof UnexpectedEnvelopeEvent) {
    final UnexpectedEnvelopeEvent uee=(UnexpectedEnvelopeEvent)event;
    if (uee.getExpectedSequenceNumber() > this.nextEnvelopeToSend) {
      this.nextEnvelopeToSend=uee.getExpectedSequenceNumber();
    }
  }
 else   if (event instanceof ReceiverNotFoundEvent) {
    final ReceiverNotFoundEvent rnfe=(ReceiverNotFoundEvent)event;
    LOG.warn("Cannot find receiver " + rnfe.getReceiverID() + " for envelope "+ rnfe.getSequenceNumber()+ ", next envelope to send is "+ this.nextEnvelopeToSend);
  }
 else {
    LOG.warn("Received unknown event: " + event);
  }
  getNext().processEvent(event);
}
