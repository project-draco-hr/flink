{
  MutableObjectIterator<Value> inputA=inputs[0];
  MutableObjectIterator<Value> inputB=inputs[1];
  ChannelStateTracker stateListenerA=stateListeners[0];
  ChannelStateTracker stateListenerB=stateListeners[1];
  IterationIterator iterationIterA=new IterationIterator(inputA,stateListenerA);
  iterationIterB=new IterationIterator(inputB,stateListenerB);
  while (!checkTermination(iterationIterA,iterationIterB)) {
    publishState(ChannelState.OPEN,getEnvironment().getOutputGate(0));
    runIteration(iterationIterA);
    if (stateListenerA.getState() == ChannelState.CLOSED && stateListenerB.getState() == ChannelState.CLOSED) {
      publishState(ChannelState.CLOSED,getEnvironment().getOutputGate(0));
    }
 else {
      throw new RuntimeException("Illegal state after iteration call");
    }
  }
}
