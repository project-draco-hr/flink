{
  try {
    TriggerTimer timer=new TriggerTimer();
    timer.scheduleTriggerAt(new Triggerable(){
      @Override public void trigger(      long timestamp){
      }
    }
,System.currentTimeMillis());
    assertEquals(1,TriggerTimer.TRIGGER_THREADS_GROUP.activeCount());
    timer.shutdown();
    long deadline=System.currentTimeMillis() + 2000;
    while (TriggerTimer.TRIGGER_THREADS_GROUP.activeCount() > 0 && System.currentTimeMillis() < deadline) {
      Thread.sleep(10);
    }
    assertEquals("Trigger timer thread did not properly shut down",0,TriggerTimer.TRIGGER_THREADS_GROUP.activeCount());
  }
 catch (  Exception e) {
    e.printStackTrace();
    fail(e.getMessage());
  }
}
