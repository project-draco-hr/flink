{
  String storageDirectory=config.getString(ConfigConstants.BLOB_STORAGE_DIRECTORY_KEY,null);
  this.storageDir=BlobUtils.initStorageDirectory(storageDirectory);
  LOG.info("Created BLOB server storage directory {}",storageDir);
  this.shutdownHook=BlobUtils.addShutdownHook(this,LOG);
  try {
    this.serverSocket=new ServerSocket(0);
    start();
    if (LOG.isInfoEnabled()) {
      LOG.info(String.format("Started BLOB server on port %d",this.serverSocket.getLocalPort()));
    }
  }
 catch (  IOException e) {
    throw new IOException("Could not create BlobServer with random port.",e);
  }
}
