{
  if (shutdownRequested.compareAndSet(false,true)) {
    try {
      this.serverSocket.close();
    }
 catch (    IOException ioe) {
      LOG.debug("Error while closing the server socket.",ioe);
    }
    try {
      join();
    }
 catch (    InterruptedException ie) {
      LOG.debug("Error while waiting for this thread to die.",ie);
    }
    FileUtils.deleteDirectory(storageDir);
    Runtime.getRuntime().removeShutdownHook(shutdownHook);
  }
}
