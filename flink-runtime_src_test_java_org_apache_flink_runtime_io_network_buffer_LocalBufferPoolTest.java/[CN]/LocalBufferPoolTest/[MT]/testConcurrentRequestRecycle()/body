{
  int numConcurrentTasks=128;
  int numBuffersToRequestPerTask=1024;
  localBufferPool.setNumBuffers(numConcurrentTasks);
  final ExecutorService executor=Executors.newCachedThreadPool();
  try {
    Future<Boolean>[] taskResults=new Future[numConcurrentTasks];
    for (int i=0; i < numConcurrentTasks; i++) {
      taskResults[i]=executor.submit(new BufferRequesterTask(localBufferPool,numBuffersToRequestPerTask));
    }
    for (int i=0; i < numConcurrentTasks; i++) {
      assertTrue(taskResults[i].get());
    }
  }
  finally {
    executor.shutdownNow();
  }
}
