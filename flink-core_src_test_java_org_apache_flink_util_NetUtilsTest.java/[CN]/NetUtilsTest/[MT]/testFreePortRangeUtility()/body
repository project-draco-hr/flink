{
  String rangeDefinition="50000-50050, 50100-50200,51234 ";
  Set<Integer> ports=NetUtils.getPortRangeFromString(rangeDefinition);
  Assert.assertEquals(51 + 101 + 1,ports.size());
  Assert.assertThat(ports,hasItems(50000,50001,50002,50050));
  Assert.assertThat(ports,hasItems(50100,50101,50110,50200,51234));
  Assert.assertThat(ports,not(hasItems(50051,50052,1337,50201,49999,50099)));
  ports=NetUtils.getPortRangeFromString(" 51234");
  Assert.assertEquals(1,ports.size());
  Assert.assertEquals(51234,(int)ports.iterator().next());
  ports=NetUtils.getPortRangeFromString("5,1,2,3,4");
  Assert.assertEquals(5,ports.size());
  Assert.assertThat(ports,hasItems(1,2,3,4,5));
  Throwable error=null;
  try {
    NetUtils.getPortRangeFromString("localhost");
  }
 catch (  Throwable t) {
    error=t;
  }
  Assert.assertTrue(error instanceof NumberFormatException);
  error=null;
  try {
    NetUtils.getPortRangeFromString("5-");
  }
 catch (  Throwable t) {
    error=t;
  }
  Assert.assertTrue(error instanceof NumberFormatException);
  error=null;
  try {
    NetUtils.getPortRangeFromString("-5");
  }
 catch (  Throwable t) {
    error=t;
  }
  Assert.assertTrue(error instanceof NumberFormatException);
  error=null;
  try {
    NetUtils.getPortRangeFromString(",5");
  }
 catch (  Throwable t) {
    error=t;
  }
  Assert.assertTrue(error instanceof NumberFormatException);
  error=null;
}
