{
  Configuration config=new Configuration();
  config.setBoolean(DecimalTextDoubleParser.SCIENTIFIC_NOTATION_ENABLED,false);
  byte[] recBytes="123.4|0.124|.623|1234|-12.34|123abc4|".getBytes();
  PactDouble d=new PactDouble();
  int startPos=0;
  startPos=parser.parseField(recBytes,startPos,recBytes.length,'|',d);
  assertTrue(startPos == 6);
  assertTrue(d.getValue() == 123.4);
  startPos=parser.parseField(recBytes,startPos,recBytes.length,'|',d);
  assertTrue(startPos == 12);
  assertTrue(d.getValue() == 0.124);
  startPos=parser.parseField(recBytes,startPos,recBytes.length,'|',d);
  assertTrue(startPos == 17);
  assertTrue(d.getValue() == 0.623);
  startPos=parser.parseField(recBytes,startPos,recBytes.length,'|',d);
  assertTrue(startPos == 22);
  assertTrue(d.getValue() == 1234);
  startPos=parser.parseField(recBytes,startPos,recBytes.length,'|',d);
  assertTrue(startPos == 29);
  assertTrue(d.getValue() == -12.34);
  startPos=parser.parseField(recBytes,startPos,recBytes.length,'|',d);
  assertTrue(startPos < 0);
  recBytes="12.34".getBytes();
  startPos=0;
  startPos=parser.parseField(recBytes,startPos,recBytes.length,'|',d);
  assertTrue(startPos == 5);
  assertTrue(d.getValue() == 12.34);
  config.setString(DecimalTextDoubleParser.DECIMAL_SEPARATOR,",");
  parser.configure(config);
  recBytes="124,56|12.34".getBytes();
  startPos=0;
  startPos=parser.parseField(recBytes,startPos,recBytes.length,'|',d);
  assertTrue(startPos == 7);
  assertTrue(d.getValue() == 124.56);
  startPos=parser.parseField(recBytes,startPos,recBytes.length,'|',d);
  assertTrue(startPos == -1);
}
