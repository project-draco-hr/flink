{
  final IArrayNode array=this.arrayPath.evaluate(value,null,this.getContext());
  if (!array.isArray())   throw new EvaluationException("Cannot split non-array");
  int index=0;
  final EvaluationContext context=this.getContext();
  IntNode indexNode=IntNode.valueOf(0);
  ArrayNode contextNode=JsonUtil.asArray(NullNode.getInstance(),indexNode,array,value);
  for (  IJsonNode element : array) {
    contextNode.set(0,element);
    indexNode.setValue(index);
    out.collect(this.splitProjection.evaluate(contextNode,null,context));
    index++;
  }
}
