{
  MutableObjectIterator<Value> input=inputs[0];
  ChannelStateTracker stateListener=stateListeners[0];
  IterationIterator iterationIter=new IterationIterator(input,stateListener);
  while (!iterationIter.checkTermination()) {
    publishState(ChannelState.OPEN,iterStateGates);
    runIteration(iterationIter);
    if (stateListener.getState() == ChannelState.CLOSED) {
      publishState(ChannelState.CLOSED,iterStateGates);
    }
 else {
      throw new RuntimeException("Illegal state after iteration call");
    }
  }
}
