{
  buffer.markEndAsPosition();
  checkErroneous();
  this.requestsNotReturned.incrementAndGet();
  if (this.closed || this.requestQueue.isClosed()) {
    this.requestsNotReturned.decrementAndGet();
    throw new IOException("The writer has been closed.");
  }
  this.requestQueue.add(new IORequest<Buffer.Output>(this,buffer));
}
