{
  Iterator<Map.Entry<Long,PendingCheckpoint>> entries=pendingCheckpoints.entrySet().iterator();
  while (entries.hasNext()) {
    PendingCheckpoint p=entries.next().getValue();
    if (p.getCheckpointTimestamp() < timestamp) {
      rememberRecentCheckpointId(p.getCheckpointId());
      p.discard(userClassLoader,true);
      entries.remove();
    }
  }
}
