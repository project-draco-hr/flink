{
  final Replace replace=new Replace().withReplaceExpression(new ObjectAccess("fieldToReplace")).withDefaultExpression(Replace.FILTER_RECORDS).withDictionaryKeyExtraction(new ArrayAccess(0)).withDictionaryValueExtraction(new ArrayAccess(1)).withArrayElementsReplacement(true);
  final SopremoTestPlan sopremoPlan=new SopremoTestPlan(replace);
  sopremoPlan.getInput(0).addObject("field1",1,"fieldToReplace",new int[]{1,2,3},"field2",2).addObject("field1",2,"fieldToReplace",new Object[]{1,"notInList"},"field2",2).addObject("field1",3,"fieldToReplace",new int[]{2,3},"field2",2).addObject("field1",4,"fieldToReplace",new int[]{},"field2",2);
  sopremoPlan.getInput(1).addArray(1,11).addArray(2,22).addArray(3,33);
  sopremoPlan.getExpectedOutput(0).addObject("field1",1,"fieldToReplace",new int[]{11,22,33},"field2",2).addObject("field1",3,"fieldToReplace",new int[]{22,33},"field2",2).addObject("field1",4,"fieldToReplace",new int[]{},"field2",2);
  sopremoPlan.run();
}
