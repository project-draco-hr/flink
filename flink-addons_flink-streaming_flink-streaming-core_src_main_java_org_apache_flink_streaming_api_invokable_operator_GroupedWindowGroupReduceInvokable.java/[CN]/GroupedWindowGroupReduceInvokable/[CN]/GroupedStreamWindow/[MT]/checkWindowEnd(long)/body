{
  nextRecordTime=timeStamp;
  while (miniBatchEnd()) {
    shiftGranularityAllWindows();
    currentMiniBatchCount+=1;
    if (batchEnd()) {
      reduceAllWindows();
      slideAllWindows();
    }
  }
}
