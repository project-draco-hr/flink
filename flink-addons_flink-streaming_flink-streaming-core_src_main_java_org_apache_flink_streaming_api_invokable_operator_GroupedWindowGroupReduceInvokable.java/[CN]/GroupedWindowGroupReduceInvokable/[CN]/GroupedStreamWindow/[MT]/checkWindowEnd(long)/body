{
  nextRecordTime=timeStamp;
  while (miniBatchEnd()) {
    shiftGranularityAllWindows();
    if (batchEnd()) {
      reduceAllWindows();
      slideAllWindows();
    }
  }
  currentMiniBatchCount=this.minibatchCounter;
}
