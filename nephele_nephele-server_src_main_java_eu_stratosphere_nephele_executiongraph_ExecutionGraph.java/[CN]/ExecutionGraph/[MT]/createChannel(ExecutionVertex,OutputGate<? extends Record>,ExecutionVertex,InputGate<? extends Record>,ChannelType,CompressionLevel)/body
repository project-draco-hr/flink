{
  AbstractOutputChannel<? extends Record> outputChannel;
  AbstractInputChannel<? extends Record> inputChannel;
switch (channelType) {
case NETWORK:
    outputChannel=outputGate.createNetworkOutputChannel(null,compressionLevel,true);
  inputChannel=inputGate.createNetworkInputChannel(null,compressionLevel);
break;
case INMEMORY:
outputChannel=outputGate.createInMemoryOutputChannel(null,compressionLevel);
inputChannel=inputGate.createInMemoryInputChannel(null,compressionLevel);
break;
case FILE:
outputChannel=outputGate.createFileOutputChannel(null,compressionLevel);
inputChannel=inputGate.createFileInputChannel(null,compressionLevel);
break;
default :
throw new GraphConversionException("Cannot create channel: unknown type");
}
inputChannel.setConnectedChannelID(outputChannel.getID());
outputChannel.setConnectedChannelID(inputChannel.getID());
this.outputChannelMap.put(outputChannel.getID(),outputChannel);
this.inputChannelMap.put(inputChannel.getID(),inputChannel);
this.channelToVertexMap.put(outputChannel.getID(),source);
this.channelToVertexMap.put(inputChannel.getID(),target);
}
