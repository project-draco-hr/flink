{
  NetworkEnvironment networkEnvironment=mock(NetworkEnvironment.class);
  when(networkEnvironment.createKvStateTaskRegistry(any(JobID.class),any(JobVertexID.class))).thenReturn(mock(TaskKvStateRegistry.class));
  return new Task(tdd,mock(MemoryManager.class),mock(IOManager.class),networkEnvironment,mock(BroadcastVariableManager.class),mock(ActorGateway.class),mock(ActorGateway.class),new FiniteDuration(10,TimeUnit.SECONDS),new FallbackLibraryCacheManager(),new FileCache(new Configuration()),new TaskManagerRuntimeInfo("localhost",new Configuration(),EnvironmentInformation.getTemporaryFileDirectory()),new UnregisteredTaskMetricsGroup());
}
