{
  if (invokable == null) {
    LOG.fatal("ExecutionEnvironment has no Invokable set");
  }
  changeExecutionState(ExecutionState.RUNNING,null);
  try {
    this.invokable.invoke();
    if (this.isCanceled) {
      throw new InterruptedException();
    }
  }
 catch (  InterruptedException e) {
    changeExecutionState(ExecutionState.CANCELED,null);
  }
catch (  Exception e) {
    try {
      this.invokable.cancel();
    }
 catch (    Exception e2) {
      LOG.error(StringUtils.stringifyException(e2));
    }
    changeExecutionState(ExecutionState.FAILED,StringUtils.stringifyException(e));
    return;
  }
  if (!this.isCanceled) {
    changeExecutionState(ExecutionState.FINISHING,null);
  }
  try {
    closeInputGates();
    requestAllOutputGatesToClose();
    waitForInputChannelsToBeClosed();
    waitForOutputChannelsToBeClosed();
  }
 catch (  Exception e) {
    if (!this.isCanceled) {
      changeExecutionState(ExecutionState.FAILED,StringUtils.stringifyException(e));
      return;
    }
  }
  if (!this.isCanceled) {
    changeExecutionState(ExecutionState.FINISHED,null);
  }
}
