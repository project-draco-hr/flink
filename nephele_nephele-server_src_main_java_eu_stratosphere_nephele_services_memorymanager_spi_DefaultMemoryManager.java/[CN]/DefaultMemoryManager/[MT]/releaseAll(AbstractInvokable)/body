{
synchronized (this.lock) {
    if (this.isShutDown) {
      throw new IllegalStateException("Memory manager has been shut down.");
    }
    final Set<DefaultMemorySegment> segments=this.allocatedSegments.remove(owner);
    if (segments == null || segments.isEmpty()) {
      return;
    }
    for (    DefaultMemorySegment seg : segments) {
      final byte[] buffer=seg.destroy();
      this.freeSegments.add(buffer);
    }
    segments.clear();
  }
}
