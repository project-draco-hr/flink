{
  freeSegments=new LinkedList<FreeSegmentEntry>();
  allocatedSegments=new HashSet<MemorySegmentDescriptor>();
  int numberOfChunks=(int)(memorySize / chunkSize);
  int lastChunkSize=(int)(memorySize % chunkSize);
  this.chunkSize=chunkSize;
  this.memory=new byte[numberOfChunks + 1][];
  for (int i=0; i <= numberOfChunks; i++) {
    memory[i]=new byte[(i < numberOfChunks) ? chunkSize : lastChunkSize];
    freeSegments.add(new FreeSegmentEntry(i,i * this.chunkSize,i * this.chunkSize + memory[i].length));
  }
}
