{
  taskConfig=new TaskConfig(getTaskConfiguration());
  String name=getEnvironment().getTaskName() + " (" + (getEnvironment().getIndexInSubtaskGroup() + 1)+ '/'+ getEnvironment().getCurrentNumberOfSubtasks()+ ")";
  int numberOfEventsUntilInterrupt=taskConfig.getNumberOfEventsUntilInterruptInIterativeGate(0);
  if (log.isInfoEnabled()) {
    log.info(formatLogString("wrapping input [0] with an interrupting iterator that waits " + "for [" + numberOfEventsUntilInterrupt + "] event(s)"));
  }
  headEventReader=new MutableRecordReader<PactRecord>(this,0);
  headEventRecordIterator=new InterruptingMutableObjectIterator<PactRecord>(new PactRecordNepheleReaderIterator(headEventReader,ReaderInterruptionBehaviors.RELEASE_ON_INTERRUPT),numberOfEventsUntilInterrupt,name,this,0);
  headEventReader.subscribeToEvent(headEventRecordIterator,EndOfSuperstepEvent.class);
  headEventReader.subscribeToEvent(headEventRecordIterator,TerminationEvent.class);
  if (taskConfig.usesConvergenceCriterion()) {
    int numberOfEventsUntilInterruptOnConvergenceGate=taskConfig.getNumberOfEventsUntilInterruptInIterativeGate(1);
    convergenceCriterion=InstantiationUtil.instantiate(taskConfig.getConvergenceCriterion(),ConvergenceCriterion.class);
    convergenceReader=new MutableRecordReader<PactRecord>(this,1);
    convergenceRecordIterator=new InterruptingMutableObjectIterator<PactRecord>(new PactRecordNepheleReaderIterator(convergenceReader,ReaderInterruptionBehaviors.RELEASE_ON_INTERRUPT),numberOfEventsUntilInterruptOnConvergenceGate,name,this,1);
    if (log.isInfoEnabled()) {
      log.info(formatLogString("wrapping input [1] with an interrupting iterator that waits " + "for [" + numberOfEventsUntilInterruptOnConvergenceGate + "] event(s)"));
    }
    convergenceReader.subscribeToEvent(convergenceRecordIterator,EndOfSuperstepEvent.class);
  }
}
