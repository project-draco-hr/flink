{
synchronized (this.writableSpillingFileMap) {
    WritableSpillingFile writableSpillingFile=this.writableSpillingFileMap.get(gateID);
    if (writableSpillingFile == null) {
      final String filename=this.tmpDir + File.separator + FileUtils.getRandomFilename("fb_");
      writableSpillingFile=new WritableSpillingFile(new FileID(),new File(filename));
      this.writableSpillingFileMap.put(gateID,writableSpillingFile);
    }
    return writableSpillingFile.lockWritableFileChannel();
  }
}
