{
  Long cTime=System.currentTimeMillis();
  faultTolerancyBuffer.addTimestamp("1-1337");
  Long recordTimeStamp=faultTolerancyBuffer.getRecordTimestamps().get("1-1337");
  assertTrue(recordTimeStamp - cTime < 2);
  String[] records=new String[]{"1-1337"};
  assertArrayEquals(records,faultTolerancyBuffer.getRecordsByTime().get(recordTimeStamp).toArray());
  try {
    Thread.sleep(2);
  }
 catch (  InterruptedException e) {
    e.printStackTrace();
  }
  faultTolerancyBuffer.addTimestamp("1-1338");
  faultTolerancyBuffer.addTimestamp("1-1339");
  long recordTimeStamp1=faultTolerancyBuffer.getRecordTimestamps().get("1-1338");
  long recordTimeStamp2=faultTolerancyBuffer.getRecordTimestamps().get("1-1339");
  records=new String[]{"1-1338","1-1339"};
  if (recordTimeStamp1 == recordTimeStamp2) {
    assertTrue(faultTolerancyBuffer.getRecordsByTime().get(recordTimeStamp1).contains("1-1338"));
    assertTrue(faultTolerancyBuffer.getRecordsByTime().get(recordTimeStamp1).contains("1-1339"));
    assertTrue(faultTolerancyBuffer.getRecordsByTime().get(recordTimeStamp1).size() == 2);
  }
}
