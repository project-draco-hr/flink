{
  Integer vertexID=toVisit.get(0);
  StreamNode vertex=streamGraph.getVertex(vertexID);
  toVisit.remove(vertexID);
  if (!streamGraph.vertexIDtoLoop.containsKey(vertexID)) {
    JSONObject obj=new JSONObject();
    jsonArray.put(obj);
    decorateNode(vertexID,obj);
    JSONArray inEdges=new JSONArray();
    obj.put(PREDECESSORS,inEdges);
    for (    StreamEdge inEdge : vertex.getInEdges()) {
      int inputID=inEdge.getSourceID();
      if (edgeRemapings.keySet().contains(inputID)) {
        decorateEdge(inEdges,vertexID,inputID,inputID);
      }
 else       if (!streamGraph.vertexIDtoLoop.containsKey(inputID)) {
        decorateEdge(iterationInEdges,vertexID,inputID,inputID);
      }
    }
    edgeRemapings.put(vertexID,headId);
    visitIteration(jsonArray,toVisit,headId,edgeRemapings,iterationInEdges);
  }
}
