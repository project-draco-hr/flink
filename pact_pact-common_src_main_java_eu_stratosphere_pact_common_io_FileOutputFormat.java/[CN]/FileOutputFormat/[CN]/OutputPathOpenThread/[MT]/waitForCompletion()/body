{
  final long start=System.currentTimeMillis();
  long remaining=this.timeoutMillies;
  do {
    try {
      this.join(remaining);
    }
 catch (    InterruptedException iex) {
    }
  }
 while (this.error == null && this.fdos == null && (remaining=this.timeoutMillies + start - System.currentTimeMillis()) > 0);
  if (this.error != null) {
    throw new IOException("Opening the file output stream failed" + (this.error.getMessage() == null ? "." : ": " + this.error.getMessage()),this.error);
  }
  if (this.fdos != null) {
    return this.fdos;
  }
 else {
    this.aborted=true;
    final FSDataOutputStream outStream=this.fdos;
    this.fdos=null;
    if (outStream != null) {
      try {
        outStream.close();
      }
 catch (      Throwable t) {
      }
    }
    throw new IOException("Opening request timed out.");
  }
}
