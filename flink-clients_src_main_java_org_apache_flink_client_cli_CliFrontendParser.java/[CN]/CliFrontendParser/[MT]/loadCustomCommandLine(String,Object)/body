{
  try {
    Class<? extends CustomCommandLine> customCliClass=Class.forName(className).asSubclass(CustomCommandLine.class);
    Class<?>[] types=new Class<?>[params.length];
    for (int i=0; i < params.length; i++) {
      Preconditions.checkNotNull(params[i],"Parameters for custom command-lines may not be null.");
      types[i]=params[i].getClass();
    }
    Constructor<? extends CustomCommandLine> constructor=customCliClass.getConstructor(types);
    final CustomCommandLine cli=constructor.newInstance(params);
    String cliIdentifier=Preconditions.checkNotNull(cli.getIdentifier());
    CustomCommandLine existing=customCommandLine.put(cliIdentifier,cli);
    if (existing != null) {
      throw new IllegalStateException("Attempted to register " + cliIdentifier + " but there is already a command-line with this identifier.");
    }
  }
 catch (  ClassNotFoundException|NoSuchMethodException|IllegalAccessException|InstantiationException|InvocationTargetException e) {
    LOG.warn("Unable to locate custom CLI class {}. " + "Flink is not compiled with support for this class.",className,e);
  }
}
