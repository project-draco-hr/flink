{
  int character=0;
  readLoop:   while ((character=this.reader.read()) != -1) {
    final char ch=(char)character;
switch (this.getCurrentState()) {
case ESCAPED:
      this.builder.append(ch);
    this.revertToPreviousState();
  break;
case QUOTED:
switch (ch) {
case '"':
  this.revertToPreviousState();
break;
case '\\':
this.setState(State.ESCAPED);
break;
default :
this.builder.append(ch);
}
break;
case TOP_LEVEL:
if (ch == this.fieldDelimiter) {
this.builder.toString();
break readLoop;
}
 else if (ch == '\n') {
final int lastCharPos=this.builder.length() - 1;
if (this.builder.charAt(lastCharPos) == '\r') this.builder.setLength(lastCharPos);
break readLoop;
}
 else if (this.usesQuotation && ch == '"') this.setState(State.QUOTED);
 else this.builder.append(ch);
}
}
return character;
}
