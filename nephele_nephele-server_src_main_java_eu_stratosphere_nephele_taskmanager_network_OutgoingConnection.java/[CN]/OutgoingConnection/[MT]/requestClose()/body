{
synchronized (this.queuedEnvelopes) {
    if (this.queuedEnvelopes.isEmpty()) {
      if (this.isSubscribedToWriteEvent) {
        this.connectionThread.unsubscribeFromWriteEvent(this.selectionKey);
        this.isSubscribedToWriteEvent=false;
      }
    }
  }
}
