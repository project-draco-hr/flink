{
  MetricRegistry registry=new MetricRegistry(new Configuration());
  TaskMetricGroup tmGroup=new TaskManagerMetricGroup(registry,"host","id").addTaskForJob(new JobID(),"job",new AbstractID(),new AbstractID(),0,"task");
  JobMetricGroup jmGroup=tmGroup.parent();
  Scope.ScopeFormat format=new Scope.ScopeFormat();
  format.setJobFormat(Scope.concat(TaskManagerMetricGroup.SCOPE_TM_HOST,"superjob",JobMetricGroup.SCOPE_JOB_NAME));
  List<String> scope=jmGroup.generateScope(format);
  assertEquals(3,scope.size());
  assertEquals("host",scope.get(0));
  assertEquals("superjob",scope.get(1));
  assertEquals("job",scope.get(2));
}
