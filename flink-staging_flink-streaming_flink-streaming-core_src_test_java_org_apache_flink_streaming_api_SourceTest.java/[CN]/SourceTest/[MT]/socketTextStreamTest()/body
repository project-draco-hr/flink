{
  List<String> expectedList=Arrays.asList("a","b","c");
  List<String> actualList=new ArrayList<String>();
  byte[] data={'a','\n','b','\n','c','\n'};
  Socket socket=mock(Socket.class);
  when(socket.getInputStream()).thenReturn(new ByteArrayInputStream(data));
  when(socket.isClosed()).thenReturn(false);
  when(socket.isConnected()).thenReturn(true);
  new SocketTextStreamFunction("",0,'\n').streamFromSocket(new MockCollector<String>(actualList),socket);
  assertEquals(expectedList,actualList);
}
