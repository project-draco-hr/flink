{
  MetricRegistry registry=new MetricRegistry(new Configuration());
  TaskManagerScopeFormat tmFormat=new TaskManagerScopeFormat("peter.<tm_id>");
  TaskManagerJobScopeFormat jmFormat=new TaskManagerJobScopeFormat("*.some-constant.<job_id>",tmFormat);
  JobID jid=new JobID();
  TaskManagerMetricGroup tmGroup=new TaskManagerMetricGroup(registry,tmFormat,"theHostName","test-tm-id");
  JobMetricGroup jmGroup=new TaskManagerJobMetricGroup(registry,tmGroup,jmFormat,jid,"myJobName");
  assertArrayEquals(new String[]{"peter","test-tm-id","some-constant",jid.toString()},jmGroup.getScopeComponents());
  assertEquals("peter.test-tm-id.some-constant." + jid + ".name",jmGroup.getMetricIdentifier("name"));
  registry.shutdown();
}
