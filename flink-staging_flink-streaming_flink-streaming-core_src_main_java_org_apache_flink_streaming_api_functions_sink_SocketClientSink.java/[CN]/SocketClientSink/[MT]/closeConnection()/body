{
  try {
    isRunning=false;
    if (dataOutputStream != null) {
      dataOutputStream.close();
    }
    if (client != null && !client.isClosed()) {
      client.close();
    }
    if (lock != null) {
synchronized (lock) {
        lock.notifyAll();
      }
    }
  }
 catch (  IOException e) {
    throw new RuntimeException("Error while closing connection with socket server at " + hostName + ":"+ port,e);
  }
 finally {
    if (client != null) {
      try {
        client.close();
      }
 catch (      IOException e) {
        throw new RuntimeException("Cannot close connection with socket server at " + hostName + ":"+ port,e);
      }
    }
  }
}
