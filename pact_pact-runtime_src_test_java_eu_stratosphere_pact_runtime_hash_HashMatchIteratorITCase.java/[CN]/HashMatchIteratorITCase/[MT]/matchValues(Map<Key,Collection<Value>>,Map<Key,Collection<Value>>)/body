{
  Map<Key,Collection<Match>> map=new HashMap<Key,Collection<Match>>();
  for (  Key key : leftMap.keySet()) {
    Collection<Value> leftValues=leftMap.get(key);
    Collection<Value> rightValues=rightMap.get(key);
    if (rightValues == null) {
      continue;
    }
    if (!map.containsKey(key)) {
      map.put(key,new ArrayList<Match>());
    }
    Collection<Match> matchedValues=map.get(key);
    for (    Value leftValue : leftValues) {
      for (      Value rightValue : rightValues) {
        matchedValues.add(new Match(leftValue,rightValue));
      }
    }
  }
  return map;
}
