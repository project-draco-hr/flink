{
  if (amStatus == null) {
    amStatus=new ApplicationMasterStatus();
  }
  if (jobManager == null) {
    amStatus.setNumTaskManagers(0);
    amStatus.setNumSlots(0);
  }
 else {
    amStatus.setNumTaskManagers(jobManager.getNumberOfTaskManagers());
    amStatus.setNumSlots(jobManager.getTotalNumberOfRegisteredSlots());
  }
  amStatus.setMessageCount(messages.size());
  amStatus.setFailed(isFailed);
  return amStatus;
}
