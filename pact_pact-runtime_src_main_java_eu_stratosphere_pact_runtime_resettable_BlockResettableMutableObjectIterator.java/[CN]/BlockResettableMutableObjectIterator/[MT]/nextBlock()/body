{
  if (this.closed) {
    throw new IllegalStateException("Iterator has been closed.");
  }
  if (this.noMoreBlocks) {
    return false;
  }
  collectAllBuffers(this.emptySegments);
  this.bufferCurrentlyFilled=new Buffer.Output(this.emptySegments.remove(this.emptySegments.size() - 1));
  if (this.leftOver) {
    this.next=this.leftOverRecord;
    this.leftOver=false;
  }
 else   if (this.input.next(this.leftOverRecord)) {
    this.next=this.leftOverRecord;
  }
 else {
    this.noMoreBlocks=true;
    return false;
  }
  if (!this.bufferCurrentlyFilled.write(this.next)) {
    throw new IOException("BlockResettableIterator: " + "Could not serialize element into fresh block buffer - element is too large.");
  }
  return true;
}
