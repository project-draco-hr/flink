{
  String[] programArgs=line.hasOption(ARGS_OPTION.getOpt()) ? line.getOptionValues(ARGS_OPTION.getOpt()) : line.getArgs();
  String jarFilePath;
  if (line.hasOption(JAR_OPTION.getOpt())) {
    jarFilePath=line.getOptionValue(JAR_OPTION.getOpt());
  }
 else   if (programArgs.length > 0) {
    jarFilePath=programArgs[0];
    programArgs=Arrays.copyOfRange(programArgs,1,programArgs.length);
  }
 else {
    throw new FileNotFoundException("Error: Jar file was not specified.");
  }
  File jarFile=new File(jarFilePath);
  if (!jarFile.exists()) {
    throw new FileNotFoundException("Error: Jar file does not exist: " + jarFile);
  }
 else   if (!jarFile.isFile()) {
    throw new FileNotFoundException("Error: Jar file is not a file: " + jarFile);
  }
  String entryPointClass=line.hasOption(CLASS_OPTION.getOpt()) ? line.getOptionValue(CLASS_OPTION.getOpt()) : null;
  return entryPointClass == null ? new PackagedProgram(jarFile,programArgs) : new PackagedProgram(jarFile,entryPointClass,programArgs);
}
