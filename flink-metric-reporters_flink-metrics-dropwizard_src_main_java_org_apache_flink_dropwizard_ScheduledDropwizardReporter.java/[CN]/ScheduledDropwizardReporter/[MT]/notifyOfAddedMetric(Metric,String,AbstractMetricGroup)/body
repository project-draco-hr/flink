{
  final String fullName=group.getScopeString() + '.' + metricName;
synchronized (this) {
    if (metric instanceof Counter) {
      counters.put((Counter)metric,fullName);
      registry.register(fullName,new CounterWrapper((Counter)metric));
    }
 else     if (metric instanceof Gauge) {
      gauges.put((Gauge<?>)metric,fullName);
      registry.register(fullName,GaugeWrapper.fromGauge((Gauge<?>)metric));
    }
  }
}
