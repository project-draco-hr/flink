{
  List<BufferOrEvent> input=new LinkedList<BufferOrEvent>();
  input.add(createBuffer(0));
  input.add(createBuffer(0));
  input.add(createBuffer(0));
  input.add(createBuffer(2));
  input.add(createBuffer(2));
  InputGate mockIG=new MockInputGate(1,input);
  AbstractReader mockAR=new MockReader(mockIG);
  BarrierBuffer bb=new BarrierBuffer(mockIG,mockAR);
  assertEquals(input.get(0),bb.getNextNonBlocked());
  assertEquals(input.get(1),bb.getNextNonBlocked());
  assertEquals(input.get(2),bb.getNextNonBlocked());
  assertEquals(input.get(3),bb.getNextNonBlocked());
  assertEquals(input.get(4),bb.getNextNonBlocked());
}
