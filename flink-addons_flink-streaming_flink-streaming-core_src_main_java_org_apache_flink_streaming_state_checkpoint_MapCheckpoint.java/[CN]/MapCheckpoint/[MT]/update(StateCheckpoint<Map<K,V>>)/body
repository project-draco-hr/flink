{
  MapCheckpoint<K,V> mapCheckpoint=(MapCheckpoint<K,V>)nextCheckpoint;
  if (this.checkpointedState == null) {
    this.checkpointedState=mapCheckpoint.updatedItems;
  }
 else {
    if (mapCheckpoint.clear) {
      this.checkpointedState.clear();
    }
    for (    Object key : mapCheckpoint.removedItems) {
      this.checkpointedState.remove(key);
    }
    this.checkpointedState.putAll(mapCheckpoint.updatedItems);
  }
  return this;
}
