{
  ApplicationID appId=new ApplicationID();
  CompletedCheckpoint checkpoint=mock(CompletedCheckpoint.class);
  when(checkpoint.getStates()).thenReturn(Collections.<StateForTask>emptyList());
  when(checkpoint.getCheckpointID()).thenReturn(12312312L);
  Savepoint savepoint=new Savepoint(appId,checkpoint);
  CheckpointIDCounter checkpointIdCounter=mock(CheckpointIDCounter.class);
  StateStore<Savepoint> savepointStore=mock(StateStore.class);
  when(savepointStore.getState(anyString())).thenReturn(savepoint);
  SavepointCoordinator coordinator=createSavepointCoordinator(new ApplicationID(),new JobID(),60 * 1000,new ExecutionVertex[]{},new ExecutionVertex[]{},new ExecutionVertex[]{},checkpointIdCounter,savepointStore);
  assertEquals(appId,coordinator.restoreSavepoint(createExecutionJobVertexMap(),"any"));
  verify(checkpointIdCounter).setCount(eq(12312312L + 1));
  coordinator.shutdown();
}
