{
  this.task=task;
  this.runtimeDispatcher=new RuntimeDispatcher(transferEnvelopeDispatcher);
  if (previousBufferPoolOwner == null) {
    this.localBufferPool=new LocalBufferPool(1,false,this);
  }
 else {
    if (!(previousBufferPoolOwner instanceof RuntimeTaskContext)) {
      throw new IllegalStateException("previousBufferPoolOwner is not of type RuntimeTaskContext");
    }
    final RuntimeTaskContext rtc=(RuntimeTaskContext)previousBufferPoolOwner;
    this.localBufferPool=rtc.getLocalBufferPool();
  }
  this.numberOfChannels=numberOfChannels;
}
