{
  InMemoryOutputChannel<T> inMemoryOutputChannel=null;
  if (this.directChannelBroker == null) {
    throw new IOException("inMemoryChannelBroker is null!");
  }
  for (int i=0; i < this.numberOfConnectionRetries; i++) {
    inMemoryOutputChannel=(InMemoryOutputChannel<T>)this.directChannelBroker.getDirectOutputChannelByID(getConnectedChannelID());
    if (inMemoryOutputChannel != null) {
      return inMemoryOutputChannel;
    }
    try {
      Thread.sleep(CONNECTION_SLEEP_INTERVAL);
    }
 catch (    InterruptedException e) {
      LOG.error(e);
    }
  }
  throw new IOException("Cannot find corresponding in-memory output channel for in-memory input channel " + getID());
}
