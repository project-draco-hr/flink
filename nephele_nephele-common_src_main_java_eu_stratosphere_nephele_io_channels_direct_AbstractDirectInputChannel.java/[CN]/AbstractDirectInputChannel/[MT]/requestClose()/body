{
  LOG.info("close channel request xxx");
synchronized (this.synchronizationMontior) {
    if (this.closeRequestedByRemote) {
      LOG.info("close channel request return");
      return;
    }
    if (this.currentWriteBuffer != null) {
      this.fullBuffers.add(this.currentWriteBuffer);
      LOG.info("close channel 22");
      this.getInputGate().notifyRecordIsAvailable(getChannelIndex());
      this.currentWriteBuffer=null;
    }
    this.closeRequestedByRemote=true;
    LOG.info("close channel 2");
    this.getInputGate().notifyRecordIsAvailable(getChannelIndex() - 100);
  }
}
