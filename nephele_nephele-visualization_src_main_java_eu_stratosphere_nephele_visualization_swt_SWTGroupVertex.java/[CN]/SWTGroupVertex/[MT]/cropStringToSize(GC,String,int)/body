{
  String croppedString=originalString;
  boolean cropped=false;
  Point pt=gc.textExtent(originalString);
  while (pt.x >= maximumWidth) {
    cropped=true;
    croppedString=croppedString.substring(0,croppedString.length() - 1);
    if (croppedString.length() == 0) {
      break;
    }
    pt=gc.textExtent(croppedString + "...");
  }
  if (cropped) {
    croppedString+="...";
  }
  return croppedString;
}
