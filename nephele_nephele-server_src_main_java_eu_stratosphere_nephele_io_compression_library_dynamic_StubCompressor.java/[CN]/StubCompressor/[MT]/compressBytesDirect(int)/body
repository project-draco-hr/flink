{
  if (this.compressedDataBuffer.position() > 0) {
    throw new IllegalStateException("compressedBuffer has position > 0");
  }
  this.uncompressedDataBuffer.flip();
  this.compressedDataBuffer.put(this.uncompressedDataBuffer);
  return this.compressedDataBuffer.position();
}
