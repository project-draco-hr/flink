{
  SopremoPlan actualPlan=parseScript("square = fn(x) x * x;" + "$input = read 'input.json';" + "$result = project $input into { squared: square($input) };"+ "write $result to 'output.json'; ");
  SopremoPlan expectedPlan=new SopremoPlan();
  Source input=new Source("input.json");
  Projection projection=new Projection().withInputs(input).withValueTransformation(new ObjectCreation(new ObjectCreation.FieldAssignment("squared",new ArithmeticExpression(new InputSelection(0),ArithmeticOperator.MULTIPLICATION,new InputSelection(0)))));
  Sink sink=new Sink("output.json").withInputs(projection);
  expectedPlan.setSinks(sink);
  Assert.assertEquals("unexpectedPlan",expectedPlan,actualPlan);
}
