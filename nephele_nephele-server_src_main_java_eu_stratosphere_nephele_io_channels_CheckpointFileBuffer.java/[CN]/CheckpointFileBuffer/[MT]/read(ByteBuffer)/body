{
  if (this.fileChannel == null) {
    this.fileChannel=this.fileBufferManager.getFileChannelForReading(this.sourceChannelID);
    if (this.fileChannel.position() > this.offset) {
      throw new IOException("Offset of CheckpointFileBuffer is smaller than current file pointer!");
    }
    this.fileChannel.position(this.offset);
  }
  if (this.totalBytesRead >= this.bufferSize) {
    return -1;
  }
  final int rem=remaining();
  int bytesRead;
  if (dst.remaining() > rem) {
    final int excess=dst.remaining() - rem;
    dst.limit(dst.limit() - excess);
    bytesRead=this.fileChannel.read(dst);
    dst.limit(dst.limit() + excess);
  }
 else {
    bytesRead=this.fileChannel.read(dst);
  }
  this.totalBytesRead+=bytesRead;
  return bytesRead;
}
