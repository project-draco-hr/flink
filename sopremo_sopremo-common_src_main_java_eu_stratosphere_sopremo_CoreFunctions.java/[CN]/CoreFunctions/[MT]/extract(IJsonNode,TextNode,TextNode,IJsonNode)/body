{
  final Pattern compiledPattern=Pattern.compile(pattern.getTextValue());
  final Matcher matcher=compiledPattern.matcher(input.getTextValue());
  if (!matcher.find())   return defaultValue;
  if (matcher.groupCount() == 0) {
    TextNode stringResult=SopremoUtil.ensureType(result,TextNode.class);
    stringResult.setValue(matcher.group(0));
    return stringResult;
  }
  if (matcher.groupCount() == 1) {
    TextNode stringResult=SopremoUtil.ensureType(result,TextNode.class);
    stringResult.setValue(matcher.group(1));
    return stringResult;
  }
  final ArrayNode arrayResult=SopremoUtil.ensureType(result,ArrayNode.class);
  for (int index=1; index <= matcher.groupCount(); index++)   arrayResult.add(TextNode.valueOf(matcher.group(index)));
  return arrayResult;
}
