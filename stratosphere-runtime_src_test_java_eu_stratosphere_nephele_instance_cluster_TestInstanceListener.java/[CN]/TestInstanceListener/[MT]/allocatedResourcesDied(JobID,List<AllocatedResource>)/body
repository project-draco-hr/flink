{
  List<AllocatedResource> allocatedResourcesOfJob=this.resourcesOfJobs.get(jobID);
  if (allocatedResourcesOfJob == null) {
    throw new IllegalStateException("Unable to find allocated resources for job with ID " + jobID);
  }
  for (  final AllocatedResource allocatedResource : allocatedResources) {
    if (!allocatedResourcesOfJob.remove(allocatedResource)) {
      throw new IllegalStateException("Resource " + allocatedResource.getAllocationID() + " is not assigned to job "+ jobID);
    }
  }
  if (allocatedResourcesOfJob.isEmpty()) {
    this.resourcesOfJobs.remove(jobID);
  }
}
