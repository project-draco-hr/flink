{
  final OutgoingConnection outgoingConnection=(OutgoingConnection)key.attachment();
  final SocketChannel socketChannel=(SocketChannel)key.channel();
  try {
    while (!socketChannel.finishConnect()) {
      try {
        Thread.sleep(100);
      }
 catch (      InterruptedException e1) {
        e1.printStackTrace();
      }
    }
    final SelectionKey channelKey=socketChannel.register(selector,SelectionKey.OP_WRITE | SelectionKey.OP_READ);
    channelKey.attach(outgoingConnection);
  }
 catch (  IOException ioe) {
    outgoingConnection.reportConnectionProblem(socketChannel,key,ioe);
  }
}
