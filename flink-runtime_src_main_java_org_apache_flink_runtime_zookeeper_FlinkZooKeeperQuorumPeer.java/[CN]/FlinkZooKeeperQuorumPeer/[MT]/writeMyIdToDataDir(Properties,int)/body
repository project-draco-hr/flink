{
  if (zkProps.getProperty("dataDir") == null) {
    throw new IllegalConfigurationException("No dataDir configured.");
  }
  File dataDir=new File(zkProps.getProperty("dataDir"));
  if (!dataDir.isDirectory() && !dataDir.mkdirs()) {
    throw new IOException("Cannot create dataDir '" + dataDir + "'.");
  }
  dataDir.deleteOnExit();
  PrintWriter writer=null;
  try {
    LOG.info("Writing {} to myid file in 'dataDir'.",id);
    writer=new PrintWriter(new File(dataDir,"myid"));
    writer.println(id);
  }
  finally {
    if (writer != null) {
      writer.close();
    }
  }
}
