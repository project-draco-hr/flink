{
  Configuration config=new Configuration();
  config.setString(MetricRegistry.KEY_METRICS_REPORTER_CLASS,TestReporter1.class.getName());
  MetricGroup root=new TaskManagerMetricGroup(new MetricRegistry(config),"host","id");
  root.counter("counter");
  Assert.assertTrue(TestReporter1.lastPassedMetric instanceof Counter);
  Assert.assertEquals("counter",TestReporter1.lastPassedName);
  root.gauge("gauge",new Gauge<Object>(){
    @Override public Object getValue(){
      return null;
    }
  }
);
  Assert.assertTrue(TestReporter1.lastPassedMetric instanceof Gauge);
  Assert.assertEquals("gauge",TestReporter1.lastPassedName);
}
