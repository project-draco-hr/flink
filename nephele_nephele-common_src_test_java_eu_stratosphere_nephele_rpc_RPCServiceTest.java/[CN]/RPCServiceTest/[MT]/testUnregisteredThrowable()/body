{
  RPCService rpcService=null;
  try {
    rpcService=new RPCService(RPC_TEST_PORT,NUMBER_OF_RPC_HANDLERS,getTypesToRegister());
    rpcService.setProtocolCallbackHandler(RPCTestProtocol.class,this);
    final RPCTestProtocol proxy=rpcService.getProxy(new InetSocketAddress("localhost",RPC_TEST_PORT),RPCTestProtocol.class);
    proxy.methodWithUnregisteredThrowable();
  }
 catch (  IOException e) {
    return;
  }
catch (  Exception e) {
    fail(StringUtils.stringifyException(e));
  }
 finally {
    if (rpcService != null) {
      rpcService.shutDown();
    }
  }
  fail("Expected TooManyListenersException has not been caught");
}
