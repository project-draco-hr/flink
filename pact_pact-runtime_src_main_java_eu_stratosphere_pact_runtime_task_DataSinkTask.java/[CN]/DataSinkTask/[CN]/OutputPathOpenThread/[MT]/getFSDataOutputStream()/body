{
  long start=System.currentTimeMillis();
  long remaining=this.timeoutMillies;
  if (this.exception != null) {
    throw this.exception;
  }
  if (this.fdos != null) {
    return this.fdos;
  }
synchronized (this.lock) {
    do {
      try {
        this.lock.wait(remaining);
      }
 catch (      InterruptedException iex) {
        this.canceled=true;
        if (this.fdos != null) {
          try {
            this.fdos.close();
          }
 catch (          Throwable t) {
          }
        }
        throw new Exception("Output Path Opener was interrupted.");
      }
    }
 while (this.exception == null && this.fdos == null && (remaining=this.timeoutMillies + start - System.currentTimeMillis()) > 0);
    if (this.exception != null) {
      if (this.fdos != null) {
        try {
          this.fdos.close();
        }
 catch (        Throwable t) {
        }
      }
      throw this.exception;
    }
    if (this.fdos != null) {
      return this.fdos;
    }
  }
  throw new Exception("Output Path Opener timed out.");
}
