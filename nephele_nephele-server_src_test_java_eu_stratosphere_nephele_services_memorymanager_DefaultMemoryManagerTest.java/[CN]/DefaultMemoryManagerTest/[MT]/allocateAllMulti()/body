{
  final AbstractInvokable mockInvoke=new DummyInvokable();
  int numSplits=6;
  if (MEMORY_SIZE % numSplits != 0)   throw new Exception("Invalid number of splits");
  memoryManager=new DefaultMemoryManager(MEMORY_SIZE);
  List<MemorySegment> segments=new ArrayList<MemorySegment>();
  try {
    for (int i=0; i < numSplits / 2; i++) {
      segments.addAll(memoryManager.allocate(mockInvoke,2,MEMORY_SIZE / numSplits));
    }
  }
 catch (  MemoryAllocationException e) {
    Assert.fail("Unable to allocate memory");
  }
  memoryManager.release(segments);
}
