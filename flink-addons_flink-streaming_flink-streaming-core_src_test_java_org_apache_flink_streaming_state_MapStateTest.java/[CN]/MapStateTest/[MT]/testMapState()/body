{
  Map<String,Integer> map=new HashMap<String,Integer>();
  map.put("a",1);
  map.put("b",2);
  map.put("c",3);
  map.remove("a");
  MapState<String,Integer> mapState=new MapState<String,Integer>();
  mapState.put("a",1);
  mapState.put("b",2);
  mapState.put("c",3);
  assertEquals(1,(int)mapState.remove("a"));
  assertEquals(null,mapState.remove("a"));
  assertEquals(2,mapState.size());
  assertEquals(map,mapState.state);
  assertEquals(map.entrySet(),mapState.entrySet());
  assertTrue(mapState.containsKey("b"));
  assertFalse(mapState.containsKey("a"));
  assertEquals(2,mapState.updatedItems.size());
  assertEquals(1,mapState.removedItems.size());
  Map<String,Integer> map2=new HashMap<String,Integer>();
  map2.put("a",0);
  map2.put("e",-1);
  mapState.putAll(map2);
  assertEquals(4,mapState.updatedItems.size());
  assertEquals(0,mapState.removedItems.size());
  mapState.clear();
  assertEquals(new HashMap<String,Integer>(),mapState.state);
  assertTrue(mapState.clear);
  assertEquals(0,mapState.updatedItems.size());
  assertEquals(0,mapState.removedItems.size());
  mapState.putAll(map);
  assertEquals(map.keySet(),mapState.updatedItems);
}
