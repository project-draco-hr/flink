{
  while (true) {
    JobMetricGroup currentJobGroup;
synchronized (this) {
      currentJobGroup=jobs.get(jobId);
      if (currentJobGroup == null || currentJobGroup.isClosed()) {
        currentJobGroup=new JobMetricGroup(registry,this,jobId,jobName);
        jobs.put(jobId,currentJobGroup);
      }
    }
    TaskMetricGroup taskGroup=currentJobGroup.addTask(vertexID,executionId,taskName,subtaskIndex,attemptNumber);
    if (taskGroup != null) {
      return taskGroup;
    }
  }
}
