{
  Closeable closeable=mock(Closeable.class);
  AbstractCloseableHandle handle=new CloseableHandle();
  assertFalse(handle.isClosed());
  handle.close();
  assertTrue(handle.isClosed());
  try {
    handle.registerCloseable(closeable);
    fail("this should throw an excepion");
  }
 catch (  IOException e) {
    assertTrue(e.getMessage().contains("closed"));
  }
  verify(closeable,times(1)).close();
  assertTrue(handle.isClosed());
  handle.close();
  verify(closeable,times(1)).close();
  assertTrue(handle.isClosed());
}
