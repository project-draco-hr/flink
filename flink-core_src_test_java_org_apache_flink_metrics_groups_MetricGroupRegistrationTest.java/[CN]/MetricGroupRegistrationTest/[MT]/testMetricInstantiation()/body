{
  Configuration config=new Configuration();
  config.setString(MetricRegistry.KEY_METRICS_REPORTER_CLASS,TestReporter1.class.getName());
  MetricGroup root=new TaskManagerMetricGroup(new MetricRegistry(config),"host","id");
  Counter counter=root.counter("counter");
  assertEquals(counter,TestReporter1.lastPassedMetric);
  assertEquals("counter",TestReporter1.lastPassedName);
  Gauge<Object> gauge=root.gauge("gauge",new Gauge<Object>(){
    @Override public Object getValue(){
      return null;
    }
  }
);
  Assert.assertEquals(gauge,TestReporter1.lastPassedMetric);
  assertEquals("gauge",TestReporter1.lastPassedName);
}
