{
  final Set<ExecutionVertex> verticesReadyToRun=new HashSet<ExecutionVertex>();
synchronized (this.jobQueue) {
    if (jobQueue.isEmpty()) {
      return verticesReadyToRun;
    }
    final ExecutionGraph executionGraph=jobQueue.getFirst();
    try {
      requestInstances(executionGraph);
    }
 catch (    InstanceException e) {
      LOG.error(e);
    }
    final ExecutionGraphIterator it=new ExecutionGraphIterator(executionGraph,executionGraph.getIndexOfCurrentExecutionStage(),true,true);
    while (it.hasNext()) {
      final ExecutionVertex vertex=it.next();
      if (vertex.getExecutionState() == ExecutionState.ASSIGNED) {
        vertex.setExecutionState(ExecutionState.READY);
        verticesReadyToRun.add(vertex);
      }
    }
  }
  return verticesReadyToRun;
}
