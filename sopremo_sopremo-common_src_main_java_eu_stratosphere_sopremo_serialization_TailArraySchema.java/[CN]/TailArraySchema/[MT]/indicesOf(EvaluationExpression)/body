{
  final ArrayAccess arrayExpression=(ArrayAccess)expression;
  if (arrayExpression.isSelectingAll())   return CollectionUtil.setRangeFrom(0,this.tailSize + 1);
 else   if (arrayExpression.isSelectingRange()) {
    int startIndex=arrayExpression.getStartIndex();
    int endIndex=arrayExpression.getEndIndex();
    if (startIndex >= 0 || endIndex >= 0)     throw new UnsupportedOperationException("Head indices are not supported yet");
    endIndex+=this.tailSize;
    startIndex+=this.tailSize;
    if (endIndex >= this.getTailSize())     throw new IllegalArgumentException("Target index is not in tail");
    return CollectionUtil.setRangeFrom(startIndex + 1,endIndex + 1);
  }
  int index=arrayExpression.getStartIndex();
  if (index >= 0)   throw new UnsupportedOperationException("Head indices are not supported yet");
  index+=this.tailSize;
  if (index < 0)   throw new IllegalArgumentException("Target index is not in tail");
  return IntSets.singleton(index + 1);
}
