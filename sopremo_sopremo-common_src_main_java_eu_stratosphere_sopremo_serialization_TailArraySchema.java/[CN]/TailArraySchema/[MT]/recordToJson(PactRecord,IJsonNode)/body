{
  if (this.getHeadSize() + this.getTailSize() + 1 != record.getNumFields()) {
    throw new IllegalStateException("Schema does not match to record!");
  }
  if (target == null) {
    target=new ArrayNode();
  }
 else {
    ((IArrayNode)target).clear();
  }
  JsonNodeWrapper recordElement;
  for (int i=0; i < this.getHeadSize(); i++) {
    recordElement=record.getField(i,JsonNodeWrapper.class);
    if (recordElement != null) {
      ((IArrayNode)target).add(SopremoUtil.unwrap(recordElement));
    }
  }
  ((IArrayNode)target).addAll((IArrayNode)SopremoUtil.unwrap(record.getField(this.getHeadSize(),JsonNodeWrapper.class)));
  for (int i=this.getHeadSize() + 1; i <= this.getHeadSize() + this.getTailSize(); i++) {
    recordElement=record.getField(i,JsonNodeWrapper.class);
    if (recordElement != null) {
      ((IArrayNode)target).add(SopremoUtil.unwrap(recordElement));
    }
  }
  return target;
}
