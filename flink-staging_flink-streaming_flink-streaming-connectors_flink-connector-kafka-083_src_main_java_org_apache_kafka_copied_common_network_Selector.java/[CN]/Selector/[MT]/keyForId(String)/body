{
  SelectionKey key=this.keys.get(id);
  if (key == null)   throw new IllegalStateException("Attempt to write to socket for which there is no open connection. Connection id " + id + " existing connections "+ keys.keySet().toString());
  return key;
}
