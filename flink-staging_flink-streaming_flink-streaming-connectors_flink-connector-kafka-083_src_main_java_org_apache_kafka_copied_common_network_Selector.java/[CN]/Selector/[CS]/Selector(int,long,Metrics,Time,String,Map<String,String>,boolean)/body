{
  try {
    this.nioSelector=java.nio.channels.Selector.open();
  }
 catch (  IOException e) {
    throw new KafkaException(e);
  }
  this.maxReceiveSize=maxReceiveSize;
  this.connectionsMaxIdleNanos=connectionMaxIdleMs * 1000 * 1000;
  this.time=time;
  this.metricGrpPrefix=metricGrpPrefix;
  this.metricTags=metricTags;
  this.keys=new HashMap<String,SelectionKey>();
  this.completedSends=new ArrayList<Send>();
  this.completedReceives=new ArrayList<NetworkReceive>();
  this.connected=new ArrayList<String>();
  this.disconnected=new ArrayList<String>();
  this.failedSends=new ArrayList<String>();
  this.sensors=new SelectorMetrics(metrics);
  this.lruConnections=new LinkedHashMap<String,Long>(16,.75F,true);
  currentTimeNanos=new SystemTime().nanoseconds();
  nextIdleCloseCheckTime=currentTimeNanos + connectionsMaxIdleNanos;
  this.metricsPerConnection=metricsPerConnection;
}
