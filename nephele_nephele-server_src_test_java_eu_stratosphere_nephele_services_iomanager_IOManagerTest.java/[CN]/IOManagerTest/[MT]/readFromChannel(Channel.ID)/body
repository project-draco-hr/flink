{
  try {
    Collection<MemorySegment> freeSegments=memoryManager.allocate(new DummyInvokable(),NUMBER_OF_SEGMENTS,SEGMENT_SIZE);
    ChannelReader channelReader=ioManager.createChannelReader(channelID,freeSegments,true);
    generator.reset();
    Value value=new Value();
    int readCounter=0;
    while (channelReader.read(value)) {
      Assert.assertEquals("Pairs don't match",generator.next(),value);
      readCounter++;
    }
    memoryManager.release(channelReader.close());
    return readCounter;
  }
 catch (  MemoryAllocationException maex) {
    Assert.fail("Memory for channel readers could not be allocated.");
    return 0;
  }
catch (  IOException ioex) {
    Assert.fail("IO error occurred while reading from the channel: " + ioex.getMessage());
    return 0;
  }
}
