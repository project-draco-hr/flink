{
  Collection<MemorySegment> freeSegments=memoryManager.allocate(new DummyInvokable(),NUMBER_OF_SEGMENTS,SEGMENT_SIZE);
  ChannelReader channelReader=ioManager.createChannelReader(channelID,freeSegments);
  generator.reset();
  Value value=new Value();
  int readCounter=0;
  while (channelReader.read(value)) {
    Assert.assertEquals("Pairs don't match",generator.next(),value);
    readCounter++;
  }
  memoryManager.release(channelReader.close());
  return readCounter;
}
