{
  S state=fetchedState.get(key);
  if (state != null) {
    return state;
  }
 else {
    StateHandle<C> handle=unfetchedState.get(key);
    if (handle != null) {
      state=checkpointer.restoreState(handle.getState());
      fetchedState.put(key,state);
      unfetchedState.remove(key);
      return state;
    }
 else {
      return null;
    }
  }
}
