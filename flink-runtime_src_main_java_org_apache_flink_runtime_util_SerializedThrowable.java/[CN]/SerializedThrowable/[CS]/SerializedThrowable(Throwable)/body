{
  Preconditions.checkNotNull(error,"The exception to serialize has to be set");
  this.cachedError=error;
  byte[] serializedError;
  try {
    serializedError=InstantiationUtil.serializeObject(error);
  }
 catch (  Throwable t) {
    try {
      this.cachedError=new Exception(ExceptionUtils.stringifyException(error));
      serializedError=InstantiationUtil.serializeObject(this.cachedError);
    }
 catch (    Throwable tt) {
      try {
        this.cachedError=new Exception("Cause is a '" + error.getClass().getName() + "' (failed to serialize or stringify)");
        serializedError=InstantiationUtil.serializeObject(this.cachedError);
      }
 catch (      Throwable ttt) {
        this.cachedError=null;
        serializedError=null;
      }
    }
  }
  this.serializedError=serializedError;
}
