{
  super(getMessageOrError(exception));
  if (!(exception instanceof SerializedThrowable)) {
    this.cachedException=new WeakReference<Throwable>(exception);
    this.originalErrorClassName=exception.getClass().getName();
    this.fullStingifiedStackTrace=ExceptionUtils.stringifyException(exception);
    this.placeholder=new Exception("Serialized representation of " + originalErrorClassName + ": "+ getMessage());
    this.placeholder.setStackTrace(exception.getStackTrace());
    initCause(this.placeholder);
    byte[] serialized;
    try {
      serialized=InstantiationUtil.serializeObject(exception);
    }
 catch (    Throwable t) {
      try {
        serialized=InstantiationUtil.serializeObject(placeholder);
      }
 catch (      IOException e) {
        throw new RuntimeException(e.getMessage(),e);
      }
    }
    this.serializedException=serialized;
  }
 else {
    SerializedThrowable other=(SerializedThrowable)exception;
    this.serializedException=other.serializedException;
    this.originalErrorClassName=other.originalErrorClassName;
    this.fullStingifiedStackTrace=other.fullStingifiedStackTrace;
    this.placeholder=other.placeholder;
    this.cachedException=other.cachedException;
  }
}
