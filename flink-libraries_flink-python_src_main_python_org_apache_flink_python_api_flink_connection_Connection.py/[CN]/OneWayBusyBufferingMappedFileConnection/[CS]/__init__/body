def __init__(self, output_path):
    self._output_file = open(output_path, 'rb+')
    if hasattr(mmap, 'MAP_SHARED'):
        self._file_output_buffer = mmap.mmap(self._output_file.fileno(), MAPPED_FILE_SIZE, mmap.MAP_SHARED, mmap.ACCESS_WRITE)
    else:
        self._file_output_buffer = mmap.mmap(self._output_file.fileno(), MAPPED_FILE_SIZE, None, mmap.ACCESS_WRITE)
    self._out = deque()
    self._out_size = 0
    self._offset_limit = (MAPPED_FILE_SIZE - ((1024 * 1024) * 3))
