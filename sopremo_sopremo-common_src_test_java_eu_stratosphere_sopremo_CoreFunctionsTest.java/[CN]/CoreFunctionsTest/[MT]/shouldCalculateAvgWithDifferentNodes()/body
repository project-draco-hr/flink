{
  CoreFunctions.AverageState aggregator=CoreFunctions.AVERAGE.initialize(null);
  for (int i=1; i < 500; i++)   aggregator=CoreFunctions.AVERAGE.aggregate(i % 2 == 0 ? IntNode.valueOf(i) : DoubleNode.valueOf(i),aggregator,this.context);
  Assert.assertEquals(DoubleNode.valueOf(250),CoreFunctions.AVERAGE.getFinalAggregate(aggregator,null));
}
