{
  Buffer buffer=this.taskContext.requestEmptyBuffer(minimumSizeOfBuffer);
  if (buffer == null) {
    if (!this.ephemeralCheckpoint.isDecided()) {
      this.ephemeralCheckpoint.destroy();
    }
    this.taskContext.reportExhaustionOfMemoryBuffers();
    spillQueueWithLargestAmountOfMainMemory();
    buffer=this.taskContext.requestEmptyBufferBlocking(minimumSizeOfBuffer);
  }
  return buffer;
}
