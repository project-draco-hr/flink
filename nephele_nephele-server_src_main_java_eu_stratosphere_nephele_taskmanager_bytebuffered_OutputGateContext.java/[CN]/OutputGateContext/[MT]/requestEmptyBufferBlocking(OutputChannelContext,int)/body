{
  Buffer buffer=this.taskContext.requestEmptyBuffer(minimumSizeOfBuffer,0);
  if (buffer == null) {
    if (!this.ephemeralCheckpoint.isDecided()) {
      this.ephemeralCheckpoint.destroy();
    }
    flushFullestBuffer();
    buffer=this.taskContext.requestEmptyBufferBlocking(minimumSizeOfBuffer,0);
  }
  if (buffer.isBackedByMemory()) {
    this.channelWithMemoryBuffers.add(caller);
  }
  return buffer;
}
