{
  ExecutionState candidateState;
  if (replayTaskStateChanged) {
    candidateState=determineOverallExecutionState(this.encapsulatedExecutionState,this.replayTaskExecutionState);
  }
 else {
    candidateState=determineOverallExecutionState(this.replayTaskExecutionState,this.encapsulatedExecutionState);
  }
  if (candidateState == null) {
    return;
  }
  if (this.overallExecutionState.getAndSet(candidateState) != candidateState) {
    this.taskManager.executionStateChanged(this.environment.getJobID(),this.vertexID,candidateState,optionalMessage);
  }
}
