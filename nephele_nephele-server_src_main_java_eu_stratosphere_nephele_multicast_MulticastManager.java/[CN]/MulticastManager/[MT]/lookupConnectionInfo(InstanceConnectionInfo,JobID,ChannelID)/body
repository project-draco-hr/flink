{
  if (LOG.isInfoEnabled()) {
    LOG.info("Receiving multicast receiver request from " + caller + " channel ID: "+ sourceChannelID);
  }
  if (this.cachedTrees.containsKey(sourceChannelID)) {
    LOG.info("Replying with cached entry...");
    return cachedTrees.get(sourceChannelID).getConnectionInfo(caller);
  }
 else {
    if (!checkIfAllTargetVerticesReady(caller,jobID,sourceChannelID)) {
      LOG.info("Received multicast request but not all receivers ready.");
      return ConnectionInfoLookupResponse.createReceiverNotReady();
    }
    LinkedList<TreeNode> treeNodes=extractTreeNodes(caller,jobID,sourceChannelID,this.randomized);
    if (this.useHardCodedTree) {
      LOG.info("Creating a hard-coded tree topology from file: " + hardCodedTreeFilePath);
      cachedTrees.put(sourceChannelID,createHardCodedTree(treeNodes));
      return cachedTrees.get(sourceChannelID).getConnectionInfo(caller);
    }
    cachedTrees.put(sourceChannelID,createDefaultTree(treeNodes,this.treeBranching));
    return cachedTrees.get(sourceChannelID).getConnectionInfo(caller);
  }
}
