{
synchronized (lock) {
    discarded=true;
    numAcknowledgedTasks=-1;
    if (releaseState) {
      for (      TaskState taskState : taskStates.values()) {
        taskState.discard(userClassLoader);
      }
    }
    taskStates.clear();
    notYetAcknowledgedTasks.clear();
  }
}
