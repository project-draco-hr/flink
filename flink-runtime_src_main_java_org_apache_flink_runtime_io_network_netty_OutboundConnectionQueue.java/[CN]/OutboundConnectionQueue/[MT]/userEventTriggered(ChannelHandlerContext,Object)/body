{
  boolean triggerWrite=this.queuedEnvelopes.isEmpty();
  this.queuedEnvelopes.addLast((Envelope)envelopeToEnqueue);
  this.numQueuedEnvelopes.incrementAndGet();
  if (triggerWrite) {
    writeAndFlushNextEnvelopeIfPossible();
  }
}
