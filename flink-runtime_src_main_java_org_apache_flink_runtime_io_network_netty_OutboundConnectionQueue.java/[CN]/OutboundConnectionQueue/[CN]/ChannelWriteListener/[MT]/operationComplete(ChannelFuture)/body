{
  if (future.isSuccess()) {
    writeAndFlushNextEnvelopeIfPossible();
  }
 else {
    exceptionOccurred(future.cause() == null ? new Exception("Envelope send aborted.") : future.cause());
  }
}
