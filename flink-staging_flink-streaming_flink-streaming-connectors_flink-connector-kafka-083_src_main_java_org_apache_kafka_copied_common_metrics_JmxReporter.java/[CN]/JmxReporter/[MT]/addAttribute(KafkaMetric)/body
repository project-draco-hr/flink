{
  try {
    MetricName metricName=metric.metricName();
    String mBeanName=getMBeanName(metricName);
    if (!this.mbeans.containsKey(mBeanName))     mbeans.put(mBeanName,new KafkaMbean(mBeanName));
    KafkaMbean mbean=this.mbeans.get(mBeanName);
    mbean.setAttribute(metricName.name(),metric);
    return mbean;
  }
 catch (  JMException e) {
    throw new KafkaException("Error creating mbean attribute for metricName :" + metric.metricName(),e);
  }
}
