{
  MemorySegment seg=sources.get(firstSegment);
  int len=readLengthIncludingLengthBytes(seg,sources,firstSegment,segmentOffset);
  int remaining=seg.size() - segmentOffset;
  if (remaining >= len) {
    target.write(seg.getBackingArray(),seg.translateOffset(segmentOffset),len);
  }
 else   while (true) {
    int toPut=Math.min(remaining,len);
    target.write(seg.getBackingArray(),seg.translateOffset(segmentOffset),toPut);
    len-=toPut;
    if (len > 0) {
      segmentOffset=0;
      seg=sources.get(++firstSegment);
      remaining=seg.size();
    }
 else {
      break;
    }
  }
}
