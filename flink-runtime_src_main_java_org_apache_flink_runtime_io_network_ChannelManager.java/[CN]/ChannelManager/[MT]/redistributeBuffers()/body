{
  if (this.localBuffersPools.isEmpty() | this.channels.size() == 0) {
    return;
  }
  int numBuffers=this.globalBufferPool.numBuffers();
  int numChannels=this.channels.size();
  double buffersPerChannel=numBuffers / (double)numChannels;
  if (buffersPerChannel < 1.0) {
    throw new RuntimeException("System has not enough buffers to execute tasks.");
  }
  for (  LocalBufferPoolOwner bufferPool : this.localBuffersPools.values()) {
    int numDesignatedBuffers=(int)Math.ceil(buffersPerChannel * bufferPool.getNumberOfChannels());
    bufferPool.setDesignatedNumberOfBuffers(numDesignatedBuffers);
  }
}
