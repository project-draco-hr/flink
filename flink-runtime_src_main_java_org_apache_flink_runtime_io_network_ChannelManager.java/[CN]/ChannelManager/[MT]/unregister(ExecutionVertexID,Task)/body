{
  final Environment environment=task.getEnvironment();
  for (  ChannelID id : environment.getOutputChannelIDs()) {
    Channel channel=this.channels.remove(id);
    if (channel != null) {
      channel.destroy();
    }
    this.receiverCache.remove(channel);
  }
  for (  ChannelID id : environment.getInputChannelIDs()) {
    Channel channel=this.channels.remove(id);
    if (channel != null) {
      channel.destroy();
    }
    this.receiverCache.remove(channel);
  }
  for (  GateID id : environment.getInputGateIDs()) {
    LocalBufferPoolOwner bufferPool=this.localBuffersPools.remove(id);
    if (bufferPool != null) {
      bufferPool.clearLocalBufferPool();
    }
  }
  LocalBufferPoolOwner bufferPool=this.localBuffersPools.remove(vertexId);
  if (bufferPool != null) {
    bufferPool.clearLocalBufferPool();
  }
  redistributeBuffers();
}
