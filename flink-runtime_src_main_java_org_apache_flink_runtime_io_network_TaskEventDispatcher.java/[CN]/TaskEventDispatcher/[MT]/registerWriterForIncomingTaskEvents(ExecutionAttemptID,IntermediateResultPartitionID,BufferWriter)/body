{
synchronized (registeredWriters) {
    if (registeredWriters.put(executionId,partitionId,listener) != null) {
      throw new IllegalStateException("Event dispatcher already contains buffer writer.");
    }
  }
}
