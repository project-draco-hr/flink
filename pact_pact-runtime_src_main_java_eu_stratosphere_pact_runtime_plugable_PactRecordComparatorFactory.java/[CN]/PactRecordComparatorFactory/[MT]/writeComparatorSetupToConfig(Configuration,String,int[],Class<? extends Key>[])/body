{
  if (keyPositions.length != keyTypes.length) {
    throw new IllegalArgumentException("The number of key positions and the number of key type classes must be identical.");
  }
  for (int i=0; i < keyPositions.length; i++) {
    if (keyPositions[i] < 0) {
      throw new IllegalArgumentException("The key position " + i + " is invalid: "+ keyPositions[i]);
    }
    if (keyTypes[i] == null || !Key.class.isAssignableFrom(keyTypes[i])) {
      throw new IllegalArgumentException("The key type " + i + " is null or not implenting the interface "+ Key.class.getName()+ ".");
    }
  }
  config.setInteger(configKeyPrefix + NUM_KEYS,keyPositions.length);
  for (int i=0; i < keyPositions.length; i++) {
    config.setInteger(configKeyPrefix + KEY_POS_PREFIX + i,keyPositions[i]);
    config.setString(configKeyPrefix + KEY_CLASS_PREFIX + i,keyTypes[i].getName());
  }
}
