{
  long now=time.milliseconds();
  long deadline=now + timeout;
  while (!future.isDone() && now < deadline) {
    poll(deadline - now,now);
    now=time.milliseconds();
  }
  return future.isDone();
}
