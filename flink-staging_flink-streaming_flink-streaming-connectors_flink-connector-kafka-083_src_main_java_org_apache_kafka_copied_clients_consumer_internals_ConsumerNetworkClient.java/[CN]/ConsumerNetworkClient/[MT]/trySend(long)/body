{
  boolean requestsSent=false;
  for (  Map.Entry<Node,List<ClientRequest>> requestEntry : unsent.entrySet()) {
    Node node=requestEntry.getKey();
    Iterator<ClientRequest> iterator=requestEntry.getValue().iterator();
    while (iterator.hasNext()) {
      ClientRequest request=iterator.next();
      if (client.ready(node,now)) {
        client.send(request);
        iterator.remove();
        requestsSent=true;
      }
 else       if (client.connectionFailed(node)) {
        RequestFutureCompletionHandler handler=(RequestFutureCompletionHandler)request.callback();
        handler.onComplete(new ClientResponse(request,now,true,null));
        iterator.remove();
      }
    }
  }
  return requestsSent;
}
