{
  final Menu treeContextMenu=new Menu(this.shell);
  final MenuItem createItem=new MenuItem(treeContextMenu,SWT.PUSH);
  createItem.setText("Create...");
  createItem.addSelectionListener(new SelectionAdapter(){
    @Override public void widgetSelected(    final SelectionEvent arg0){
      createNewFailurePattern();
    }
  }
);
  new MenuItem(treeContextMenu,SWT.SEPARATOR);
  final MenuItem deleteItem=new MenuItem(treeContextMenu,SWT.PUSH);
  deleteItem.setText("Delete...");
  deleteItem.addSelectionListener(new SelectionAdapter(){
    @Override public void widgetSelected(    final SelectionEvent arg0){
      deleteFailurePattern();
    }
  }
);
  new MenuItem(treeContextMenu,SWT.SEPARATOR);
  final MenuItem saveItem=new MenuItem(treeContextMenu,SWT.PUSH);
  saveItem.setText("Save...");
  saveItem.addSelectionListener(new SelectionAdapter(){
    @Override public void widgetSelected(    final SelectionEvent arg0){
      saveFailurePattern();
    }
  }
);
  final MenuItem loadItem=new MenuItem(treeContextMenu,SWT.PUSH);
  loadItem.setText("Load...");
  loadItem.addSelectionListener(new SelectionAdapter(){
    @Override public void widgetSelected(    final SelectionEvent arg0){
      loadFailurePattern();
    }
  }
);
  treeContextMenu.addMenuListener(new MenuAdapter(){
    @Override public void menuShown(    final MenuEvent arg0){
      if (jobTree.getSelection().length == 0) {
        createItem.setEnabled(true);
        deleteItem.setEnabled(false);
        saveItem.setEnabled(false);
        loadItem.setEnabled(true);
      }
 else {
        createItem.setEnabled(false);
        deleteItem.setEnabled(true);
        saveItem.setEnabled(true);
        loadItem.setEnabled(false);
      }
    }
  }
);
  return treeContextMenu;
}
