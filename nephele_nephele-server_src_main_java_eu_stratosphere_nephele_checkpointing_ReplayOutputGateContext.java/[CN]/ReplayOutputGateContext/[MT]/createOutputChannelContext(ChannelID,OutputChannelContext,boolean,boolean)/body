{
  if (previousContext != null) {
    activateForwardingBarrier(previousContext);
  }
  final RuntimeDispatcher runtimeDispatcher=new RuntimeDispatcher(this.taskContext.getTransferEnvelopeDispatcher());
  final ForwardingBarrier forwardingBarrier=new ForwardingBarrier(channelID,runtimeDispatcher);
  final ReplayOutputChannelBroker outputChannelBroker=new ReplayOutputChannelBroker(this.taskContext,forwardingBarrier);
  final OutputChannelForwardingChain forwardingChain=new OutputChannelForwardingChain(outputChannelBroker,runtimeDispatcher);
  outputChannelBroker.setForwardingChain(forwardingChain);
  this.taskContext.registerReplayOutputBroker(channelID,outputChannelBroker);
  return new ReplayOutputChannelContext(null,channelID,forwardingChain,previousContext);
}
