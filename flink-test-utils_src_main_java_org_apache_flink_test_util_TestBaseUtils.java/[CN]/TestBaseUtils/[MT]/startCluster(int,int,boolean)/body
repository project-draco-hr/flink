{
  logDir=File.createTempFile("TestBaseUtils-logdir",null);
  Assert.assertTrue("Unable to delete temp file",logDir.delete());
  Assert.assertTrue("Unable to create temp directory",logDir.mkdir());
  Configuration config=new Configuration();
  config.setBoolean(ConfigConstants.FILESYSTEM_DEFAULT_OVERWRITE_KEY,true);
  config.setBoolean(ConfigConstants.TASK_MANAGER_MEMORY_LAZY_ALLOCATION_KEY,true);
  config.setLong(ConfigConstants.TASK_MANAGER_MEMORY_SIZE_KEY,TASK_MANAGER_MEMORY_SIZE);
  config.setInteger(ConfigConstants.TASK_MANAGER_NUM_TASK_SLOTS,taskManagerNumSlots);
  config.setInteger(ConfigConstants.LOCAL_INSTANCE_MANAGER_NUMBER_TASK_MANAGER,numTaskManagers);
  config.setString(ConfigConstants.AKKA_ASK_TIMEOUT,DEFAULT_AKKA_ASK_TIMEOUT + "s");
  config.setString(ConfigConstants.AKKA_STARTUP_TIMEOUT,DEFAULT_AKKA_STARTUP_TIMEOUT);
  config.setBoolean(ConfigConstants.LOCAL_INSTANCE_MANAGER_START_WEBSERVER,startWebserver);
  config.setInteger(ConfigConstants.JOB_MANAGER_WEB_PORT_KEY,8081);
  config.setString(ConfigConstants.JOB_MANAGER_WEB_LOG_PATH_KEY,logDir.toString());
  return new ForkableFlinkMiniCluster(config);
}
