{
  if (cluster.isFinal()) {
    final ArrayNode pointsNode=new ArrayNode();
    for (    final Point point : cluster.getPoints())     pointsNode.add(point.write((IJsonNode)null));
    final ObjectNode clusterNode=new ObjectNode();
    clusterNode.put("id",new TextNode(cluster.getId()));
    clusterNode.put("clustroid",cluster.getClustroid().write((IJsonNode)null));
    clusterNode.put("points",pointsNode);
    out.collect(clusterNode);
  }
 else   for (  final HierarchicalCluster child : cluster.getChildren())   this.emit(child,out);
}
