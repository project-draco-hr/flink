{
  if (this.closed) {
    throw new IllegalStateException("Iterator has been closed.");
  }
  if (this.noMoreBlocks) {
    return false;
  }
  collectAllBuffers(this.emptySegments);
  this.bufferCurrentlyFilled=new Buffer.Output(this.emptySegments.remove(this.emptySegments.size() - 1));
  T next=this.leftOverElement;
  this.leftOverElement=null;
  if (next == null) {
    if (this.input.hasNext()) {
      next=this.input.next();
    }
 else {
      this.noMoreBlocks=true;
      return false;
    }
  }
  if (!this.bufferCurrentlyFilled.write(next)) {
    throw new RuntimeException("BlockResettableIterator: " + "Could not serialize element into fresh block buffer - element is too large.");
  }
  this.nextElement=next;
  return true;
}
