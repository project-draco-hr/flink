{
  if (this.closed) {
    throw new IllegalStateException("Iterator has been closed.");
  }
  if (this.noMoreBlocks) {
    return false;
  }
  collectAllBuffers(this.emptySegments);
  this.bufferCurrentlyFilled=new Buffer.Output(this.emptySegments.remove(this.emptySegments.size() - 1));
  if (this.leftOverElement != null) {
    if (!this.bufferCurrentlyFilled.write(this.leftOverElement)) {
      throw new RuntimeException("BlockResettableIterator: " + "Could not serialize element into fresh block buffer - element is too large.");
    }
    this.nextElement=this.leftOverElement;
    this.leftOverElement=null;
  }
  return true;
}
