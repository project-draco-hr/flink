{
  long currentTime=System.currentTimeMillis();
  if (nextFireTimestamp == 0) {
    long start=currentTime - (currentTime % granularity);
    nextFireTimestamp=start + granularity;
    ctx.registerProcessingTimeTimer(nextFireTimestamp);
    return TriggerResult.CONTINUE;
  }
  if (currentTime > nextFireTimestamp) {
    long start=currentTime - (currentTime % granularity);
    nextFireTimestamp=start + granularity;
    ctx.registerProcessingTimeTimer(nextFireTimestamp);
    return TriggerResult.FIRE;
  }
  return TriggerResult.CONTINUE;
}
