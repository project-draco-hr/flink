{
  if (closeLatch.getCount() == 0) {
    throw new IllegalStateException("Received multiple close events.");
  }
  super.close(ctx,promise);
  closeLatch.countDown();
}
