{
  int magicNumber=header.getInt(EnvelopeWriter.MAGIC_NUMBER_OFFSET);
  if (magicNumber != EnvelopeWriter.MAGIC_NUMBER) {
    throw new IOException("Network stream corrupted: invalid magic number in envelope header.");
  }
  int seqNum=header.getInt(EnvelopeWriter.SEQUENCE_NUMBER_OFFSET);
  JobID jid=JobID.fromByteBuffer(header,EnvelopeWriter.JOB_ID_OFFSET);
  ChannelID cid=ChannelID.fromByteBuffer(header,EnvelopeWriter.CHANNEL_ID_OFFSET);
  return new Envelope(seqNum,jid,cid);
}
