{
  ObjectInputStream oois=null;
  final ClassLoader old=Thread.currentThread().getContextClassLoader();
  try {
    Thread.currentThread().setContextClassLoader(cl);
    oois=new ClassLoaderObjectInputStream(new ByteArrayInputStream(bytes),cl);
    return (T)oois.readObject();
  }
  finally {
    Thread.currentThread().setContextClassLoader(old);
    if (oois != null) {
      oois.close();
    }
  }
}
