{
  if ((this.timestampOfLastTransfer + MIN_IDLE_TIME_BEFORE_CLOSE) > System.currentTimeMillis()) {
    return;
  }
synchronized (this.queuedEnvelopes) {
    if (this.queuedEnvelopes.isEmpty()) {
      LOG.debug("Closing connection to " + socketChannel.socket().getRemoteSocketAddress());
      socketChannel.close();
      key.cancel();
      this.isConnected=false;
      this.closeTimestamp=System.currentTimeMillis();
    }
  }
}
