{
  List<Buffer> buffersToRecycle=new ArrayList<Buffer>();
synchronized (this.queuedEnvelopes) {
    final Iterator<TransferEnvelope> it=this.queuedEnvelopes.iterator();
    while (it.hasNext()) {
      final TransferEnvelope te=it.next();
      if ((source && channelID.equals(te.getSource())) || (!source && channelID.equals(te.getTarget()))) {
        it.remove();
        if (te.getBuffer() != null) {
          buffersToRecycle.add(te.getBuffer());
        }
      }
    }
  }
  final Iterator<Buffer> it=buffersToRecycle.iterator();
  while (it.hasNext()) {
    it.next().recycleBuffer();
  }
}
