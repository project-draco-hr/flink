{
  if (errorInIOThread == null) {
    errorInIOThread=error;
  }
  final NotificationListener listener;
synchronized (lock) {
    listener=registeredListener;
    registeredListener=null;
  }
  if (listener != null) {
    listener.onNotification();
  }
}
