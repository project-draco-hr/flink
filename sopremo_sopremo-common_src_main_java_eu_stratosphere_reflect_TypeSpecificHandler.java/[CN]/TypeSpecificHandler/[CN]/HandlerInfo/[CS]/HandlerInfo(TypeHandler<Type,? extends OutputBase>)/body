{
  this.handler=(Handler)handler;
  Class<?> handlerClass=handler.getClass();
  Method[] methods=handlerClass.getMethods();
  for (  Method method : methods)   if (method.getDeclaringClass() == handler.getClass()) {
    method.setAccessible(true);
    this.callback=method;
    break;
  }
  AppendChildren annotation=this.getAnnotation(handlerClass,this.callback,AppendChildren.class);
  if (annotation != null)   this.appendIndex=annotation.fromIndex();
  this.stopRecursion=this.getAnnotation(handlerClass,this.callback,Leaf.class) != null;
}
