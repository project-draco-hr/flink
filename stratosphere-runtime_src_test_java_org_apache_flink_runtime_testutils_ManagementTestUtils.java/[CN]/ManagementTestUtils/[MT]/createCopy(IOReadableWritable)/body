{
  final ByteArrayOutputStream baos=new ByteArrayOutputStream();
  final DataOutputStream dos=new DataOutputStream(baos);
  try {
    original.write(new OutputViewDataOutputStreamWrapper(dos));
  }
 catch (  IOException ioe) {
    fail(ioe.getMessage());
  }
  final String className=original.getClass().getName();
  if (className == null) {
    fail("Class name is null");
  }
  Class<? extends IOReadableWritable> clazz=null;
  try {
    clazz=(Class<? extends IOReadableWritable>)Class.forName(className);
  }
 catch (  ClassNotFoundException e) {
    fail(e.getMessage());
  }
  if (clazz == null) {
    fail("Cannot find class with name " + className);
  }
  IOReadableWritable copy=null;
  try {
    copy=clazz.newInstance();
  }
 catch (  InstantiationException e) {
    fail(e.getMessage());
  }
catch (  IllegalAccessException e) {
    fail(e.getMessage());
  }
  if (copy == null) {
    fail("Copy of object of type " + className + " is null");
  }
  final ByteArrayInputStream bais=new ByteArrayInputStream(baos.toByteArray());
  final DataInputStream dis=new DataInputStream(bais);
  try {
    copy.read(new InputViewDataInputStreamWrapper(dis));
  }
 catch (  IOException e) {
    fail(e.getMessage());
  }
  return copy;
}
