{
  if (userDefinedVertexToShareInstancesWith && this.vertexToShareInstancesWith.get() != null) {
    throw new GraphConversionException("Cannot overwrite user defined vertex to share instances with");
  }
  if (groupVertex == null) {
    throw new IllegalArgumentException("shareInstancesWith: argument is null!");
  }
  final ExecutionGroupVertex oldVertex=this.vertexToShareInstancesWith.getAndSet(groupVertex);
  if (oldVertex != null) {
    oldVertex.removeFromVerticesSharingInstances(this);
  }
  groupVertex.addToVerticesSharingInstances(this);
  reassignInstances();
  this.executionGraph.repairInstanceAssignment();
}
