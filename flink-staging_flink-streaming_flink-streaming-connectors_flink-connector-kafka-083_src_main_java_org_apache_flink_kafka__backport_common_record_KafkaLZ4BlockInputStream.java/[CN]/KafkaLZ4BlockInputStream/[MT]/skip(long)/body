{
  if (finished) {
    return 0;
  }
  if (available() == 0) {
    readBlock();
  }
  if (finished) {
    return 0;
  }
  n=Math.min(n,available());
  bufferOffset+=n;
  return n;
}
