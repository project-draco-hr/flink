{
  net.jpountz.util.Utils.checkRange(b,off,len);
  if (finished) {
    return -1;
  }
  if (available() == 0) {
    readBlock();
  }
  if (finished) {
    return -1;
  }
  len=Math.min(len,available());
  System.arraycopy(buffer,bufferOffset,b,off,len);
  bufferOffset+=len;
  return len;
}
