{
  if (this.headSequenceNumber == -1) {
    return null;
  }
  Buffer buffer=null;
  if (this.headSequenceNumber == this.tailSequenceNumber) {
    buffer=(Buffer)this.bufferRef;
  }
 else {
    @SuppressWarnings("unchecked") final Queue<Object> bufferQueue=(Queue<Object>)this.bufferRef;
    final Object obj=bufferQueue.poll();
    if (obj == NULL_OBJECT) {
      buffer=null;
    }
 else {
      buffer=(Buffer)obj;
    }
  }
  final TransferEnvelope transferEnvelope=new TransferEnvelope(this.headSequenceNumber,this.jobID,this.source,this.eventList);
  transferEnvelope.setBuffer(buffer);
  ++this.headSequenceNumber;
  if (this.headSequenceNumber == this.tailSequenceNumber) {
    @SuppressWarnings("unchecked") final Queue<Object> bufferQueue=(Queue<Object>)this.bufferRef;
    final Object obj=bufferQueue.poll();
    if (obj == NULL_OBJECT) {
      buffer=null;
    }
 else {
      buffer=(Buffer)obj;
    }
    this.bufferRef=buffer;
  }
 else   if (this.headSequenceNumber > this.tailSequenceNumber) {
    this.headSequenceNumber=-1;
    this.tailSequenceNumber=-1;
  }
  return transferEnvelope;
}
