{
  if (instanceConnectionInfo == null) {
    LOG.warn("Supplied instance connection info is null");
    return null;
  }
synchronized (this.reservedInstances) {
    if (this.reservedInstances.size() == 0) {
      return null;
    }
    final Iterator<String> it=this.reservedInstances.keySet().iterator();
    while (it.hasNext()) {
      final String instanceID=it.next();
      final JobID jobID=this.reservedInstances.get(instanceID);
      JobToInstancesMapping mapping=null;
synchronized (this.jobToInstancesMap) {
        mapping=this.jobToInstancesMap.get(jobID);
      }
      if (mapping == null) {
        LOG.error("Unknown mapping for job ID " + jobID);
        continue;
      }
      final List<com.xerox.amazonws.ec2.ReservationDescription.Instance> instances=describeInstances(mapping.getOwner(),mapping.getAwsAccessId(),mapping.getAwsSecretKey());
      if (instances == null) {
        continue;
      }
      final Iterator<com.xerox.amazonws.ec2.ReservationDescription.Instance> it2=instances.iterator();
      while (it2.hasNext()) {
        final com.xerox.amazonws.ec2.ReservationDescription.Instance i=it2.next();
        InetAddress candidateAddress=null;
        try {
          candidateAddress=InetAddress.getByName(i.getDnsName());
        }
 catch (        UnknownHostException e) {
          LOG.warn("Cannot convert " + i.getDnsName() + " into an IP address");
          continue;
        }
        if (instanceConnectionInfo.getAddress().equals(candidateAddress)) {
          return convertIntoCloudInstance(i,instanceConnectionInfo,mapping.getOwner());
        }
      }
    }
  }
  return null;
}
