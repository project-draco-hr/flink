{
  final AbstractInstance instance=allocatedResource.getInstance();
  JobToInstancesMapping jobToInstanceMapping=null;
synchronized (this.jobToInstancesAssignmentMap) {
    jobToInstanceMapping=this.jobToInstancesAssignmentMap.get(jobID);
    if (jobToInstanceMapping == null) {
      LOG.error("No mapping for job " + jobID);
      return;
    }
  }
  if (jobToInstanceMapping.getAssignedInstances().contains(instance)) {
    jobToInstanceMapping.unassignInstanceFromJob((CloudInstance)instance);
    this.floatingInstances.put(instance.getInstanceConnectionInfo(),((CloudInstance)instance).asFloatingInstance());
    LOG.info("Convert " + ((CloudInstance)instance).getInstanceID() + " from allocated instance to floating instance");
  }
 else {
    LOG.error("Job " + jobID + " contains no such instance");
    return;
  }
}
