{
  final String imageID=GlobalConfiguration.getString("ec2.image.id",null);
  if (imageID == null) {
    LOG.error("Unable to allocate instance: Image ID is unknown");
    return null;
  }
  AmazonEC2Client ec2client=EC2ClientFactory.getEC2Client(awsAccessId,awsSecretKey);
  com.amazonaws.services.ec2.model.RunInstancesRequest request=new RunInstancesRequest(imageID,count,count);
  request.setInstanceType(instanceType.getIdentifier());
  BlockDeviceMapping bdm=new BlockDeviceMapping();
  bdm.setVirtualName("ephemeral0");
  bdm.setDeviceName("/dev/sdb1");
  LinkedList<BlockDeviceMapping> bdmlist=new LinkedList<BlockDeviceMapping>();
  bdmlist.add(bdm);
  request.setBlockDeviceMappings(bdmlist);
  RunInstancesResult result=ec2client.runInstances(request);
  LinkedList<String> instanceIDs=new LinkedList<String>();
  for (  Instance i : result.getReservation().getInstances()) {
    instanceIDs.add(i.getInstanceId());
  }
  return instanceIDs;
}
