{
  if (proxy != null) {
    return proxy;
  }
  ProxyFactory factory=new ProxyFactory();
  factory.setSuperclass(obj.getClass());
  factory.setInterfaces(new Class[]{ReferentProxy.class});
  Class<? extends X> proxyClass=factory.createClass(new MethodFilter(){
    @Override public boolean isHandled(    Method method){
      return true;
    }
  }
);
  proxy=new ObjenesisStd().newInstance(proxyClass);
  ((ProxyObject)proxy).setHandler(new MethodHandler(){
    @Override public Object invoke(    Object self,    Method thisMethod,    Method proceed,    Object[] args) throws Throwable {
      if (thisMethod.getName().equals("getProxiedObject")) {
        return obj;
      }
 else {
        thisMethod.setAccessible(true);
        return thisMethod.invoke(obj,args);
      }
    }
  }
);
  return proxy;
}
