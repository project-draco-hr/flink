{
synchronized (registeredPartitions) {
    final ResultPartition partition=registeredPartitions.get(partitionId.getProducerId(),partitionId.getPartitionId());
    if (partition == null) {
      throw new IOException("Unknown partition " + partitionId + ".");
    }
    LOG.debug("Requested partition {}.",partition);
    return partition.getSubpartition(subpartitionIndex,bufferProvider);
  }
}
