{
  this.fields=new Field[fs.length];
  this.fieldsByName=new HashMap<String,Field>();
  for (int i=0; i < this.fields.length; i++) {
    Field field=fs[i];
    if (fieldsByName.containsKey(field.name))     throw new SchemaException("Schema contains a duplicate field: " + field.name);
    this.fields[i]=new Field(i,field.name,field.type,field.doc,field.defaultValue,this);
    this.fieldsByName.put(fs[i].name,this.fields[i]);
  }
}
