{
  Preconditions.checkState(currentKey != null,"No key set");
  if (value == null) {
    clear();
    return;
  }
  if (currentNSState == null) {
    Preconditions.checkState(currentNamespace != null,"No namespace set");
    currentNSState=createNewNamespaceMap();
    state.put(currentNamespace,currentNSState);
  }
  currentNSState.put(currentKey,value);
}
