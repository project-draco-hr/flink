{
  checkForDeleted(bufferSize);
  long threshold=timestamp.getTimestamp(datapoint) - granularity;
  int counter=deleteAndCountExpired(threshold);
  buffer.add(datapoint);
  return counter;
}
