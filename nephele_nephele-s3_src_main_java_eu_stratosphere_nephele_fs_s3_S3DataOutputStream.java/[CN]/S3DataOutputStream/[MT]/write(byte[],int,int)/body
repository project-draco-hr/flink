{
  int nextPos=off;
  while (nextPos < len) {
    if (this.bytesWritten == this.buf.length) {
      uploadPartAndFlushBuffer();
    }
    final int bytesToCopy=Math.min(this.buf.length - this.bytesWritten,len - nextPos);
    System.arraycopy(b,nextPos,this.buf,this.bytesWritten,bytesToCopy);
    this.bytesWritten+=bytesToCopy;
    nextPos+=bytesToCopy;
  }
}
