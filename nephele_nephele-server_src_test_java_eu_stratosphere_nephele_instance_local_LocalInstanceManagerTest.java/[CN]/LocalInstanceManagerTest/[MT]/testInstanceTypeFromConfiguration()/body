{
  final String configDir=ServerTestUtils.getConfigDir();
  if (configDir == null) {
    fail("Cannot locate configuration directory");
  }
  GlobalConfiguration.loadConfiguration(configDir);
  ExecutionMode executionMode=ExecutionMode.LOCAL;
  JobManager jm=new JobManager(executionMode);
  final TestInstanceListener testInstanceListener=new TestInstanceListener();
  LocalInstanceManager lm=(LocalInstanceManager)jm.getInstanceManager();
  try {
    lm.setInstanceListener(testInstanceListener);
    final InstanceType defaultInstanceType=lm.getDefaultInstanceType();
    assertEquals("test",defaultInstanceType.getIdentifier());
    assertEquals(4,defaultInstanceType.getNumberOfComputeUnits());
    assertEquals(4,defaultInstanceType.getNumberOfCores());
    assertEquals(1024,defaultInstanceType.getMemorySize());
    assertEquals(160,defaultInstanceType.getDiskCapacity());
    assertEquals(0,defaultInstanceType.getPricePerHour());
  }
 catch (  Exception e) {
    e.printStackTrace();
    Assert.fail("Instantiation of LocalInstanceManager failed: " + e.getMessage());
  }
 finally {
    jm.shutdown();
  }
}
