{
  final String configDir=System.getProperty(USER_DIR_KEY) + CORRECT_CONF_DIR;
  final TestInstanceListener testInstanceListener=new TestInstanceListener();
  LocalInstanceManager lm=null;
  try {
    lm=new LocalInstanceManager(configDir);
    lm.setInstanceListener(testInstanceListener);
    final InstanceType defaultInstanceType=lm.getDefaultInstanceType();
    assertEquals("test",defaultInstanceType.getIdentifier());
    assertEquals(4,defaultInstanceType.getNumberOfComputeUnits());
    assertEquals(4,defaultInstanceType.getNumberOfCores());
    assertEquals(1024,defaultInstanceType.getMemorySize());
    assertEquals(160,defaultInstanceType.getDiskCapacity());
    assertEquals(0,defaultInstanceType.getPricePerHour());
  }
 catch (  Exception e) {
    Assert.fail("Instanciating LocalInstanceManager failed: " + e.getMessage());
  }
 finally {
    if (lm != null) {
      lm.shutdown();
    }
  }
}
