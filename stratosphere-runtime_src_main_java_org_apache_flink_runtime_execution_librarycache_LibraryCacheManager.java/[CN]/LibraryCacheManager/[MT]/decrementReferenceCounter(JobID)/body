{
  final AtomicInteger ai=this.libraryReferenceCounter.get(jobID);
  if (ai == null) {
    throw new IllegalStateException("Cannot find reference counter entry for job " + jobID);
  }
  int retVal=ai.decrementAndGet();
  if (retVal == 0) {
    this.libraryReferenceCounter.remove(jobID);
  }
  return retVal;
}
