{
  try {
    List<AbstractEvent> events=jobmanager.getEvents(jobId);
    wrt.write("{");
    wrt.write("\"jobid\": \"" + jobId + "\",");
    wrt.write("\"timestamp\": \"" + System.currentTimeMillis() + "\",");
    wrt.write("\"recentjobs\": [");
    boolean first=true;
    for (    RecentJobEvent rje : jobmanager.getRecentJobs()) {
      if (first) {
        first=false;
      }
 else {
        wrt.write(",");
      }
      wrt.write("\"" + rje.getJobID().toString() + "\"");
    }
    wrt.write("],");
    wrt.write("\"vertexevents\": [");
    first=true;
    for (    AbstractEvent event : events) {
      if (event instanceof ExecutionStateChangeEvent) {
        if (first) {
          first=false;
        }
 else {
          wrt.write(",");
        }
        ExecutionStateChangeEvent vertexevent=(ExecutionStateChangeEvent)event;
        wrt.write("{");
        wrt.write("\"vertexid\": \"" + vertexevent.getExecutionAttemptID() + "\",");
        wrt.write("\"newstate\": \"" + vertexevent.getNewExecutionState() + "\",");
        wrt.write("\"timestamp\": \"" + vertexevent.getTimestamp() + "\"");
        wrt.write("}");
      }
    }
    wrt.write("],");
    wrt.write("\"jobevents\": [");
    first=true;
    for (    AbstractEvent event : events) {
      if (event instanceof JobEvent) {
        if (first) {
          first=false;
        }
 else {
          wrt.write(",");
        }
        JobEvent jobevent=(JobEvent)event;
        wrt.write("{");
        wrt.write("\"newstate\": \"" + jobevent.getCurrentJobStatus() + "\",");
        wrt.write("\"timestamp\": \"" + jobevent.getTimestamp() + "\"");
        wrt.write("}");
      }
    }
    wrt.write("]");
    wrt.write("}");
  }
 catch (  EofException eof) {
    LOG.info("Info server for jobmanager: Connection closed by client, EofException");
  }
catch (  IOException ioe) {
    LOG.info("Info server for jobmanager: Connection closed by client, IOException");
  }
}
