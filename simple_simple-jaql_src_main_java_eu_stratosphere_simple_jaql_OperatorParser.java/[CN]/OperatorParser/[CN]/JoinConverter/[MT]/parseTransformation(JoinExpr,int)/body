{
  OperatorParser.this.queryParser.bindings.set("$",new Binding(null,new Input(0)));
  Transformation transformation=OperatorParser.this.queryParser.parseTransformation(((ForExpr)expr.parent().parent()).collectExpr());
  for (int inputIndex=0; inputIndex < numInputs; inputIndex++) {
    Path alias=new Path(new Input(0),new FieldAccess(this.inputAliases.get(inputIndex)));
    transformation.replace(alias,new Path(new Input(inputIndex)));
  }
  return transformation;
}
