def _create_lock(locked, *args):
    from threading import Lock
    lock = Lock()
    if locked:
        if (not lock.acquire(False)):
            raise UnpicklingError('Cannot acquire lock')
    return lock
