{
  DoExpr doExpr=(DoExpr)expr;
  Expr originalDoParent=doExpr.parent();
  int originalDoSlot=doExpr.getChildSlot();
  Expr fn=originalDoParent;
  if (fn instanceof BindingExpr) {
    Expr bind=fn;
    fn=bind.parent();
    if ((fn instanceof TransformExpr || fn instanceof FilterExpr || fn instanceof ForExpr|| fn instanceof GroupByExpr) && bind.getChildSlot() == 0) {
    }
 else {
      return false;
    }
  }
 else   if (fn.evaluatesChildOnce(originalDoSlot).maybeNot() || fn instanceof ExplainExpr || fn instanceof QueryExpr|| fn instanceof DoExpr|| fn instanceof IfExpr|| fn instanceof CheckFn) {
    return false;
  }
  Expr ret=doExpr.returnExpr();
  fn.replaceInParent(doExpr);
  ret.replaceInParent(fn);
  originalDoParent.setChild(originalDoSlot,ret);
  return true;
}
