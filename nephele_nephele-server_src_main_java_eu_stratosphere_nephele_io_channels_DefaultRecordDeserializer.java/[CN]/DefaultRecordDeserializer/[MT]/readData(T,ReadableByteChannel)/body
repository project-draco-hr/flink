{
  if (readableByteChannel != this.lastReadableByteChannel) {
    final Buffer buffer=(Buffer)readableByteChannel;
    if (buffer.isBackedByMemory()) {
      this.dataInput=new MemoryInputWrapper(((MemoryBuffer)buffer).getByteBuffer());
    }
 else {
      this.dataInput=new FileInputWrapper(buffer);
    }
    this.lastReadableByteChannel=readableByteChannel;
  }
  if (target == null) {
    target=this.recordFactory.createRecord();
  }
  try {
    target.read(this.dataInput);
  }
 catch (  BufferUnderflowException e) {
    return null;
  }
  return target;
}
