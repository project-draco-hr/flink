{
  PactString str=this.theString;
  if (this.ascii) {
    str.setValueAscii(bytes,0,numBytes);
  }
 else {
    ByteBuffer byteWrapper=this.byteWrapper;
    if (bytes != byteWrapper.array()) {
      byteWrapper=ByteBuffer.wrap(bytes,0,bytes.length);
      this.byteWrapper=byteWrapper;
    }
    byteWrapper.position(0);
    byteWrapper.limit(numBytes);
    try {
      CharBuffer result=this.decoder.decode(byteWrapper);
      str.setValue(result);
    }
 catch (    CharacterCodingException e) {
      byte[] copy=new byte[numBytes];
      System.arraycopy(bytes,0,copy,0,numBytes);
      LOG.warn("Line could not be encoded: " + Arrays.toString(copy),e);
      return false;
    }
  }
  target.clear();
  target.addField(str);
  return true;
}
