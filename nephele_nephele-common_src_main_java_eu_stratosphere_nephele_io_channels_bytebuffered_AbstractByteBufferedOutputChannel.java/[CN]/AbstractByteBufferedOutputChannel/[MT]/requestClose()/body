{
  if (!this.closeRequested) {
    this.closeRequested=true;
    if (this.serializationBuffer.dataLeftFromPreviousSerialization()) {
      flush();
    }
    if (!isBroadcastChannel() || getChannelIndex() == 0) {
      transferEvent(new ByteBufferedChannelCloseEvent());
    }
  }
}
