{
  TaskState state=mock(TaskState.class);
  Map<JobVertexID,TaskState> taskStates=new HashMap<>();
  taskStates.put(new JobVertexID(),state);
  CompletedCheckpoint checkpoint=new CompletedCheckpoint(new JobID(),0,0,1,taskStates,true);
  checkpoint.discard(ClassLoader.getSystemClassLoader());
  verify(state,times(1)).discard(Matchers.any(ClassLoader.class));
  Mockito.reset(state);
  checkpoint=new CompletedCheckpoint(new JobID(),0,0,1,taskStates,false);
  checkpoint.discard(ClassLoader.getSystemClassLoader());
  verify(state,times(0)).discard(Matchers.any(ClassLoader.class));
}
