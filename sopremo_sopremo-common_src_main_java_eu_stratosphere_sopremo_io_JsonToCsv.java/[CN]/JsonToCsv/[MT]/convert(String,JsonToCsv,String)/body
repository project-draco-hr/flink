{
  final PactModule sourceModule=new Source(sourceFile).asPactModule(jsonToCsv.getContext());
  final Contract source=sourceModule.getOutput(0).getInputs().get(0);
  final MapContract jsonToString=new MapContract.Builder(JsonToString.class).build();
  jsonToString.getParameters().setString("separator",jsonToCsv.getSeparator());
  SopremoUtil.serialize(jsonToString.getParameters(),SopremoUtil.CONTEXT,jsonToCsv.getContext());
  SopremoUtil.serialize(jsonToString.getParameters(),"extractionExpressions",(Serializable)jsonToCsv.getExtractionExpressions());
  jsonToString.setInput(source);
  final FileDataSink target=new FileDataSink(StringOutputFormat.class,targetFile);
  target.setInput(jsonToString);
  return target;
}
