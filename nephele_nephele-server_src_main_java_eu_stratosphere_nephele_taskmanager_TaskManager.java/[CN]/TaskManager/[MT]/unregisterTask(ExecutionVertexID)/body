{
synchronized (this) {
    final Task task=this.runningTasks.remove(id);
    if (task == null) {
      LOG.error("Cannot find task with ID " + id + " to unregister");
      return;
    }
    this.routingLayer.unregister(id,task);
    task.unregisterProfiler(this.profiler);
    task.unregisterMemoryManager(this.memoryManager);
    if (!this.taskManagerPlugins.isEmpty()) {
      final Iterator<TaskManagerPlugin> it=this.taskManagerPlugins.values().iterator();
      while (it.hasNext()) {
        it.next().unregisterTask(id,task.getEnvironment());
      }
    }
    try {
      LibraryCacheManager.unregister(task.getJobID());
    }
 catch (    IOException e) {
      if (LOG.isDebugEnabled()) {
        LOG.debug("Unregistering the job vertex ID " + id + " caused an IOException");
      }
    }
  }
}
