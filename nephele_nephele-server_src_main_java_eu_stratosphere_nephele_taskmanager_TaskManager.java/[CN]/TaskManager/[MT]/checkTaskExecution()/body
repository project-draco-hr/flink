{
  final List<Environment> crashEnvironments=new LinkedList<Environment>();
synchronized (this.runningTasks) {
    final Iterator<ExecutionVertexID> it=this.runningTasks.keySet().iterator();
    while (it.hasNext()) {
      final ExecutionVertexID executionVertexID=it.next();
      final Environment environment=this.runningTasks.get(executionVertexID);
      if (environment.getExecutingThread().getState() == Thread.State.TERMINATED) {
        it.remove();
        crashEnvironments.add(environment);
      }
    }
  }
  final Iterator<Environment> it2=crashEnvironments.iterator();
  while (it2.hasNext()) {
    it2.next().changeExecutionState(ExecutionState.FAILED,"Execution thread died unexpectedly");
  }
}
