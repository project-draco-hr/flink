{
  FieldSet newPartitionedFields=null;
  PartitionProperty newPartitioning=PartitionProperty.NONE;
  Ordering newOrdering=null;
  if (partitionedFields != null) {
    for (    Integer index : partitionedFields) {
      if (node.isFieldKept(input,index) == true) {
        if (newPartitionedFields == null) {
          newPartitioning=this.partitioning;
          newPartitionedFields=new FieldSet();
        }
        newPartitionedFields.add(index);
      }
    }
  }
  if (ordering != null) {
    boolean orderingPreserved=true;
    ArrayList<Integer> involvedIndexes=ordering.getInvolvedIndexes();
    for (int i=0; i < involvedIndexes.size(); i++) {
      if (node.isFieldKept(input,i) == false) {
        orderingPreserved=false;
        break;
      }
    }
    if (orderingPreserved) {
      newOrdering=ordering.clone();
    }
  }
  if (newPartitioning == PartitionProperty.NONE && newOrdering == null) {
    return null;
  }
 else {
    return new GlobalProperties(newPartitioning,newOrdering,newPartitionedFields);
  }
}
