{
  if (t instanceof SuppressRestartsException) {
    if (restartStrategy != null) {
      restartStrategy.disable();
    }
  }
  while (true) {
    JobStatus current=state;
    if (current == JobStatus.FAILING || current.isTerminalState()) {
      return;
    }
 else     if (transitionState(current,JobStatus.FAILING,t)) {
      this.failureCause=t;
      if (!verticesInCreationOrder.isEmpty()) {
        for (        ExecutionJobVertex ejv : verticesInCreationOrder) {
          ejv.cancel();
        }
      }
 else {
        transitionState(JobStatus.FAILING,JobStatus.FAILED,t);
      }
      return;
    }
  }
}
