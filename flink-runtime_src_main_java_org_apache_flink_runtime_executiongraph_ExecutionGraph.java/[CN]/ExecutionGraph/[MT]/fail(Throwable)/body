{
  if (LOG.isErrorEnabled()) {
    LOG.error(String.format("Failing ExecutionGraph %s (%s): ",getJobID(),getJobName()),t);
  }
  while (true) {
    JobStatus current=state;
    if (current != JobStatus.FAILED) {
      if (transitionState(current,JobStatus.FAILED,t)) {
        for (        ExecutionJobVertex ejv : verticesInCreationOrder) {
          ejv.cancel();
        }
      }
    }
  }
}
