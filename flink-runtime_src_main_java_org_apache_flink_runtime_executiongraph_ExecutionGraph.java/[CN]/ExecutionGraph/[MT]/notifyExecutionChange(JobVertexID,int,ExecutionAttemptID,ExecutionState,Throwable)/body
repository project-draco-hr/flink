{
  if (executionListeners.size() > 0) {
    String message=error == null ? null : ExceptionUtils.stringifyException(error);
    for (    ExecutionListener listener : this.executionListeners) {
      try {
        listener.executionStateChanged(jobID,vertexId,subtask,executionID,newExecutionState,message);
      }
 catch (      Throwable t) {
        LOG.error("Notification of execution state change caused an error.");
      }
    }
  }
  if (executionListenerActors.size() > 0) {
    String message=error == null ? null : ExceptionUtils.stringifyException(error);
    for (    ActorRef listener : executionListenerActors) {
      listener.tell(new ExecutionGraphMessages.ExecutionStateChanged(jobID,vertexId,subtask,executionID,newExecutionState,System.currentTimeMillis(),message),ActorRef.noSender());
    }
  }
  if (newExecutionState == ExecutionState.FAILED) {
    fail(error);
  }
}
