{
  while (true) {
    ExecutionState current=this.executionState;
    if (current == ExecutionState.CANCELED) {
      return;
    }
 else     if (STATE_UPDATER.compareAndSet(this,current,ExecutionState.FAILED)) {
      this.failureCause=error;
      notifyObservers(ExecutionState.FAILED,ExceptionUtils.stringifyException(error));
      unregisterTask();
      return;
    }
  }
}
