{
  final String serviceNetwork=GlobalConfiguration.getString("servicenetwork",null);
  InetAddress serviceNetworkAddress=null;
  if (serviceNetwork == null) {
    return null;
  }
  try {
    serviceNetworkAddress=InetAddress.getByName(serviceNetwork);
    if ((serviceNetworkAddress instanceof Inet4Address) && USEIPV6) {
      throw new UnknownHostException();
    }
    if ((serviceNetworkAddress instanceof Inet6Address) && !USEIPV6) {
      throw new UnknownHostException();
    }
  }
 catch (  UnknownHostException e) {
    if (USEIPV6) {
      LOG.error("Configured service network is not a valid IPv6 address");
    }
 else {
      LOG.error("Configured service network is not a valid IPv4 address");
    }
  }
  if (serviceNetworkAddress == null) {
    return null;
  }
  return findLocalAddressOnSameNetwork(serviceNetworkAddress);
}
