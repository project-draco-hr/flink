{
  if (!this.running.compareAndSet(true,false)) {
    return;
  }
synchronized (this.connections) {
    for (    final Connection conn : this.connections.values()) {
      conn.interrupt();
    }
  }
  while (!this.connections.isEmpty()) {
    try {
      Thread.sleep(100);
    }
 catch (    InterruptedException e) {
    }
  }
}
