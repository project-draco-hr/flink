{
  super.restoreState(state,recoveryTimestamp);
  StreamStateHandle stream=(StreamStateHandle)state.getOperatorState();
  final InputStream is=stream.getState(getUserCodeClassloader());
  final ObjectInputStream ois=new ObjectInputStream(is);
  final DataInputViewStreamWrapper div=new DataInputViewStreamWrapper(is);
  nfa=(NFA<IN>)ois.readObject();
  int numberPriorityQueueEntries=div.readInt();
  priorityQueue=new PriorityQueue<StreamRecord<IN>>(numberPriorityQueueEntries,new StreamRecordComparator<IN>());
  for (int i=0; i < numberPriorityQueueEntries; i++) {
    priorityQueue.offer(streamRecordSerializer.deserialize(div));
  }
}
