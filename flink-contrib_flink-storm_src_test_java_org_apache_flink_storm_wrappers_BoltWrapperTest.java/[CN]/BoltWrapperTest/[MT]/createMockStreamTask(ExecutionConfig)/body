{
  Environment env=mock(Environment.class);
  when(env.getTaskName()).thenReturn("Mock Task");
  when(env.getTaskNameWithSubtasks()).thenReturn("Mock Task (1/1)");
  when(env.getIndexInSubtaskGroup()).thenReturn(0);
  when(env.getNumberOfSubtasks()).thenReturn(1);
  when(env.getUserClassLoader()).thenReturn(BoltWrapperTest.class.getClassLoader());
  StreamTask<?,?> mockTask=mock(StreamTask.class);
  when(mockTask.getName()).thenReturn("Mock Task (1/1)");
  when(mockTask.getCheckpointLock()).thenReturn(new Object());
  when(mockTask.getConfiguration()).thenReturn(new StreamConfig(new Configuration()));
  when(mockTask.getEnvironment()).thenReturn(env);
  when(mockTask.getExecutionConfig()).thenReturn(execConfig);
  return mockTask;
}
