{
  Map<String,Object> values=new HashMap<String,Object>();
  for (  ConfigKey key : configKeys.values()) {
    Object value;
    if (props.containsKey(key.name))     value=parseType(key.name,props.get(key.name),key.type);
 else     if (key.defaultValue == NO_DEFAULT_VALUE && key.required)     throw new ConfigException("Missing required configuration \"" + key.name + "\" which has no default value.");
 else     if (!key.hasDefault() && !key.required)     value=null;
 else     value=key.defaultValue;
    if (key.validator != null)     key.validator.ensureValid(key.name,value);
    values.put(key.name,value);
  }
  return values;
}
