{
  DbStateBackend dbBackend=new DbStateBackend(conf);
  assertFalse(dbBackend.isInitialized());
  DbStateBackend backend=CommonTestUtils.createCopySerializable(dbBackend);
  assertFalse(backend.isInitialized());
  Environment env=new DummyEnvironment("test",1,0);
  backend.initializeForJob(env,"dummy-setup-ser",StringSerializer.INSTANCE);
  String appId=env.getApplicationID().toString().substring(0,16);
  assertNotNull(backend.getConnections());
  assertTrue(isTableCreated(backend.getConnections().getFirst(),"checkpoints_" + appId));
  backend.disposeAllStateForCurrentJob();
  assertFalse(isTableCreated(backend.getConnections().getFirst(),"checkpoints_" + appId));
  backend.close();
  assertTrue(backend.getConnections().getFirst().isClosed());
}
