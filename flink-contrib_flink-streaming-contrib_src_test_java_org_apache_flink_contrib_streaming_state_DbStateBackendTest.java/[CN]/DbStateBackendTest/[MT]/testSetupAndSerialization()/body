{
  DbStateBackend dbBackend=new DbStateBackend(conf);
  assertFalse(dbBackend.isInitialized());
  DbStateBackend backend=CommonTestUtils.createCopySerializable(dbBackend);
  assertFalse(backend.isInitialized());
  assertEquals(dbBackend.getConfiguration(),backend.getConfiguration());
  Environment env=new DummyEnvironment("test",1,0);
  backend.initializeForJob(env);
  assertNotNull(backend.getConnection());
  assertTrue(isTableCreated(backend.getConnection(),"checkpoints_" + env.getJobID().toString()));
  backend.disposeAllStateForCurrentJob();
  assertFalse(isTableCreated(backend.getConnection(),"checkpoints_" + env.getJobID().toString()));
  backend.close();
  assertTrue(backend.getConnection().isClosed());
}
