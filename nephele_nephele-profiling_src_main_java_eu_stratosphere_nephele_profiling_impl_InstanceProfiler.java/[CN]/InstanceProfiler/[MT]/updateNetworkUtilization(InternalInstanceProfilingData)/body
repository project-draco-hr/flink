{
  BufferedReader in=null;
  try {
    in=new BufferedReader(new FileReader(PROC_NET_DEV));
    long receivedSum=0;
    long transmittedSum=0;
    String output;
    while ((output=in.readLine()) != null) {
      final Matcher networkMatcher=NETWORK_PATTERN.matcher(output);
      if (!networkMatcher.matches()) {
        continue;
      }
      receivedSum+=Long.parseLong(networkMatcher.group(1));
      transmittedSum+=Long.parseLong(networkMatcher.group(2));
    }
    in.close();
    in=null;
    profilingData.setReceivedBytes(receivedSum - this.lastReceivedBytes);
    profilingData.setTransmittedBytes(transmittedSum - this.lastTramsmittedBytes);
    this.lastReceivedBytes=receivedSum;
    this.lastTramsmittedBytes=transmittedSum;
  }
 catch (  IOException ioe) {
    throw new ProfilingException("Error while reading network utilization: " + StringUtils.stringifyException(ioe));
  }
catch (  NumberFormatException nfe) {
    throw new ProfilingException("Error while reading network utilization: " + StringUtils.stringifyException(nfe));
  }
 finally {
    if (in != null) {
      try {
        in.close();
      }
 catch (      IOException e) {
      }
    }
  }
}
