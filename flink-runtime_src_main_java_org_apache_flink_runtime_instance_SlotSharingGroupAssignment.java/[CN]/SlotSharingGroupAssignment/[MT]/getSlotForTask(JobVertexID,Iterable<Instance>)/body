{
synchronized (lock) {
    Pair<SharedSlot,Locality> p=getSlotForTaskInternal(vertexID,locationPreferences,false);
    if (p != null) {
      SharedSlot ss=p.getLeft();
      SimpleSlot slot=ss.allocateSubSlot(vertexID);
      slot.setLocality(p.getRight());
      return slot;
    }
 else {
      return null;
    }
  }
}
