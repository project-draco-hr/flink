{
  Iterator<Entry<String,JsonNode>> fields1=value1.getFields();
  Iterator<Entry<String,JsonNode>> fields2=value2.getFields();
  while (fields1.hasNext() && fields2.hasNext()) {
    Entry<String,JsonNode> field1=fields1.next();
    Entry<String,JsonNode> field2=fields2.next();
    int keyComparison=field1.getKey().compareTo(field2.getKey());
    if (keyComparison != 0)     return keyComparison;
    int valueComparison=JsonNodeComparator.INSTANCE.compare(field1.getValue(),field2.getValue());
    if (valueComparison != 0)     return valueComparison;
  }
  return fields1.hasNext() ? -1 : (fields2.hasNext() ? 1 : 0);
}
