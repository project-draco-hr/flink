{
  long progress=(Long)value.getField(windowFieldId);
  if (initTimestamp == -1) {
    initTimestamp=progress;
    nextTimestamp=initTimestamp + computeGranularity;
    tempArrayList=new ArrayList();
  }
 else {
    if (progress > nextTimestamp) {
      if (window.isFull()) {
        ArrayList expiredArrayList=window.popFront();
        incrementCompute(tempArrayList);
        decrementCompute(expiredArrayList);
        window.pushBack(tempArrayList);
        if (window.isEmittable()) {
          produceOutput(progress,out);
        }
      }
 else {
        incrementCompute(tempArrayList);
        window.pushBack(tempArrayList);
        if (window.isFull()) {
          produceOutput(progress,out);
        }
      }
      initTimestamp=nextTimestamp;
      nextTimestamp=initTimestamp + computeGranularity;
      tempArrayList=new ArrayList();
    }
    tempArrayList.add(value);
  }
}
