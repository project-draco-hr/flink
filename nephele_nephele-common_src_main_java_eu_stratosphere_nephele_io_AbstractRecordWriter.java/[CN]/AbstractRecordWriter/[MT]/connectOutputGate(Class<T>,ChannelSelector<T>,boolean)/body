{
  if (this.environment.hasUnboundOutputGates()) {
    final OutputGate<T> eog=(OutputGate<T>)this.environment.getUnboundOutputGate(0);
    if (!outputClass.equals(eog.getType())) {
      throw new RuntimeException("Unbound input gate found, but types do not match!");
    }
    this.outputGate=eog;
  }
 else {
    this.outputGate=(OutputGate<T>)this.environment.createAndRegisterOutputGate(outputClass,selector,isBroadcast);
  }
}
