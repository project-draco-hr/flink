{
  try {
    File tmpFolder=folder.newFolder();
    String currentUser=System.getProperty("user.name");
    File confFile=new File(CliFrontendRunTest.class.getResource("/testconfigwithyarn/flink-conf.yaml").getFile());
    File testConfFile=new File(tmpFolder,"flink-conf.yaml");
    org.apache.commons.io.FileUtils.copyFile(confFile,testConfFile);
    String toAppend="\nyarn.properties-file.location: " + tmpFolder;
    Files.write(testConfFile.toPath(),toAppend.getBytes(),StandardOpenOption.APPEND);
    File propertiesFile=new File(CliFrontendRunTest.class.getResource("/testconfigwithyarn/.yarn-properties").getFile());
    File testPropertiesFile=new File(tmpFolder,".yarn-properties-" + currentUser);
    org.apache.commons.io.FileUtils.copyFile(propertiesFile,testPropertiesFile);
    CliFrontend frontend=new CliFrontend(tmpFolder.getAbsolutePath());
    CommandLineOptions options=mock(CommandLineOptions.class);
    InetSocketAddress address=frontend.getJobManagerAddress(options);
    assertNotNull(address);
    assertEquals(CliFrontendTestUtils.TEST_YARN_JOB_MANAGER_ADDRESS,address.getAddress().getHostAddress());
    assertEquals(CliFrontendTestUtils.TEST_YARN_JOB_MANAGER_PORT,address.getPort());
  }
 catch (  Exception e) {
    e.printStackTrace();
    fail(e.getMessage());
  }
}
