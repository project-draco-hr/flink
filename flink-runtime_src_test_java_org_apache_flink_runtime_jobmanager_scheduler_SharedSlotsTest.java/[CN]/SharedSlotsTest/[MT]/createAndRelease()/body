{
  try {
    SlotSharingGroupAssignment assignment=mock(SlotSharingGroupAssignment.class);
    when(assignment.sharedSlotAvailableForJid(any(SharedSlot.class),any(JobVertexID.class),eq(false))).thenReturn(false);
    when(assignment.sharedSlotAvailableForJid(any(SharedSlot.class),any(JobVertexID.class),eq(true))).thenReturn(true);
    Instance instance=SchedulerTestUtils.getRandomInstance(1);
    SharedSlot slot=new SharedSlot(instance.allocateSlot(new JobID()),assignment);
    assertFalse(slot.isDisposed());
    SubSlot ss1=slot.allocateSubSlot(new JobVertexID());
    assertNotNull(ss1);
    assertEquals(instance,ss1.getInstance());
    assertEquals(0,ss1.getSlotNumber());
    assertEquals(slot.getAllocatedSlot().getJobID(),ss1.getJobID());
    SubSlot ss2=slot.allocateSubSlot(new JobVertexID());
    assertNotNull(ss2);
    assertEquals(2,slot.getNumberOfAllocatedSubSlots());
    ss1.releaseSlot();
    assertFalse(slot.isDisposed());
    ss2.releaseSlot();
    assertTrue(slot.isDisposed());
    assertEquals(0,slot.getNumberOfAllocatedSubSlots());
    assertNull(slot.allocateSubSlot(new JobVertexID()));
  }
 catch (  Exception e) {
    e.printStackTrace();
    fail(e.getMessage());
  }
}
