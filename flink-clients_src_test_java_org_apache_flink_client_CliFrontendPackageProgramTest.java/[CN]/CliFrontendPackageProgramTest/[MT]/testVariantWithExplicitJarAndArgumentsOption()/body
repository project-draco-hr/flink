{
  try {
    String[] arguments={"-j",getTestJarPath(),"-a","--verbose","true","arg1","arg2"};
    CommandLine line=new PosixParser().parse(CliFrontend.getProgramSpecificOptions(new Options()),arguments,true);
    CliFrontend frontend=new CliFrontend();
    Object result=frontend.buildProgram(line);
    assertTrue(result instanceof PackagedProgram);
    PackagedProgram prog=(PackagedProgram)result;
    Assert.assertArrayEquals(new String[]{"--verbose","true","arg1","arg2"},prog.getArguments());
    Assert.assertEquals(TEST_JAR_MAIN_CLASS,prog.getMainClassName());
  }
 catch (  Exception e) {
    System.err.println(e.getMessage());
    e.printStackTrace();
    fail("Program caused an exception: " + e.getMessage());
  }
}
