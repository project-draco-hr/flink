{
  try {
    String[] parameters={"-j",getTestJarPath(),"-a","some","program","arguments"};
    CommandLine line=new PosixParser().parse(CliFrontend.getProgramSpecificOptions(new Options()),parameters,false);
    CliFrontend frontend=new CliFrontend();
    Object result=frontend.buildProgram(line);
    assertTrue(result instanceof PackagedProgram);
    PackagedProgram prog=(PackagedProgram)result;
    Assert.assertArrayEquals(new String[]{"some","program","arguments"},prog.getArguments());
    Assert.assertEquals(TEST_JAR_MAIN_CLASS,prog.getMainClassName());
  }
 catch (  Exception e) {
    System.err.println(e.getMessage());
    e.printStackTrace();
    fail("Program caused an exception: " + e.getMessage());
  }
}
