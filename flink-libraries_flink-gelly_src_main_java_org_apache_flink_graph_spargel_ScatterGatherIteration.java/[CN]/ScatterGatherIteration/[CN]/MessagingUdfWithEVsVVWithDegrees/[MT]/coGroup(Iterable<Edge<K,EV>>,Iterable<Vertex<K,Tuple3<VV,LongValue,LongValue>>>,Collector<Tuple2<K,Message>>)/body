{
  final Iterator<Vertex<K,Tuple3<VV,LongValue,LongValue>>> stateIter=state.iterator();
  if (stateIter.hasNext()) {
    Vertex<K,Tuple3<VV,LongValue,LongValue>> vertexWithDegrees=stateIter.next();
    nextVertex.setField(vertexWithDegrees.f0,0);
    nextVertex.setField(vertexWithDegrees.f1.f0,1);
    messagingFunction.setInDegree(vertexWithDegrees.f1.f1.getValue());
    messagingFunction.setOutDegree(vertexWithDegrees.f1.f2.getValue());
    messagingFunction.set((Iterator<?>)edges.iterator(),out,vertexWithDegrees.getId());
    messagingFunction.sendMessages(nextVertex);
  }
}
