{
  StringBuffer buffer=new StringBuffer();
  BufferedReader reader=new BufferedReader(new InputStreamReader(socket.getInputStream()));
  while (true) {
    int data=reader.read();
    if (!socket.isConnected() || socket.isClosed() || data == -1) {
      break;
    }
    if (data == delimiter) {
      collector.collect(buffer.toString());
      buffer=new StringBuffer();
    }
 else     if (data != '\r') {
      buffer.append((char)data);
    }
  }
  if (buffer.length() > 0) {
    collector.collect(buffer.toString());
  }
}
