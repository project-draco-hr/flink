{
  Map<Serializable,C> checkpoints=new HashMap<Serializable,C>();
  for (  Entry<Serializable,S> stateEntry : fetchedState.entrySet()) {
    checkpoints.put(stateEntry.getKey(),checkpointer.snapshotState(stateEntry.getValue(),checkpointId,checkpointTimestamp));
  }
  return provider.createStateHandle((Serializable)checkpoints);
}
