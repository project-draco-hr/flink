{
  TransferEnvelope transferEnvelope=null;
synchronized (this.queuedEnvelopes) {
    if (this.queuedEnvelopes.isEmpty()) {
      LOG.error("Inconsistency: releaseConsumedReadBuffer called on empty queue!");
      return;
    }
    transferEnvelope=this.queuedEnvelopes.poll();
    if (transferEnvelope.getBuffer() != null) {
      if (transferEnvelope.getBuffer().isBackedByMemory()) {
        --this.numberOfMemoryBuffers;
      }
 else {
        --this.numberOfFileBuffers;
      }
    }
  }
  final EventList eventList=transferEnvelope.getEventList();
  if (!eventList.isEmpty()) {
    final Iterator<AbstractEvent> it=eventList.iterator();
    while (it.hasNext()) {
      this.byteBufferedInputChannel.processEvent(it.next());
    }
  }
  final Buffer consumedBuffer=transferEnvelope.getBuffer();
  if (consumedBuffer == null) {
    LOG.error("Inconsistency: consumed read buffer is null!");
    return;
  }
  if (consumedBuffer.remaining() > 0) {
    LOG.error("consumedReadBuffer has " + consumedBuffer.remaining() + " unconsumed bytes left!!");
  }
  consumedBuffer.recycleBuffer();
  if (this.uncompressedDataBuffer != null) {
    this.uncompressedDataBuffer.recycleBuffer();
    this.uncompressedDataBuffer=null;
  }
}
