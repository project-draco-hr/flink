{
  final Instance host=createTestClusterInstance();
  final JobID jobID=new JobID();
  for (int run=0; run < 2; ++run) {
    AllocatedResource[] allocatedSlots=new AllocatedResource[8];
    for (int i=0; i < 8; ++i) {
      try {
        allocatedSlots[i]=host.allocateSlot(jobID);
      }
 catch (      InstanceException ex) {
        fail(ex.getMessage());
      }
      assertNotNull(allocatedSlots[i]);
    }
    boolean instanceException=false;
    try {
      host.allocateSlot(jobID);
    }
 catch (    InstanceException ex) {
      instanceException=true;
    }
    assertTrue(instanceException);
    for (int i=0; i < 8; ++i) {
      host.releaseSlot(allocatedSlots[i].getAllocationID());
    }
  }
}
