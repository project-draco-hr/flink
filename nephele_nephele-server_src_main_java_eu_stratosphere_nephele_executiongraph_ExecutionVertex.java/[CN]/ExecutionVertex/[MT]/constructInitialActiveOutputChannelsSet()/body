{
  final SerializableHashSet<ChannelID> activeOutputChannels=new SerializableHashSet<ChannelID>();
synchronized (this) {
    for (int i=0; i < this.outputGates.length; ++i) {
      final ExecutionGate outputGate=this.outputGates[i];
      final ChannelType channelType=outputGate.getChannelType();
      final int numberOfOutputChannels=outputGate.getNumberOfEdges();
      for (int j=0; j < numberOfOutputChannels; ++j) {
        ExecutionEdge outputChannel=outputGate.getEdge(j);
        if (channelType == ChannelType.FILE) {
          activeOutputChannels.add(outputChannel.getOutputChannelID());
          continue;
        }
        if (channelType == ChannelType.INMEMORY) {
          activeOutputChannels.add(outputChannel.getOutputChannelID());
          continue;
        }
        if (channelType == ChannelType.NETWORK) {
          final ExecutionVertex connectedVertex=outputChannel.getInputGate().getVertex();
          final ExecutionState state=connectedVertex.getExecutionState();
          if (state == ExecutionState.READY || state == ExecutionState.STARTING || state == ExecutionState.RUNNING) {
            activeOutputChannels.add(outputChannel.getOutputChannelID());
          }
        }
      }
    }
  }
  return activeOutputChannels;
}
