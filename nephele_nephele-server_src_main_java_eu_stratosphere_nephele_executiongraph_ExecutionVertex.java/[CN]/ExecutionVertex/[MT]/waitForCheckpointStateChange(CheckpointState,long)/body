{
  if (timeout <= 0L) {
    throw new IllegalArgumentException("Argument timeout must be greather than zero");
  }
  final long startTime=System.currentTimeMillis();
  while (this.checkpointState.get() == initialValue) {
    Thread.sleep(1);
    if (startTime + timeout < System.currentTimeMillis()) {
      break;
    }
  }
}
