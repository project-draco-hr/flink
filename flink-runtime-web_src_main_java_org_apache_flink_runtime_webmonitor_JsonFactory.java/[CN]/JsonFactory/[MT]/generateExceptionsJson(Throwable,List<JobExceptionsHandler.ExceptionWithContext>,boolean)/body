{
  try {
    StringWriter writer=new StringWriter();
    JsonGenerator gen=jacksonFactory.createJsonGenerator(writer);
    gen.writeStartObject();
    gen.writeStringField("root-exception",ExceptionUtils.stringifyException(rootCause));
    if (allExceptions != null && !allExceptions.isEmpty()) {
      gen.writeArrayFieldStart("all-exceptions");
      for (      JobExceptionsHandler.ExceptionWithContext ewc : allExceptions) {
        gen.writeStartObject();
        gen.writeStringField("exception",ExceptionUtils.stringifyException(ewc.getException()));
        gen.writeStringField("task",ewc.getTaskName());
        gen.writeStringField("location",ewc.getLocation());
        gen.writeEndObject();
      }
      gen.writeEndArray();
      gen.writeBooleanField("truncated",truncated);
    }
    gen.writeEndObject();
    gen.close();
    return writer.toString();
  }
 catch (  Exception e) {
    throw new RuntimeException(e.getMessage(),e);
  }
}
