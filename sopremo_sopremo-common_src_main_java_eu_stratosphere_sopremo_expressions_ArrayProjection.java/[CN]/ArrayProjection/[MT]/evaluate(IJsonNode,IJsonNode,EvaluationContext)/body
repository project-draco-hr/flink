{
  if (!(node instanceof IArrayNode)) {
    final PullingStreamArrayNode targetArray=SopremoUtil.ensureType(target,PullingStreamArrayNode.class);
    targetArray.setSource((IStreamArrayNode)node);
    targetArray.setExpressionAndContext(this.expression,context);
    return targetArray;
  }
  final IArrayNode array=(IArrayNode)node;
  final IArrayNode targetArray=SopremoUtil.reinitializeTarget(target,ArrayNode.class);
  for (int index=0, size=array.size(); index < size; index++)   targetArray.add(this.expression.evaluate(array.get(index),targetArray.get(index),context));
  return targetArray;
}
