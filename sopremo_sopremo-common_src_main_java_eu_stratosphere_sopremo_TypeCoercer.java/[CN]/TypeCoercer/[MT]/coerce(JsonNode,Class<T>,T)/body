{
  final Map<Class<? extends JsonNode>,Coercer> toCoercer=this.coercers.get(targetType);
  Coercer fromCoercer=toCoercer.get(node.getClass());
  if (fromCoercer == null) {
    for (Class<?> superType=node.getClass(); superType != JsonNode.class.getSuperclass() && fromCoercer == null; superType=superType.getSuperclass())     fromCoercer=toCoercer.get(superType);
    if (fromCoercer == null)     fromCoercer=NULL_COERCER;
    toCoercer.put(node.getClass(),fromCoercer);
  }
  T result=(T)fromCoercer.coerce(node);
  if (result == null)   result=defaultValue;
  return result;
}
