{
  if (prog.isUsingProgramEntryPoint()) {
    return getOptimizedPlan(prog.getPlanWithJars());
  }
 else   if (prog.isUsingInteractiveMode()) {
    OptimizerPlanEnvironment env=new OptimizerPlanEnvironment(this.compiler);
    env.setAsContext();
    try {
      prog.invokeInteractiveModeForExecution();
    }
 catch (    Throwable t) {
    }
    return env.optimizerPlan;
  }
 else {
    throw new RuntimeException();
  }
}
