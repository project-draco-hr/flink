{
  final byte[] bytes=new byte[8];
  final long value=0x12345678900abdefL;
  UNSAFE.putLong(bytes,(long)UNSAFE.arrayBaseOffset(byte[].class),value);
  final int lower=bytes[0] & 0xff;
  final int higher=bytes[7] & 0xff;
  if (lower == 0x12 && higher == 0xef) {
    return ByteOrder.BIG_ENDIAN;
  }
 else   if (lower == 0xef && higher == 0x12) {
    return ByteOrder.LITTLE_ENDIAN;
  }
 else {
    throw new RuntimeException("Unrecognized byte order.");
  }
}
