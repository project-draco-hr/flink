{
  GlobalConfiguration.loadConfiguration(System.getProperty(USER_DIR_KEY) + CORRECT_CONF_DIR);
  MyInstanceListener dummyInstanceListener=new MyInstanceListener();
  ClusterManager cm=new ClusterManager();
  cm.setInstanceListener(dummyInstanceListener);
  try {
    final InstanceConnectionInfo instanceConnectionInfo=new InstanceConnectionInfo(InetAddress.getByName("192.168.198.1"),1234,1235);
    final HardwareDescription hardwareDescription=HardwareDescriptionFactory.construct(8,32L * 1024L * 1024L* 1024L,32L * 1024L * 1024L* 1024L);
    cm.reportHeartBeat(instanceConnectionInfo,hardwareDescription);
    final JobID jobID=new JobID();
    final Configuration conf=new Configuration();
    try {
      cm.requestInstance(jobID,conf,cm.getInstanceTypeByName(SMALL_INSTANCE_TYPE_NAME));
      cm.requestInstance(jobID,conf,cm.getInstanceTypeByName(SMALL_INSTANCE_TYPE_NAME));
    }
 catch (    InstanceException ie) {
      fail(ie.getMessage());
    }
  }
 catch (  UnknownHostException e) {
    fail(e.getMessage());
  }
 finally {
    if (cm != null) {
      cm.shutdown();
    }
  }
}
