def errors(obj, depth=0, exact=False, safe=False):
    'get errors for objects that fail to pickle'
    from dill import pickles, copy
    if (not depth):
        try:
            pik = copy(obj)
            if exact:
                assert (pik == obj), ('Unpickling produces %s instead of %s' % (pik, obj))
            assert (type(pik) == type(obj)), ('Unpickling produces %s instead of %s' % (type(pik), type(obj)))
            return None
        except Exception:
            import sys
            return sys.exc_info()[1]
    return dict(((attr, errors(getattr(obj, attr), (depth - 1), exact, safe)) for attr in dir(obj) if (not pickles(getattr(obj, attr), exact, safe))))
