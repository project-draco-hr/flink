def nestedcode(func):
    'get the code objects for any nested functions (e.g. in a closure)'
    func = code(func)
    if (not iscode(func)):
        return []
    nested = []
    for co in func.co_consts:
        if (co is None):
            continue
        co = code(co)
        if co:
            nested.append(co)
    return nested
