def code(func):
    'get the code object for the given function or method\n\n    NOTE: use dill.source.getsource(CODEOBJ) to get the source code\n    '
    if PY3:
        im_func = '__func__'
        func_code = '__code__'
    else:
        im_func = 'im_func'
        func_code = 'func_code'
    if ismethod(func):
        func = getattr(func, im_func)
    if isfunction(func):
        func = getattr(func, func_code)
    if istraceback(func):
        func = func.tb_frame
    if isframe(func):
        func = func.f_code
    if iscode(func):
        return func
    return
