{
  IntermediateResultPartitionQueueIterator iterator=queue.getQueueIterator(Optional.<BufferProvider>absent());
  NotificationListener listener=mock(NotificationListener.class);
  assertTrue(iterator.subscribe(listener));
  queue.discard();
  verify(listener,times(1)).onNotification();
  assertTrue(iterator.isConsumed());
}
