{
  for (  ManagementAttachment element : path.getPathElements()) {
    if (element instanceof ManagementEdge) {
      edgesSortedByLatency.add((ManagementEdge)element);
    }
  }
  Collections.sort(edgesSortedByLatency,edgeComparator);
  for (  ManagementEdge edge : edgesSortedByLatency) {
    if (edgesToAdjust.containsKey(edge)) {
      continue;
    }
    EdgeCharacteristics edgeChar=(EdgeCharacteristics)edge.getAttachment();
    if (!hasFreshValues(edge)) {
      continue;
    }
    double edgeLatency=edgeChar.getChannelLatencyInMillis();
    double avgOutputBufferLatency=edgeChar.getOutputBufferLatencyInMillis() / 2;
    if (avgOutputBufferLatency > 5 && avgOutputBufferLatency >= 0.05 * edgeLatency) {
      reduceBufferSize(edge,edgesToAdjust);
    }
 else     if (avgOutputBufferLatency <= 1) {
      increaseBufferSize(edge,edgesToAdjust);
    }
  }
  edgesSortedByLatency.clear();
}
