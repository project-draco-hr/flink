{
  EdgeCharacteristics edgeChar=(EdgeCharacteristics)edge.getAttachment();
  double avgOutputBufferLatency=edgeChar.getOutputBufferLatencyInMillis() / 2;
  double reductionFactor=Math.pow(0.99,avgOutputBufferLatency);
  reductionFactor=Math.max(0.1,reductionFactor);
  int newBufferSize=(int)Math.max(100,oldBufferSize * reductionFactor);
  return newBufferSize;
}
