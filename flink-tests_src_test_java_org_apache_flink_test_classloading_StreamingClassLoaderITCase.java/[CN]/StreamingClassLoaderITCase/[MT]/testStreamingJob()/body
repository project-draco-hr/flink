{
  try {
    Configuration config=new Configuration();
    config.setInteger(ConfigConstants.LOCAL_INSTANCE_MANAGER_NUMBER_TASK_MANAGER,2);
    config.setInteger(ConfigConstants.TASK_MANAGER_NUM_TASK_SLOTS,2);
    ForkableFlinkMiniCluster testCluster=new ForkableFlinkMiniCluster(config,false);
    try {
      int port=testCluster.getJobManagerRPCPort();
      PackagedProgram prog=new PackagedProgram(new File(JAR_FILE),new String[]{JAR_FILE,"localhost",String.valueOf(port)});
      prog.invokeInteractiveModeForExecution();
    }
  finally {
      testCluster.shutdown();
    }
  }
 catch (  Throwable t) {
    t.printStackTrace();
    Assert.fail(t.getMessage());
  }
}
