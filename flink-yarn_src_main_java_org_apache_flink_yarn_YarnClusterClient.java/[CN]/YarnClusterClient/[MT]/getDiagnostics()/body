{
  if (!isConnected) {
    throw new IllegalStateException("The cluster has been connected to the ApplicationMaster.");
  }
  if (getApplicationStatus() == ApplicationStatus.SUCCEEDED) {
    LOG.warn("getDiagnostics() called for cluster which is not in failed state");
  }
  ApplicationReport lastReport=pollingRunner.getLastReport();
  if (lastReport == null) {
    LOG.warn("Last report is null");
    return null;
  }
 else {
    return lastReport.getDiagnostics();
  }
}
