{
  boolean hasStream=false;
  for (  JsonNode param : params) {
    if (!param.isArray())     throw new EvaluationException("Can only union arrays");
    hasStream|=param instanceof StreamArrayNode;
  }
  if (hasStream) {
    @SuppressWarnings("unchecked") Iterator<JsonNode>[] iterators=new Iterator[params.length];
    for (int index=0; index < iterators.length; index++)     iterators[index]=params[index].iterator();
    return new StreamArrayNode(new ConcatenatingIterator<JsonNode>(iterators));
  }
  ArrayNode union=NODE_FACTORY.arrayNode();
  for (  JsonNode param : params)   union.addAll((ArrayNode)param);
  return union;
}
