{
synchronized (stateMonitor) {
    if (!finishedSubtasks[subtask]) {
      finishedSubtasks[subtask]=true;
      numSubtasksInFinalState++;
      if (numSubtasksInFinalState == parallelism) {
        stateMonitor.notifyAll();
        graph.jobVertexInFinalState(this);
      }
    }
  }
}
