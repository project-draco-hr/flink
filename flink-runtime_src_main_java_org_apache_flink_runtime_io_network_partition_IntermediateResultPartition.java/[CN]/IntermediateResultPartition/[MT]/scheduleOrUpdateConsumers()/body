{
  while (!isReleased) {
    final JobManagerMessages.ConsumerNotificationResult result=AkkaUtils.ask(networkEnvironment.getJobManager(),new JobManagerMessages.ScheduleOrUpdateConsumers(jobId,producerExecutionId,partitionIndex),networkEnvironment.getJobManagerTimeout());
    if (result.success()) {
      return;
    }
 else {
      Option<Throwable> error=result.error();
      if (error.isDefined()) {
        throw new IOException(error.get().getMessage(),error.get());
      }
    }
    try {
      Thread.sleep(10);
    }
 catch (    InterruptedException e) {
      throw new IOException("Unexpected interruption during consumer schedule or update.",e);
    }
  }
}
